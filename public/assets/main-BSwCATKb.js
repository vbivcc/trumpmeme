const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.parent.smartsupp.getAssetUrl("assets/WidgetMessenger-CswZf7EW.js"),window.parent.smartsupp.getAssetUrl("assets/WidgetMessengerInput-BHudvUbV.js"),window.parent.smartsupp.getAssetUrl("assets/WidgetPopup-CacF_RyW.js")])))=>i.map(i=>d[i]);
var lu=Array.isArray,$f=Array.prototype.indexOf,Nf=Array.from,fu=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,du=Object.getOwnPropertyDescriptors,qf=Object.prototype,zf=Array.prototype,Gi=Object.getPrototypeOf,Xo=Object.isExtensible;function Jt(e){return typeof e=="function"}const de=()=>{};function jf(e){return e()}function Sn(e){for(var t=0;t<e.length;t++)e[t]()}const He=2,hu=4,$r=8,Nr=16,ut=32,fn=64,Er=128,Re=256,Fr=512,Fe=1024,at=2048,Vt=4096,tn=8192,qr=16384,pu=32768,dn=65536,Uf=1<<17,Vf=1<<19,gu=1<<20,bi=1<<21,tt=Symbol("$state"),vu=Symbol("legacy props"),Hf=Symbol("");function mu(e){return e===this.v}function zr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Gf(e,t){return e!==t}function Wi(e){return!zr(e,this.v)}function Wf(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Kf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xf(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Zf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Yf(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Jf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ed(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let hn=!1;function td(){hn=!0}const PC=1,LC=2,$C=4,NC=8,qC=16,nd=1,rd=2,sd=4,id=8,od=16,ad=1,cd=2,ud=4,ld=1,fd=2,ve=Symbol(),dd="http://www.w3.org/1999/xhtml";function Ki(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let q=null;function Zo(e){q=e}function zC(e){return yu().get(e)}function jC(e,t){return yu().set(e,t),t}function ae(e,t=!1,n){var r=q={p:q,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};hn&&!t&&(q.l={s:null,u:null,r1:[],r2:Xi(!1)}),Qi(()=>{r.d=!0})}function ce(e){const t=q;if(t!==null){const l=t.e;if(l!==null){var n=V,r=z;t.e=null;try{for(var i=0;i<l.length;i++){var o=l[i];rt(o.effect),Ne(o.reaction),Pn(o.fn)}}finally{rt(n),Ne(r)}}q=t.p,t.m=!0}return{}}function In(){return!hn||q!==null&&q.l===null}function yu(e){return q===null&&Ki(),q.c??(q.c=new Map(hd(q)||void 0))}function hd(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function pt(e){if(typeof e!="object"||e===null||tt in e)return e;const t=Gi(e);if(t!==qf&&t!==zf)return e;var n=new Map,r=lu(e),i=te(0),o=z,l=c=>{var d=z;Ne(o);var u=c();return Ne(d),u};return r&&n.set("length",te(e.length)),new Proxy(e,{defineProperty(c,d,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Jf();var a=n.get(d);return a===void 0?(a=l(()=>te(u.value)),n.set(d,a)):N(a,l(()=>pt(u.value))),!0},deleteProperty(c,d){var u=n.get(d);if(u===void 0)d in c&&(n.set(d,l(()=>te(ve))),ds(i));else{if(r&&typeof d=="string"){var a=n.get("length"),s=Number(d);Number.isInteger(s)&&s<a.v&&N(a,s)}N(u,ve),ds(i)}return!0},get(c,d,u){var h;if(d===tt)return e;var a=n.get(d),s=d in c;if(a===void 0&&(!s||(h=bt(c,d))!=null&&h.writable)&&(a=l(()=>te(pt(s?c[d]:ve))),n.set(d,a)),a!==void 0){var f=k(a);return f===ve?void 0:f}return Reflect.get(c,d,u)},getOwnPropertyDescriptor(c,d){var u=Reflect.getOwnPropertyDescriptor(c,d);if(u&&"value"in u){var a=n.get(d);a&&(u.value=k(a))}else if(u===void 0){var s=n.get(d),f=s==null?void 0:s.v;if(s!==void 0&&f!==ve)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return u},has(c,d){var f;if(d===tt)return!0;var u=n.get(d),a=u!==void 0&&u.v!==ve||Reflect.has(c,d);if(u!==void 0||V!==null&&(!a||(f=bt(c,d))!=null&&f.writable)){u===void 0&&(u=l(()=>te(a?pt(c[d]):ve)),n.set(d,u));var s=k(u);if(s===ve)return!1}return a},set(c,d,u,a){var y;var s=n.get(d),f=d in c;if(r&&d==="length")for(var h=u;h<s.v;h+=1){var p=n.get(h+"");p!==void 0?N(p,ve):h in c&&(p=l(()=>te(ve)),n.set(h+"",p))}s===void 0?(!f||(y=bt(c,d))!=null&&y.writable)&&(s=l(()=>te(void 0)),N(s,l(()=>pt(u))),n.set(d,s)):(f=s.v!==ve,N(s,l(()=>pt(u))));var v=Reflect.getOwnPropertyDescriptor(c,d);if(v!=null&&v.set&&v.set.call(a,u),!f){if(r&&typeof d=="string"){var g=n.get("length"),m=Number(d);Number.isInteger(m)&&m>=g.v&&N(g,m+1)}ds(i)}return!0},ownKeys(c){k(i);var d=Reflect.ownKeys(c).filter(s=>{var f=n.get(s);return f===void 0||f.v!==ve});for(var[u,a]of n)a.v!==ve&&!(u in c)&&d.push(u);return d},setPrototypeOf(){Qf()}})}function ds(e,t=1){N(e,e.v+t)}function Yo(e){try{if(e!==null&&typeof e=="object"&&tt in e)return e[tt]}catch{}return e}function UC(e,t){return Object.is(Yo(e),Yo(t))}function nn(e){var t=He|at,n=z!==null&&(z.f&He)!==0?z:null;return V===null||n!==null&&(n.f&Re)!==0?t|=Re:V.f|=gu,{ctx:q,deps:null,effects:null,equals:mu,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??V}}function Ge(e){const t=nn(e);return Ru(t),t}function rn(e){const t=nn(e);return t.equals=Wi,t}function bu(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)wt(t[n])}}function pd(e){for(var t=e.parent;t!==null;){if((t.f&He)===0)return t;t=t.parent}return null}function _u(e){var t,n=V;rt(pd(e));try{bu(e),t=Lu(e)}finally{rt(n)}return t}function wu(e){var t=_u(e),n=(vt||(e.f&Re)!==0)&&e.deps!==null?Vt:Fe;We(e,n),e.equals(t)||(e.v=t,e.wv=Iu())}const kn=new Map;function Xi(e,t){var n={f:0,v:e,reactions:null,equals:mu,rv:0,wv:0};return n}function te(e,t){const n=Xi(e);return Ru(n),n}function Zi(e,t=!1){var r;const n=Xi(e);return t||(n.equals=Wi),hn&&q!==null&&q.l!==null&&((r=q.l).s??(r.s=[])).push(n),n}function N(e,t,n=!1){z!==null&&!et&&In()&&(z.f&(He|Nr))!==0&&!(ye!=null&&ye.includes(e))&&ed();let r=n?pt(t):t;return gd(e,r)}function gd(e,t){if(!e.equals(t)){var n=e.v;$n?kn.set(e,t):kn.set(e,n),e.v=t,(e.f&He)!==0&&((e.f&at)!==0&&_u(e),We(e,(e.f&Re)===0?Fe:Vt)),e.wv=Iu(),Cu(e,at),In()&&V!==null&&(V.f&Fe)!==0&&(V.f&(ut|fn))===0&&(Le===null?Ed([e]):Le.push(e))}return t}function Cu(e,t){var n=e.reactions;if(n!==null)for(var r=In(),i=n.length,o=0;o<i;o++){var l=n[o],c=l.f;(c&at)===0&&(!r&&l===V||(We(l,t),(c&(Fe|Re))!==0&&((c&He)!==0?Cu(l,Vt):Vr(l))))}}var Jo,Au,Eu,Fu;function vd(){if(Jo===void 0){Jo=window,Au=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Eu=bt(t,"firstChild").get,Fu=bt(t,"nextSibling").get,Xo(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xo(n)&&(n.__t=void 0)}}function Yi(e=""){return document.createTextNode(e)}function sn(e){return Eu.call(e)}function Ji(e){return Fu.call(e)}function R(e,t){return sn(e)}function Ce(e,t){{var n=sn(e);return n instanceof Comment&&n.data===""?Ji(n):n}}function U(e,t=1,n=!1){let r=e;for(;t--;)r=Ji(r);return r}function VC(e){e.textContent=""}function Su(e){V===null&&z===null&&Xf(),z!==null&&(z.f&Re)!==0&&V===null&&Kf(),$n&&Wf()}function md(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function pn(e,t,n,r=!0){var i=V,o={ctx:q,deps:null,nodes_start:null,nodes_end:null,f:e|at,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{to(o),o.f|=pu}catch(d){throw wt(o),d}else t!==null&&Vr(o);var l=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(gu|Er))===0;if(!l&&r&&(i!==null&&md(o,i),z!==null&&(z.f&He)!==0)){var c=z;(c.effects??(c.effects=[])).push(o)}return o}function Qi(e){const t=pn($r,null,!1);return We(t,Fe),t.teardown=e,t}function nt(e){Su();var t=V!==null&&(V.f&ut)!==0&&q!==null&&!q.m;if(t){var n=q;(n.e??(n.e=[])).push({fn:e,effect:V,reaction:z})}else{var r=Pn(e);return r}}function yd(e){return Su(),eo(e)}function bd(e){const t=pn(fn,e,!0);return(n={})=>new Promise(r=>{n.outro?xn(t,()=>{wt(t),r(void 0)}):(wt(t),r(void 0))})}function Pn(e){return pn(hu,e,!1)}function eo(e){return pn($r,e,!0)}function ie(e,t=[],n=nn){const r=t.map(n);return Ln(()=>e(...r.map(k)))}function Ln(e,t=0){return pn($r|Nr|t,e,!0)}function on(e,t=!0){return pn($r|ut,e,!0,t)}function ku(e){var t=e.teardown;if(t!==null){const n=$n,r=z;ta(!0),Ne(null);try{t.call(null)}finally{ta(n),Ne(r)}}}function xu(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&fn)!==0?n.parent=null:wt(n,t),n=r}}function _d(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ut)===0&&wt(t),t=n}}function wt(e,t=!0){var n=!1;(t||(e.f&Vf)!==0)&&e.nodes_start!==null&&(wd(e.nodes_start,e.nodes_end),n=!0),xu(e,t&&!n),Tr(e,0),We(e,qr);var r=e.transitions;if(r!==null)for(const o of r)o.stop();ku(e);var i=e.parent;i!==null&&i.first!==null&&Tu(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function wd(e,t){for(;e!==null;){var n=e===t?null:Ji(e);e.remove(),e=n}}function Tu(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function xn(e,t){var n=[];Ou(e,n,!0),Cd(n,()=>{wt(e),t&&t()})}function Cd(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Ou(e,t,n){if((e.f&tn)===0){if(e.f^=tn,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&dn)!==0||(r.f&ut)!==0;Ou(r,t,o?n:!1),r=i}}}function Qo(e){Mu(e,!0)}function Mu(e,t){if((e.f&tn)!==0){e.f^=tn,(e.f&Fe)===0&&(e.f^=Fe),Nn(e)&&(We(e,at),Vr(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&dn)!==0||(n.f&ut)!==0;Mu(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Tn=[],_i=[];function Du(){var e=Tn;Tn=[],Sn(e)}function Ad(){var e=_i;_i=[],Sn(e)}function jr(e){Tn.length===0&&queueMicrotask(Du),Tn.push(e)}function ea(){Tn.length>0&&Du(),_i.length>0&&Ad()}let vr=!1,Sr=!1,kr=null,qt=!1,$n=!1;function ta(e){$n=e}let En=[];let z=null,et=!1;function Ne(e){z=e}let V=null;function rt(e){V=e}let ye=null;function Ru(e){z!==null&&z.f&bi&&(ye===null?ye=[e]:ye.push(e))}let me=null,Me=0,Le=null;function Ed(e){Le=e}let Bu=1,xr=0,vt=!1;function Iu(){return++Bu}function Nn(e){var s;var t=e.f;if((t&at)!==0)return!0;if((t&Vt)!==0){var n=e.deps,r=(t&Re)!==0;if(n!==null){var i,o,l=(t&Fr)!==0,c=r&&V!==null&&!vt,d=n.length;if(l||c){var u=e,a=u.parent;for(i=0;i<d;i++)o=n[i],(l||!((s=o==null?void 0:o.reactions)!=null&&s.includes(u)))&&(o.reactions??(o.reactions=[])).push(u);l&&(u.f^=Fr),c&&a!==null&&(a.f&Re)===0&&(u.f^=Re)}for(i=0;i<d;i++)if(o=n[i],Nn(o)&&wu(o),o.wv>e.wv)return!0}(!r||V!==null&&!vt)&&We(e,Fe)}return!1}function Fd(e,t){for(var n=t;n!==null;){if((n.f&Er)!==0)try{n.fn(e);return}catch{n.f^=Er}n=n.parent}throw vr=!1,e}function na(e){return(e.f&qr)===0&&(e.parent===null||(e.parent.f&Er)===0)}function Ur(e,t,n,r){if(vr){if(n===null&&(vr=!1),na(t))throw e;return}if(n!==null&&(vr=!0),Fd(e,t),na(t))throw e}function Pu(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];ye!=null&&ye.includes(e)||((o.f&He)!==0?Pu(o,t,!1):t===o&&(n?We(o,at):(o.f&Fe)!==0&&We(o,Vt),Vr(o)))}}function Lu(e){var h;var t=me,n=Me,r=Le,i=z,o=vt,l=ye,c=q,d=et,u=e.f;me=null,Me=0,Le=null,vt=(u&Re)!==0&&(et||!qt||z===null),z=(u&(ut|fn))===0?e:null,ye=null,Zo(e.ctx),et=!1,xr++,e.f|=bi;try{var a=(0,e.fn)(),s=e.deps;if(me!==null){var f;if(Tr(e,Me),s!==null&&Me>0)for(s.length=Me+me.length,f=0;f<me.length;f++)s[Me+f]=me[f];else e.deps=s=me;if(!vt)for(f=Me;f<s.length;f++)((h=s[f]).reactions??(h.reactions=[])).push(e)}else s!==null&&Me<s.length&&(Tr(e,Me),s.length=Me);if(In()&&Le!==null&&!et&&s!==null&&(e.f&(He|Vt|at))===0)for(f=0;f<Le.length;f++)Pu(Le[f],e);return i!==null&&i!==e&&(xr++,Le!==null&&(r===null?r=Le:r.push(...Le))),a}finally{me=t,Me=n,Le=r,z=i,vt=o,ye=l,Zo(c),et=d,e.f^=bi}}function Sd(e,t){let n=t.reactions;if(n!==null){var r=$f.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&He)!==0&&(me===null||!me.includes(t))&&(We(t,Vt),(t.f&(Re|Fr))===0&&(t.f^=Fr),bu(t),Tr(t,0))}function Tr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Sd(e,n[r])}function to(e){var t=e.f;if((t&qr)===0){We(e,Fe);var n=V,r=q,i=qt;V=e,qt=!0;try{(t&Nr)!==0?_d(e):xu(e),ku(e);var o=Lu(e);e.teardown=typeof o=="function"?o:null,e.wv=Bu;var l=e.deps,c}catch(d){Ur(d,e,n,r||e.ctx)}finally{qt=i,V=n}}}function kd(){try{Zf()}catch(e){if(kr!==null)Ur(e,kr,null);else throw e}}function $u(){var e=qt;try{var t=0;for(qt=!0;En.length>0;){t++>1e3&&kd();var n=En,r=n.length;En=[];for(var i=0;i<r;i++){var o=Td(n[i]);xd(o)}kn.clear()}}finally{Sr=!1,qt=e,kr=null}}function xd(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(qr|tn))===0)try{Nn(r)&&(to(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Tu(r):r.fn=null))}catch(i){Ur(i,r,null,r.ctx)}}}function Vr(e){Sr||(Sr=!0,queueMicrotask($u));for(var t=kr=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(fn|ut))!==0){if((n&Fe)===0)return;t.f^=Fe}}En.push(t)}function Td(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(ut|fn))!==0,o=i&&(r&Fe)!==0;if(!o&&(r&tn)===0){if((r&hu)!==0)t.push(n);else if(i)n.f^=Fe;else try{Nn(n)&&to(n)}catch(d){Ur(d,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}return t}function Od(e){var t;for(ea();En.length>0;)Sr=!0,$u(),ea();return t}async function Md(){await Promise.resolve(),Od()}function k(e){var t=e.f,n=(t&He)!==0;if(z!==null&&!et){if(!(ye!=null&&ye.includes(e))){var r=z.deps;e.rv<xr&&(e.rv=xr,me===null&&r!==null&&r[Me]===e?Me++:me===null?me=[e]:(!vt||!me.includes(e))&&me.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&Re)===0&&(i.f^=Re)}return n&&(i=e,Nn(i)&&wu(i)),$n&&kn.has(e)?kn.get(e):e.v}function ct(e){var t=et;try{return et=!0,e()}finally{et=t}}const Dd=-7169;function We(e,t){e.f=e.f&Dd|t}function Nu(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(tt in e)wi(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&tt in n&&wi(n)}}}function wi(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{wi(e[r],t)}catch{}const n=Gi(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=du(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function Rd(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Bd=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Id(e){return Bd.includes(e)}const Pd={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Ld(e){return e=e.toLowerCase(),Pd[e]??e}const $d=["touchstart","touchmove"];function Nd(e){return $d.includes(e)}function qd(e,t){if(t){const n=document.body;e.autofocus=!0,jr(()=>{document.activeElement===n&&e.focus()})}}let ra=!1;function zd(){ra||(ra=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function no(e){var t=z,n=V;Ne(null),rt(null);try{return e()}finally{Ne(t),rt(n)}}function HC(e,t,n,r=n){e.addEventListener(t,()=>no(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),zd()}const qu=new Set,Ci=new Set;function zu(e,t,n,r={}){function i(o){if(r.capture||An.call(t,o),!o.cancelBubble)return no(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?jr(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function mr(e,t,n,r,i){var o={capture:r,passive:i},l=zu(e,t,n,o);(t===document.body||t===window||t===document)&&Qi(()=>{t.removeEventListener(e,l,o)})}function Hr(e){for(var t=0;t<e.length;t++)qu.add(e[t]);for(var n of Ci)n(e)}function An(e){var y;var t=this,n=t.ownerDocument,r=e.type,i=((y=e.composedPath)==null?void 0:y.call(e))||[],o=i[0]||e.target,l=0,c=e.__root;if(c){var d=i.indexOf(c);if(d!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;d<=u&&(l=d)}if(o=i[l]||e.target,o!==t){fu(e,"currentTarget",{configurable:!0,get(){return o||n}});var a=z,s=V;Ne(null),rt(null);try{for(var f,h=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var v=o["__"+r];if(v!=null&&(!o.disabled||e.target===o))if(lu(v)){var[g,...m]=v;g.apply(o,[e,...m])}else v.call(o,e)}catch(b){f?h.push(b):f=b}if(e.cancelBubble||p===t||p===null)break;o=p}if(f){for(let b of h)queueMicrotask(()=>{throw b});throw f}}finally{e.__root=t,delete e.currentTarget,Ne(a),rt(s)}}}function ju(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function On(e,t){var n=V;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Z(e,t){var n=(t&ld)!==0,r=(t&fd)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=ju(o?e:"<!>"+e),n||(i=sn(i)));var l=r||Au?document.importNode(i,!0):i.cloneNode(!0);if(n){var c=sn(l),d=l.lastChild;On(c,d)}else On(l,l);return l}}function Uu(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,o;return()=>{if(!o){var l=ju(i),c=sn(l);o=sn(c)}var d=o.cloneNode(!0);return On(d,d),d}}function GC(e=""){{var t=Yi(e+"");return On(t,t),t}}function De(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Yi();return e.append(t,n),On(t,n),e}function I(e,t){e!==null&&e.before(t)}let Ai=!0;function Gr(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Vu(e,t){return jd(e,t)}const Wt=new Map;function jd(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:l=!0}){vd();var c=new Set,d=s=>{for(var f=0;f<s.length;f++){var h=s[f];if(!c.has(h)){c.add(h);var p=Nd(h);t.addEventListener(h,An,{passive:p});var v=Wt.get(h);v===void 0?(document.addEventListener(h,An,{passive:p}),Wt.set(h,1)):Wt.set(h,v+1)}}};d(Nf(qu)),Ci.add(d);var u=void 0,a=bd(()=>{var s=n??t.appendChild(Yi());return on(()=>{if(o){ae({});var f=q;f.c=o}i&&(r.$$events=i),Ai=l,u=e(s,r)||{},Ai=!0,o&&ce()}),()=>{var p;for(var f of c){t.removeEventListener(f,An);var h=Wt.get(f);--h===0?(document.removeEventListener(f,An),Wt.delete(f)):Wt.set(f,h)}Ci.delete(d),s!==n&&((p=s.parentNode)==null||p.removeChild(s))}});return Ei.set(u,a),u}let Ei=new WeakMap;function sa(e,t){const n=Ei.get(e);return n?(Ei.delete(e),n(t)):Promise.resolve()}function Ee(e,t,[n,r]=[0,0]){var i=e,o=null,l=null,c=ve,d=n>0?dn:0,u=!1;const a=(f,h=!0)=>{u=!0,s(h,f)},s=(f,h)=>{c!==(c=f)&&(c?(o?Qo(o):h&&(o=on(()=>h(i))),l&&xn(l,()=>{l=null})):(l?Qo(l):h&&(l=on(()=>h(i,[n+1,r]))),o&&xn(o,()=>{o=null})))};Ln(()=>{u=!1,t(a),u||s(null,null)},d)}function Ud(e,t,n){var r=e,i=ve,o,l=In()?Gf:zr;Ln(()=>{l(i,i=t())&&(o&&xn(o),o=on(()=>n(r)))})}function Or(e,t,...n){var r=e,i=de,o;Ln(()=>{i!==(i=t())&&(o&&(wt(o),o=null),o=on(()=>i(r,...n)))},dn)}function Hu(e,t,n){var r=e,i,o;Ln(()=>{i!==(i=t())&&(o&&(xn(o),o=null),i&&(o=on(()=>n(r,i))))},dn)}function qn(e,t,n){Pn(()=>{var r=ct(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};eo(()=>{var l=n();Nu(l),i&&zr(o,l)&&(o=l,r.update(l))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Gu(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Gu(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Vd(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Gu(e))&&(r&&(r+=" "),r+=t);return r}function Mn(e){return typeof e=="object"?Vd(e):e??""}const ia=[...` 	
\r\f \v\uFEFF`];function Hd(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,l=0;(l=r.indexOf(i,l))>=0;){var c=l+o;(l===0||ia.includes(r[l-1]))&&(c===r.length||ia.includes(r[c]))?r=(l===0?"":r.substring(0,l))+r.substring(c+1):l=c}}return r===""?null:r}function oa(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function hs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Gd(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,l=0,c=!1,d=[];r&&d.push(...Object.keys(r).map(hs)),i&&d.push(...Object.keys(i).map(hs));var u=0,a=-1;const v=e.length;for(var s=0;s<v;s++){var f=e[s];if(c?f==="/"&&e[s-1]==="*"&&(c=!1):o?o===f&&(o=!1):f==="/"&&e[s+1]==="*"?c=!0:f==='"'||f==="'"?o=f:f==="("?l++:f===")"&&l--,!c&&o===!1&&l===0){if(f===":"&&a===-1)a=s;else if(f===";"||s===v-1){if(a!==-1){var h=hs(e.substring(u,a).trim());if(!d.includes(h)){f!==";"&&s++;var p=e.substring(u,s).trim();n+=" "+p+";"}}u=s+1,a=-1}}}}return r&&(n+=oa(r)),i&&(n+=oa(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function _t(e,t,n,r,i,o){var l=e.__className;if(l!==n||l===void 0){var c=Hd(n,r,o);c==null?e.removeAttribute("class"):t?e.className=c:e.setAttribute("class",c),e.__className=n}else if(o&&i!==o)for(var d in o){var u=!!o[d];(i==null||u!==!!i[d])&&e.classList.toggle(d,u)}return o}function ps(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function $e(e,t,n,r){var i=e.__style;if(i!==t){var o=Gd(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(ps(e,n==null?void 0:n[0],r[0]),ps(e,n==null?void 0:n[1],r[1],"important")):ps(e,n,r));return r}const yn=Symbol("class"),bn=Symbol("style"),Wu=Symbol("is custom element"),Ku=Symbol("is html");function WC(e,t){var n=ro(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Wd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function K(e,t,n,r){var i=ro(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Hf]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Xu(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Kd(e,t,n,r,i=!1){var o=ro(e),l=o[Wu],c=!o[Ku],d=t||{},u=e.tagName==="OPTION";for(var a in t)a in n||(n[a]=null);n.class?n.class=Mn(n.class):(r||n[yn])&&(n.class=null),n[bn]&&(n.style??(n.style=null));var s=Xu(e);for(const y in n){let b=n[y];if(u&&y==="value"&&b==null){e.value=e.__value="",d[y]=b;continue}if(y==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";_t(e,f,b,r,t==null?void 0:t[yn],n[yn]),d[y]=b,d[yn]=n[yn];continue}if(y==="style"){$e(e,b,t==null?void 0:t[bn],n[bn]),d[y]=b,d[bn]=n[bn];continue}var h=d[y];if(b!==h){d[y]=b;var p=y[0]+y[1];if(p!=="$$")if(p==="on"){const _={},C="$$"+y;let A=y.slice(2);var v=Id(A);if(Rd(A)&&(A=A.slice(0,-7),_.capture=!0),!v&&h){if(b!=null)continue;e.removeEventListener(A,d[C],_),d[C]=null}if(b!=null)if(v)e[`__${A}`]=b,Hr([A]);else{let w=function(F){d[y].call(this,F)};d[C]=zu(A,e,w,_)}else v&&(e[`__${A}`]=void 0)}else if(y==="style")K(e,y,b);else if(y==="autofocus")qd(e,!!b);else if(!l&&(y==="__value"||y==="value"&&b!=null))e.value=e.__value=b;else if(y==="selected"&&u)Wd(e,b);else{var g=y;c||(g=Ld(g));var m=g==="defaultValue"||g==="defaultChecked";if(b==null&&!l&&!m)if(o[y]=null,g==="value"||g==="checked"){let _=e;const C=t===void 0;if(g==="value"){let A=_.defaultValue;_.removeAttribute(g),_.defaultValue=A,_.value=_.__value=C?A:null}else{let A=_.defaultChecked;_.removeAttribute(g),_.defaultChecked=A,_.checked=C?A:!1}}else e.removeAttribute(y);else m||s.includes(g)&&(l||typeof b!="string")?e[g]=b:typeof b!="function"&&K(e,g,b)}}}return d}function ro(e){return e.__attributes??(e.__attributes={[Wu]:e.nodeName.includes("-"),[Ku]:e.namespaceURI===dd})}var aa=new Map;function Xu(e){var t=aa.get(e.nodeName);if(t)return t;aa.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=du(r);for(var o in n)n[o].set&&t.push(o);r=Gi(r)}return t}const Xd=()=>performance.now(),ot={tick:e=>requestAnimationFrame(e),now:()=>Xd(),tasks:new Set};function Zu(){const e=ot.now();ot.tasks.forEach(t=>{t.c(e)||(ot.tasks.delete(t),t.f())}),ot.tasks.size!==0&&ot.tick(Zu)}function Zd(e){let t;return ot.tasks.size===0&&ot.tick(Zu),{promise:new Promise(n=>{ot.tasks.add(t={c:e,f:n})}),abort(){ot.tasks.delete(t)}}}function Jn(e,t){no(()=>{e.dispatchEvent(new CustomEvent(t))})}function Yd(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ca(e){const t={},n=e.split(";");for(const r of n){const[i,o]=r.split(":");if(!i||o===void 0)break;const l=Yd(i.trim());t[l]=o.trim()}return t}const Jd=e=>e;function be(e,t,n,r){var i=(e&ad)!==0,o=(e&cd)!==0,l=i&&o,c=(e&ud)!==0,d=l?"both":i?"in":"out",u,a=t.inert,s=t.style.overflow,f,h;function p(){var b=z,_=V;Ne(null),rt(null);try{return u??(u=n()(t,(r==null?void 0:r())??{},{direction:d}))}finally{Ne(b),rt(_)}}var v={is_global:c,in(){var b;if(t.inert=a,!i){h==null||h.abort(),(b=h==null?void 0:h.reset)==null||b.call(h);return}o||f==null||f.abort(),Jn(t,"introstart"),f=Fi(t,p(),h,1,()=>{Jn(t,"introend"),f==null||f.abort(),f=u=void 0,t.style.overflow=s})},out(b){if(!o){b==null||b(),u=void 0;return}t.inert=!0,Jn(t,"outrostart"),h=Fi(t,p(),f,0,()=>{Jn(t,"outroend"),b==null||b()})},stop:()=>{f==null||f.abort(),h==null||h.abort()}},g=V;if((g.transitions??(g.transitions=[])).push(v),i&&Ai){var m=c;if(!m){for(var y=g.parent;y&&(y.f&dn)!==0;)for(;(y=y.parent)&&(y.f&Nr)===0;);m=!y||(y.f&pu)!==0}m&&Pn(()=>{ct(()=>v.in())})}}function Fi(e,t,n,r,i){var o=r===1;if(Jt(t)){var l,c=!1;return jr(()=>{if(!c){var g=t({direction:o?"in":"out"});l=Fi(e,g,n,r,i)}}),{abort:()=>{c=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return i(),{abort:de,deactivate:de,reset:de,t:()=>r};const{delay:d=0,css:u,tick:a,easing:s=Jd}=t;var f=[];if(o&&n===void 0&&(a&&a(0,1),u)){var h=ca(u(0,1));f.push(h,h)}var p=()=>1-r,v=e.animate(f,{duration:d});return v.onfinish=()=>{var g=(n==null?void 0:n.t())??1-r;n==null||n.abort();var m=r-g,y=t.duration*Math.abs(m),b=[];if(y>0){var _=!1;if(u)for(var C=Math.ceil(y/16.666666666666668),A=0;A<=C;A+=1){var w=g+m*s(A/C),F=ca(u(w,1-w));b.push(F),_||(_=F.overflow==="hidden")}_&&(e.style.overflow="hidden"),p=()=>{var S=v.currentTime;return g+m*s(S/y)},a&&Zd(()=>{if(v.playState!=="running")return!1;var S=p();return a(S,1-S),!0})}v=e.animate(b,{duration:y,fill:"forwards"}),v.onfinish=()=>{p=()=>r,a==null||a(r,1-r),i()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=de)},deactivate:()=>{i=de},reset:()=>{r===0&&(a==null||a(1,0))},t:()=>p()}}function ua(e,t){return e===t||(e==null?void 0:e[tt])===t}function gn(e={},t,n,r){return Pn(()=>{var i,o;return eo(()=>{i=o,o=(r==null?void 0:r())||[],ct(()=>{e!==n(...o)&&(t(e,...o),i&&ua(n(...i),e)&&t(null,...i))})}),()=>{jr(()=>{o&&ua(n(...o),e)&&t(null,...o)})}}),e}function zn(e=!1){const t=q,n=t.l.u;if(!n)return;let r=()=>Nu(t.s);if(e){let i=0,o={};const l=nn(()=>{let c=!1;const d=t.s;for(const u in d)d[u]!==o[u]&&(o[u]=d[u],c=!0);return c&&i++,i});r=()=>k(l)}n.b.length&&yd(()=>{la(t,r),Sn(n.b)}),nt(()=>{const i=ct(()=>n.m.map(jf));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&nt(()=>{la(t,r),Sn(n.a)})}function la(e,t){if(e.l.s)for(const n of e.l.s)k(n);t()}function so(e,t,n){if(e==null)return t(void 0),n&&n(void 0),de;const r=ct(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Kt=[];function Qd(e,t){return{subscribe:O(e,t).subscribe}}function O(e,t=de){let n=null;const r=new Set;function i(c){if(zr(e,c)&&(e=c,n)){const d=!Kt.length;for(const u of r)u[1](),Kt.push(u,e);if(d){for(let u=0;u<Kt.length;u+=2)Kt[u][0](Kt[u+1]);Kt.length=0}}}function o(c){i(c(e))}function l(c,d=de){const u=[c,d];return r.add(u),r.size===1&&(n=t(i,o)||de),c(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}function M(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return Qd(n,(l,c)=>{let d=!1;const u=[];let a=0,s=de;const f=()=>{if(a)return;s();const p=t(r?u[0]:u,l,c);o?l(p):s=typeof p=="function"?p:de},h=i.map((p,v)=>so(p,g=>{u[v]=g,a&=~(1<<v),d&&f()},()=>{a|=1<<v}));return d=!0,f(),function(){Sn(h),s(),d=!1}})}function E(e){let t;return so(e,n=>t=n)(),t}let Qn=!1,Si=Symbol();function W(e,t,n){const r=n[t]??(n[t]={store:null,source:Zi(void 0),unsubscribe:de});if(r.store!==e&&!(Si in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=de;else{var i=!0;r.unsubscribe=so(e,o=>{i?r.source.v=o:N(r.source,o)}),i=!1}return e&&Si in n?E(e):k(r.source)}function KC(e,t){return e.set(t),t}function ze(){const e={};function t(){Qi(()=>{for(var n in e)e[n].unsubscribe();fu(e,Si,{enumerable:!1,value:!0})})}return[e,t]}function XC(e,t,n){return e.set(n),t}function eh(e){var t=Qn;try{return Qn=!1,[e(),Qn]}finally{Qn=t}}const th={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function nh(e,t,n){return new Proxy({props:e,exclude:t},th)}const rh={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Jt(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Jt(i)&&(i=i());const o=bt(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Jt(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=bt(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===tt||t===vu)return!1;for(let n of e.props)if(Jt(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){Jt(n)&&(n=n());for(const r in n)t.includes(r)||t.push(r)}return t}};function ZC(...e){return new Proxy({props:e},rh)}function fa(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function we(e,t,n,r){var A;var i=(n&nd)!==0,o=!hn||(n&rd)!==0,l=(n&id)!==0,c=(n&od)!==0,d=!1,u;l?[u,d]=eh(()=>e[t]):u=e[t];var a=tt in e||vu in e,s=l&&(((A=bt(e,t))==null?void 0:A.set)??(a&&t in e&&(w=>e[t]=w)))||void 0,f=r,h=!0,p=!1,v=()=>(p=!0,h&&(h=!1,c?f=ct(r):f=r),f);u===void 0&&r!==void 0&&(s&&o&&Yf(),u=v(),s&&s(u));var g;if(o)g=()=>{var w=e[t];return w===void 0?v():(h=!0,p=!1,w)};else{var m=(i?nn:rn)(()=>e[t]);m.f|=Uf,g=()=>{var w=k(m);return w!==void 0&&(f=void 0),w===void 0?f:w}}if((n&sd)===0)return g;if(s){var y=e.$$legacy;return function(w,F){return arguments.length>0?((!o||!F||y||d)&&s(F?g():w),w):g()}}var b=!1,_=Zi(u),C=nn(()=>{var w=g(),F=k(_);return b?(b=!1,F):_.v=w});return l&&k(C),i||(C.equals=Wi),function(w,F){if(arguments.length>0){const S=F?k(C):o&&l?pt(w):w;if(!C.equals(S)){if(b=!0,N(_,S),p&&f!==void 0&&(f=S),fa(C))return w;ct(()=>k(C))}return w}return fa(C)?C.v:k(C)}}function lt(e){q===null&&Ki(),hn&&q.l!==null?sh(q).m.push(e):nt(()=>{const t=ct(e);if(typeof t=="function")return t})}function Yu(e){q===null&&Ki(),lt(()=>()=>ct(e))}function sh(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ih=()=>{const e=new Map;return Object.freeze({on:(i,o)=>{const l=e.get(i);l?l.push(o):e.set(i,[o])},off:(i,o)=>{const l=e.get(i);l&&e.set(i,l.filter(c=>c!==o))},emit:(i,o)=>{const l=e.get(i);l&&l.forEach(c=>c(o))}})},G=ih(),oh="data-smartsupp-id",yr=()=>window.top??window.parent,ne=()=>window.parent,Lt=()=>ne().document,YC=e=>e&&e.ownerDocument||document,ah=({vid:e})=>{const t=ne().smartsupp||{};t.vid=e,ne().smartsupp=t},ch="debug",uh=e=>{try{const t=ne().localStorage.getItem(ch);if(!t)return!1;if(t===e||t==="*")return!0;const n=e.match(/^\w+:/g);return n?t===`${n[0]}*`:!1}catch{return!1}},lh=(e,t)=>(n,...r)=>{uh(e)&&console.debug(`%c${e}`,`color: ${t};`,n,...r)},Be=lh("smartsupp:widget","#1233df"),fh=()=>{let e=null;const t=[];return Object.freeze({init:l=>{e=l,Be("widget options",l),t.forEach(c=>c(l))},getOptions:()=>{if(!e)throw new Error("Widget options not initialized");return e},awaitOptions:async()=>e||new Promise(l=>{t.push(l)}),updateOptions:l=>{e={...e,...l}}})},x=fh(),io=e=>{const n=e.document.getElementsByTagName("body")[0].getAttribute(oh);if(!n)throw new Error("Missing chat ID attribute on body element.");if(!e.parent.$smartsupp)throw new Error("Something went wrong. Seems like loader.js did not initialize widget.");if(!e.parent.$smartsupp.getWidget)throw new Error("Get widget function was not supplied by loader.js.");return e.parent.$smartsupp.getWidget(n)};/*! js-cookie v3.0.5 | MIT */function er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var dh={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ki(e,t){function n(i,o,l){if(!(typeof document>"u")){l=er({},t,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var d in l)l[d]&&(c+="; "+d,l[d]!==!0&&(c+="="+l[d].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+c}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],l={},c=0;c<o.length;c++){var d=o[c].split("="),u=d.slice(1).join("=");try{var a=decodeURIComponent(d[0]);if(l[a]=e.read(u,a),i===a)break}catch{}}return i?l[i]:l}}return Object.create({set:n,get:r,remove:function(i,o){n(i,"",er({},o,{expires:-1}))},withAttributes:function(i){return ki(this.converter,er({},this.attributes,i))},withConverter:function(i){return ki(er({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Mr=ki(dh,{path:"/"});const xi="ssupp",Ju=182,Qu=(e=Ju)=>({expires:e,domain:x.getOptions().cookieDomain,path:x.getOptions().cookiePath||"/",sameSite:"strict",secure:ne().location.protocol==="https:"}),oo=e=>`${x.getOptions().cookiePrefix||""}${xi}.${e}`,hh=({name:e,value:t,expirationInDays:n=Ju,options:r})=>{Mr.set(oo(e),t,{...Qu(n),...r})},ph=e=>Mr.get(oo(e)),gh=e=>{const t=oo(e);if(Mr.get(t)){const{path:r,domain:i}=Qu();Mr.remove(t,{path:r,domain:i})}},el=e=>(t,...n)=>{e(`[Smartsupp] ${t}`,...n)},X=el(console.warn),Ke=el(console.error),vh=()=>{const{key:e}=x.getOptions();return`${ne().SMARTSUPP_AUTOCREATE!==!1?xi:`${io(window).id}_${xi}`}_${e}`},Dr=e=>`${vh()}${e?`_${e}`:""}`,Wr=e=>{try{const t=window.localStorage.getItem(Dr(e))??"{}";return JSON.parse(t)}catch{return{}}},ao=(e,t)=>{try{window.localStorage.setItem(Dr(t),JSON.stringify(e))}catch(n){X("Set to local storage failed",n)}},mh=(e,t)=>{const r={...Wr(),[e]:String(t)};ao(r)},tl=e=>{const t=Wr();t[e]&&(delete t[e],ao(t))},yh=()=>{window.localStorage.removeItem(Dr()),window.localStorage.removeItem(Dr("cards"))};var j=(e=>(e.AnalyticsConsent="analyticsConsent",e.AuthForm="authForm",e.IsMessengerFrameExpanded="isMessengerFrameExpanded",e.IsMessengerFrameOpened="opened",e.MarketingConsent="marketingConsent",e.Message="message",e.PopupClosedAt="popupClosedAt",e.RatingText="ratingText",e.SoundsEnabled="enableSounds",e.VisitorId="vid",e.Visits="visits",e.TicketForm="ticketForm",e.SessionId="sessionId",e))(j||{});const Xe=e=>{let t="";return e===j.VisitorId&&x.getOptions().cookieDomain&&(t=ph(e)),t||Wr()[e]},ft=({name:e,value:t})=>{e===j.VisitorId&&x.getOptions().cookieDomain&&hh({name:e,value:t}),mh(e,t)},bh=e=>{tl(e)};G.on("analyticsConsentChanged",e=>{ft({name:j.AnalyticsConsent,value:String(e)})});G.on("marketingConsentChanged",e=>{ft({name:j.MarketingConsent,value:String(e)})});const co=()=>!!x.getOptions().consentModeEnabled,nl=()=>{const e=Xe(j.AnalyticsConsent)==="true";return!(co()&&!e)},rl=()=>{const e=Xe(j.MarketingConsent)==="true";return!(co()&&!e)};function sl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function il(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var gs,da;function _h(){if(da)return gs;da=1;var e="sessionAccessId-";function t(n){var r=void 0;return n&&n.id&&~n.id.indexOf(e)&&(r=n.id),r}return gs=t,gs}var vs,ha;function wh(){if(ha)return vs;ha=1;function e(i){if(Array.isArray(i)){for(var o=0,l=Array(i.length);o<i.length;o++)l[o]=i[o];return l}else return Array.from(i)}var t=_h(),n="sessionAccessId-";function r(){return n+Date.now()}return vs=function(o,l){l=l||document.body;var c=void 0,d={},u=[],a=!1,s=!0,f=void 0,h=!1,p=document.createElement("iframe");p.src=o,p.width=0,p.height=0,p.style.display="none",p.onload=function(){h=!0};function v(){l.appendChild(p),c=p.contentWindow,s=!1,window.addEventListener("message",g),A()}v();function g(w){var F=w.data,S=t(F);if(S==="sessionAccessId-connected"){a=!0;return}if(F.connectError){Object.keys(d).forEach(function(B){return d[B](F.error)}),d={};return}var D=d[S];S&&D&&D(F.error,F.data)}function m(){clearTimeout(f),window.removeEventListener("message",g),p.parentNode.removeChild(p),a=!1,s=!0}function y(w,F,S,D){s&&v(),!a&&w!=="connect"&&u.push([w,F,S,D]);var B=r();d&&typeof D=="function"&&(d[B]=D),h&&c.postMessage({method:w,key:F,value:S,id:B},o)}function b(w,F){if(!F)throw new Error("callback required for get");y("get",w,null,F)}function _(w,F,S){y("set",w,F,S)}function C(w,F){y("remove",w,null,F)}function A(){if(a){for(clearTimeout(f);u.length;)y.apply(void 0,e(u.pop()));return}y("connect"),f=setTimeout(A,125)}return{get:b,set:_,remove:C,close:m}},vs}var ms,pa;function Ch(){return pa||(pa=1,ms=wh()),ms}var Ah=Ch();const Eh=sl(Ah),Fh=()=>{const{storageUrl:e,key:t}=x.getOptions();if(!e)throw new Error("Storage url is missing");return`${e.replace(/{key}/g,t)}/index.html`},Sh=()=>{let e=null;return Object.freeze({getStorage:()=>{if(e)return e;try{const r=Fh();return e=Eh(r),Be("cross domain storage created",r),e}catch{throw new Error("Cross domain storage create failed")}},closeStorage:()=>{e&&(e.close(),Be("cross domain storage closed"))}})},uo=Sh(),kh=e=>{const t=uo.getStorage();return new Promise((n,r)=>{t.get(e,(i,o)=>i?r(i):(Be("get from cross domain storage",e,o),n(o)))})},xh=(e,t)=>{const n=uo.getStorage();return new Promise((r,i)=>{n.set(e,t,o=>o?i(o):(Be("set to cross domain storage",e,t),r()))})},Th=()=>{uo.closeStorage()},ol=()=>!!x.getOptions().crossDomainEnabled,Oh=async()=>ol()?kh(j.VisitorId):Xe(j.VisitorId)||null,Mh=async e=>ol()?xh(j.VisitorId,String(e)):ft({name:j.VisitorId,value:String(e)}),Dh=()=>{if(rl())return Xe(j.Visits)?Number(Xe(j.Visits)):0},Rh=e=>{rl()&&ft({name:j.Visits,value:String(e)})};G.on("marketingConsentChanged",e=>{e||bh(j.Visits)});const al=(e,t,n)=>{const{set:r,subscribe:i}=O(t,l=>{const c=Xe(e);c&&l(n?n(c):c)}),o=l=>{ft({name:e,value:String(l)})};return{set:l=>{o(l),r(l)},subscribe:i}},Bh=()=>"ontouchstart"in window||navigator.msMaxTouchPoints>0,Ih=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Ph=450,Lh=500,Kr=O(null),$h=O({width:ne().innerWidth,height:ne().innerHeight}),st=M([Kr,$h],([e,t])=>{const{widgetBlockingOptions:n}=x.getOptions();if(n!=null&&n.enforceDesktopMode)return!1;if(e){const{isMobile:r,isTablet:i}=e;if(i)return!1;if(r)return!0}return t.width<Ph||t.height<Lh}),cl=M([st],([e])=>{const{fullScreenEnabled:t}=x.getOptions();return!!(e||t)}),Nh=M([Kr],([e])=>!!(e!=null&&e.isDesktop)&&!Ih());M([Kr],([e])=>!!(e!=null&&e.isTablet));const qh=()=>{const e=O({}),{subscribe:t,update:n}=e;return{subscribe:t,add:l=>{n(c=>({...c,[l.id]:l}))},remove:l=>{n(c=>{const{[l]:d,...u}=c;return u})},find:l=>E(e)[l]||null}},Rr=qh(),JC=M([Rr],([e])=>Object.values(e)),lo=e=>(t,n=3e3)=>{const r=`fm-${e}-${t}`,i=Rr.find(r);let o=1;i&&(clearTimeout(i.timeout),o=i.recurrence+1);let l;return n>0&&(l=window.setTimeout(()=>{ga(r)},n)),Rr.add({id:r,type:e,text:t,timeout:l,recurrence:o}),()=>ga(r)},ga=e=>{Rr.remove(e)},QC=lo("success"),zt=lo("error"),Qt=lo("warning");var ul=(e=>(e[e.Good=5]="Good",e[e.Normal=3]="Normal",e[e.Bad=1]="Bad",e))(ul||{});const zh={5:{value:5,text:"agentRating.good.formText",name:"good"},3:{value:3,text:"agentRating.normal.formText",name:"neutral"},1:{value:1,text:"agentRating.bad.formText",name:"bad"}},eA=Object.values(zh).sort((e,t)=>t.value-e.value),Xr="rate_form_id",va={id:Xr,type:"message",subType:"system",channel:{type:"default",id:null},chatId:"",visitorId:"",groupId:null,agentId:null,trigger:null,createdAt:"",content:{type:"rate_form",data:{}},attachments:[],widgetOptions:{disableInput:!1,disableAuthentication:!1,disableAttachments:!1}},ll=O(null);var Tt={},xe={},pe={},ue={},tr={exports:{}},ys,ma;function jh(){if(ma)return ys;ma=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,o=r*365.25;ys=function(a,s){s=s||{};var f=typeof a;if(f==="string"&&a.length>0)return l(a);if(f==="number"&&isFinite(a))return s.long?d(a):c(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function l(a){if(a=String(a),!(a.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(s){var f=parseFloat(s[1]),h=(s[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*o;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function c(a){var s=Math.abs(a);return s>=r?Math.round(a/r)+"d":s>=n?Math.round(a/n)+"h":s>=t?Math.round(a/t)+"m":s>=e?Math.round(a/e)+"s":a+"ms"}function d(a){var s=Math.abs(a);return s>=r?u(a,s,r,"day"):s>=n?u(a,s,n,"hour"):s>=t?u(a,s,t,"minute"):s>=e?u(a,s,e,"second"):a+" ms"}function u(a,s,f,h){var p=s>=f*1.5;return Math.round(a/f)+" "+h+(p?"s":"")}return ys}var bs,ya;function Uh(){if(ya)return bs;ya=1;function e(t){r.debug=r,r.default=r,r.coerce=u,r.disable=l,r.enable=o,r.enabled=c,r.humanize=jh(),r.destroy=a,Object.keys(t).forEach(s=>{r[s]=t[s]}),r.names=[],r.skips=[],r.formatters={};function n(s){let f=0;for(let h=0;h<s.length;h++)f=(f<<5)-f+s.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(s){let f,h=null,p,v;function g(...m){if(!g.enabled)return;const y=g,b=Number(new Date),_=b-(f||b);y.diff=_,y.prev=f,y.curr=b,f=b,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let C=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(w,F)=>{if(w==="%%")return"%";C++;const S=r.formatters[F];if(typeof S=="function"){const D=m[C];w=S.call(y,D),m.splice(C,1),C--}return w}),r.formatArgs.call(y,m),(y.log||r.log).apply(y,m)}return g.namespace=s,g.useColors=r.useColors(),g.color=r.selectColor(s),g.extend=i,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,v=r.enabled(s)),v),set:m=>{h=m}}),typeof r.init=="function"&&r.init(g),g}function i(s,f){const h=r(this.namespace+(typeof f>"u"?":":f)+s);return h.log=this.log,h}function o(s){r.save(s),r.namespaces=s,r.names=[],r.skips=[];let f;const h=(typeof s=="string"?s:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(s=h[f].replace(/\*/g,".*?"),s[0]==="-"?r.skips.push(new RegExp("^"+s.slice(1)+"$")):r.names.push(new RegExp("^"+s+"$")))}function l(){const s=[...r.names.map(d),...r.skips.map(d).map(f=>"-"+f)].join(",");return r.enable(""),s}function c(s){if(s[s.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(s))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(s))return!0;return!1}function d(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}function u(s){return s instanceof Error?s.stack||s.message:s}function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return bs=e,bs}var ba;function Vh(){return ba||(ba=1,function(e,t){var n={};t.formatArgs=i,t.save=o,t.load=l,t.useColors=r,t.storage=c(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;u.splice(1,0,a,"color: inherit");let s=0,f=0;u[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(s++,h==="%c"&&(f=s))}),u.splice(f,0,a)}t.log=console.debug||console.log||(()=>{});function o(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function l(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}function c(){try{return localStorage}catch{}}e.exports=Uh()(t);const{formatters:d}=e.exports;d.j=function(u){try{return JSON.stringify(u)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}}(tr,tr.exports)),tr.exports}var _a;function an(){if(_a)return ue;_a=1;var e=ue&&ue.__extends||function(){var c=function(d,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(a[f]=s[f])},c(d,u)};return function(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");c(d,u);function a(){this.constructor=d}d.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(ue,"__esModule",{value:!0}),ue.createEmitter=ue.createCallback=ue.bound=ue.createSocketError=ue.SocketError=ue.debug=void 0,ue.debug=t();function t(){try{return Vh()("smartsupp:client")}catch{return function(){}}}var n=function(c){e(d,c);function d(u,a){var s=c.call(this,u)||this;return Object.setPrototypeOf(s,d.prototype),s.name=s.constructor.name,s.code=a.code,s.type=a.type,s.event=a.event,a&&a.stack&&(s.stack="".concat(s.stack,`
Caused By: `).concat(a.stack)),s}return d}(Error);ue.SocketError=n;function r(c){return new n(c.message,c)}ue.createSocketError=r;function i(c,d){return function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];c[d].apply(c,u)}}ue.bound=i;function o(c,d){return function(u,a){u?d(r(u)):c(a)}}ue.createCallback=o;function l(c,d){return function(u){c.emit(d,u)}}return ue.createEmitter=l,ue}var _s={exports:{}},wa;function fl(){return wa||(wa=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,u,a){this.fn=d,this.context=u,this.once=a||!1}function o(d,u,a,s,f){if(typeof a!="function")throw new TypeError("The listener must be a function");var h=new i(a,s||d,f),p=n?n+u:u;return d._events[p]?d._events[p].fn?d._events[p]=[d._events[p],h]:d._events[p].push(h):(d._events[p]=h,d._eventsCount++),d}function l(d,u){--d._eventsCount===0?d._events=new r:delete d._events[u]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],a,s;if(this._eventsCount===0)return u;for(s in a=this._events)t.call(a,s)&&u.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(a)):u},c.prototype.listeners=function(u){var a=n?n+u:u,s=this._events[a];if(!s)return[];if(s.fn)return[s.fn];for(var f=0,h=s.length,p=new Array(h);f<h;f++)p[f]=s[f].fn;return p},c.prototype.listenerCount=function(u){var a=n?n+u:u,s=this._events[a];return s?s.fn?1:s.length:0},c.prototype.emit=function(u,a,s,f,h,p){var v=n?n+u:u;if(!this._events[v])return!1;var g=this._events[v],m=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,a),!0;case 3:return g.fn.call(g.context,a,s),!0;case 4:return g.fn.call(g.context,a,s,f),!0;case 5:return g.fn.call(g.context,a,s,f,h),!0;case 6:return g.fn.call(g.context,a,s,f,h,p),!0}for(b=1,y=new Array(m-1);b<m;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var _=g.length,C;for(b=0;b<_;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),m){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,a);break;case 3:g[b].fn.call(g[b].context,a,s);break;case 4:g[b].fn.call(g[b].context,a,s,f);break;default:if(!y)for(C=1,y=new Array(m-1);C<m;C++)y[C-1]=arguments[C];g[b].fn.apply(g[b].context,y)}}return!0},c.prototype.on=function(u,a,s){return o(this,u,a,s,!1)},c.prototype.once=function(u,a,s){return o(this,u,a,s,!0)},c.prototype.removeListener=function(u,a,s,f){var h=n?n+u:u;if(!this._events[h])return this;if(!a)return l(this,h),this;var p=this._events[h];if(p.fn)p.fn===a&&(!f||p.once)&&(!s||p.context===s)&&l(this,h);else{for(var v=0,g=[],m=p.length;v<m;v++)(p[v].fn!==a||f&&!p[v].once||s&&p[v].context!==s)&&g.push(p[v]);g.length?this._events[h]=g.length===1?g[0]:g:l(this,h)}return this},c.prototype.removeAllListeners=function(u){var a;return u?(a=n?n+u:u,this._events[a]&&l(this,a)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c}(_s)),_s.exports}var nr={exports:{}},ws,Ca;function Hh(){if(Ca)return ws;Ca=1;var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];return ws=function(r){var i=r,o=r.indexOf("["),l=r.indexOf("]");o!=-1&&l!=-1&&(r=r.substring(0,o)+r.substring(o,l).replace(/:/g,";")+r.substring(l,r.length));for(var c=e.exec(r||""),d={},u=14;u--;)d[t[u]]=c[u]||"";return o!=-1&&l!=-1&&(d.source=i,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d},ws}var rr={exports:{}},Cs,Aa;function Gh(){if(Aa)return Cs;Aa=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,o=r*365.25;Cs=function(a,s){s=s||{};var f=typeof a;if(f==="string"&&a.length>0)return l(a);if(f==="number"&&isFinite(a))return s.long?d(a):c(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function l(a){if(a=String(a),!(a.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(s){var f=parseFloat(s[1]),h=(s[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*o;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function c(a){var s=Math.abs(a);return s>=r?Math.round(a/r)+"d":s>=n?Math.round(a/n)+"h":s>=t?Math.round(a/t)+"m":s>=e?Math.round(a/e)+"s":a+"ms"}function d(a){var s=Math.abs(a);return s>=r?u(a,s,r,"day"):s>=n?u(a,s,n,"hour"):s>=t?u(a,s,t,"minute"):s>=e?u(a,s,e,"second"):a+" ms"}function u(a,s,f,h){var p=s>=f*1.5;return Math.round(a/f)+" "+h+(p?"s":"")}return Cs}var As,Ea;function Wh(){if(Ea)return As;Ea=1;function e(t){r.debug=r,r.default=r,r.coerce=a,r.disable=c,r.enable=l,r.enabled=d,r.humanize=Gh(),Object.keys(t).forEach(s=>{r[s]=t[s]}),r.instances=[],r.names=[],r.skips=[],r.formatters={};function n(s){let f=0;for(let h=0;h<s.length;h++)f=(f<<5)-f+s.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(s){let f;function h(...p){if(!h.enabled)return;const v=h,g=Number(new Date),m=g-(f||g);v.diff=m,v.prev=f,v.curr=g,f=g,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let y=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(_,C)=>{if(_==="%%")return _;y++;const A=r.formatters[C];if(typeof A=="function"){const w=p[y];_=A.call(v,w),p.splice(y,1),y--}return _}),r.formatArgs.call(v,p),(v.log||r.log).apply(v,p)}return h.namespace=s,h.enabled=r.enabled(s),h.useColors=r.useColors(),h.color=n(s),h.destroy=i,h.extend=o,typeof r.init=="function"&&r.init(h),r.instances.push(h),h}function i(){const s=r.instances.indexOf(this);return s!==-1?(r.instances.splice(s,1),!0):!1}function o(s,f){const h=r(this.namespace+(typeof f>"u"?":":f)+s);return h.log=this.log,h}function l(s){r.save(s),r.names=[],r.skips=[];let f;const h=(typeof s=="string"?s:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(s=h[f].replace(/\*/g,".*?"),s[0]==="-"?r.skips.push(new RegExp("^"+s.substr(1)+"$")):r.names.push(new RegExp("^"+s+"$")));for(f=0;f<r.instances.length;f++){const v=r.instances[f];v.enabled=r.enabled(v.namespace)}}function c(){const s=[...r.names.map(u),...r.skips.map(u).map(f=>"-"+f)].join(",");return r.enable(""),s}function d(s){if(s[s.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(s))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(s))return!0;return!1}function u(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}function a(s){return s instanceof Error?s.stack||s.message:s}return r.enable(r.load()),r}return As=e,As}var Fa;function Zr(){return Fa||(Fa=1,function(e,t){var n={};t.log=o,t.formatArgs=i,t.save=l,t.load=c,t.useColors=r,t.storage=d(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;a.splice(1,0,s,"color: inherit");let f=0,h=0;a[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(f++,p==="%c"&&(h=f))}),a.splice(h,0,s)}function o(...a){return typeof console=="object"&&console.log&&console.log(...a)}function l(a){try{a?t.storage.setItem("debug",a):t.storage.removeItem("debug")}catch{}}function c(){let a;try{a=t.storage.getItem("debug")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=n.DEBUG),a}function d(){try{return localStorage}catch{}}e.exports=Wh()(t);const{formatters:u}=e.exports;u.j=function(a){try{return JSON.stringify(a)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}(rr,rr.exports)),rr.exports}var Es,Sa;function Kh(){if(Sa)return Es;Sa=1;var e=Hh(),t=Zr()("socket.io-client:url");Es=n;function n(r,i){var o=r;i=i||typeof location<"u"&&location,r==null&&(r=i.protocol+"//"+i.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=i.protocol+r:r=i.host+r),/^(https?|wss?):\/\//.test(r)||(t("protocol-less url %s",r),typeof i<"u"?r=i.protocol+"//"+r:r="https://"+r),t("parse %s",r),o=e(r)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var l=o.host.indexOf(":")!==-1,c=l?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+c+":"+o.port,o.href=o.protocol+"://"+c+(i&&i.port===o.port?"":":"+o.port),o}return Es}var Fs={},sr={exports:{}},ir={exports:{}},Ss,ka;function Xh(){if(ka)return Ss;ka=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*365.25;Ss=function(u,a){a=a||{};var s=typeof u;if(s==="string"&&u.length>0)return o(u);if(s==="number"&&isNaN(u)===!1)return a.long?c(u):l(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(a){var s=parseFloat(a[1]),f=(a[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return s*i;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*t;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function l(u){return u>=r?Math.round(u/r)+"d":u>=n?Math.round(u/n)+"h":u>=t?Math.round(u/t)+"m":u>=e?Math.round(u/e)+"s":u+"ms"}function c(u){return d(u,r,"day")||d(u,n,"hour")||d(u,t,"minute")||d(u,e,"second")||u+" ms"}function d(u,a,s){if(!(u<a))return u<a*1.5?Math.floor(u/a)+" "+s:Math.ceil(u/a)+" "+s+"s"}return Ss}var xa;function Zh(){return xa||(xa=1,function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=d,t.disable=l,t.enable=o,t.enabled=c,t.humanize=Xh(),t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(u){var a=0,s;for(s in u)a=(a<<5)-a+u.charCodeAt(s),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function r(u){var a;function s(){if(s.enabled){var f=s,h=+new Date,p=h-(a||h);f.diff=p,f.prev=a,f.curr=h,a=h;for(var v=new Array(arguments.length),g=0;g<v.length;g++)v[g]=arguments[g];v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");var m=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;m++;var C=t.formatters[_];if(typeof C=="function"){var A=v[m];b=C.call(f,A),v.splice(m,1),m--}return b}),t.formatArgs.call(f,v);var y=s.log||t.log||console.log.bind(console);y.apply(f,v)}}return s.namespace=u,s.enabled=t.enabled(u),s.useColors=t.useColors(),s.color=n(u),s.destroy=i,typeof t.init=="function"&&t.init(s),t.instances.push(s),s}function i(){var u=t.instances.indexOf(this);return u!==-1?(t.instances.splice(u,1),!0):!1}function o(u){t.save(u),t.names=[],t.skips=[];var a,s=(typeof u=="string"?u:"").split(/[\s,]+/),f=s.length;for(a=0;a<f;a++)s[a]&&(u=s[a].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")));for(a=0;a<t.instances.length;a++){var h=t.instances[a];h.enabled=t.enabled(h.namespace)}}function l(){t.enable("")}function c(u){if(u[u.length-1]==="*")return!0;var a,s;for(a=0,s=t.skips.length;a<s;a++)if(t.skips[a].test(u))return!1;for(a=0,s=t.names.length;a<s;a++)if(t.names[a].test(u))return!0;return!1}function d(u){return u instanceof Error?u.stack||u.message:u}}(ir,ir.exports)),ir.exports}var Ta;function jn(){return Ta||(Ta=1,function(e,t){var n={};t=e.exports=Zh(),t.log=o,t.formatArgs=i,t.save=l,t.load=c,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:d(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(u){try{return JSON.stringify(u)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function i(u){var a=this.useColors;if(u[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+u[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var s="color: "+this.color;u.splice(1,0,s,"color: inherit");var f=0,h=0;u[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(f++,p==="%c"&&(h=f))}),u.splice(h,0,s)}}function o(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(u){try{u==null?t.storage.removeItem("debug"):t.storage.debug=u}catch{}}function c(){var u;try{u=t.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}t.enable(c());function d(){try{return window.localStorage}catch{}}}(sr,sr.exports)),sr.exports}var ks={exports:{}},Oa;function Yr(){return Oa||(Oa=1,function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var i in t.prototype)r[i]=t.prototype[i];return r}t.prototype.on=t.prototype.addEventListener=function(r,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(i),this},t.prototype.once=function(r,i){function o(){this.off(r,o),i.apply(this,arguments)}return o.fn=i,this.on(r,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+r];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var l,c=0;c<o.length;c++)if(l=o[c],l===i||l.fn===i){o.splice(c,1);break}return o.length===0&&delete this._callbacks["$"+r],this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),o=this._callbacks["$"+r],l=1;l<arguments.length;l++)i[l-1]=arguments[l];if(o){o=o.slice(0);for(var l=0,c=o.length;l<c;++l)o[l].apply(this,i)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}}(ks)),ks.exports}var _n={},xs,Ma;function fo(){if(Ma)return xs;Ma=1;var e={}.toString;return xs=Array.isArray||function(t){return e.call(t)=="[object Array]"},xs}var Ts,Da;function dl(){if(Da)return Ts;Da=1,Ts=r;var e=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",t=typeof ArrayBuffer=="function",n=function(i){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer};function r(i){return e&&Buffer.isBuffer(i)||t&&(i instanceof ArrayBuffer||n(i))}return Ts}var Ra;function Yh(){if(Ra)return _n;Ra=1;var e=fo(),t=dl(),n=Object.prototype.toString,r=typeof Blob=="function"||typeof Blob<"u"&&n.call(Blob)==="[object BlobConstructor]",i=typeof File=="function"||typeof File<"u"&&n.call(File)==="[object FileConstructor]";_n.deconstructPacket=function(c){var d=[],u=c.data,a=c;return a.data=o(u,d),a.attachments=d.length,{packet:a,buffers:d}};function o(c,d){if(!c)return c;if(t(c)){var u={_placeholder:!0,num:d.length};return d.push(c),u}else if(e(c)){for(var a=new Array(c.length),s=0;s<c.length;s++)a[s]=o(c[s],d);return a}else if(typeof c=="object"&&!(c instanceof Date)){var a={};for(var f in c)a[f]=o(c[f],d);return a}return c}_n.reconstructPacket=function(c,d){return c.data=l(c.data,d),c.attachments=void 0,c};function l(c,d){if(!c)return c;if(c&&c._placeholder===!0){var u=typeof c.num=="number"&&c.num>=0&&c.num<d.length;if(u)return d[c.num];throw new Error("illegal attachments")}else if(e(c))for(var a=0;a<c.length;a++)c[a]=l(c[a],d);else if(typeof c=="object")for(var s in c)c[s]=l(c[s],d);return c}return _n.removeBlobs=function(c,d){function u(f,h,p){if(!f)return f;if(r&&f instanceof Blob||i&&f instanceof File){a++;var v=new FileReader;v.onload=function(){p?p[h]=this.result:s=this.result,--a||d(s)},v.readAsArrayBuffer(f)}else if(e(f))for(var g=0;g<f.length;g++)u(f[g],g,f);else if(typeof f=="object"&&!t(f))for(var m in f)u(f[m],m,f)}var a=0,s=c;u(s),a||d(s)},_n}var Ba;function ho(){return Ba||(Ba=1,function(e){var t=jn()("socket.io-parser"),n=Yr(),r=Yh(),i=fo(),o=dl();e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=l,e.Decoder=s;function l(){}var c=e.ERROR+'"encode error"';l.prototype.encode=function(g,m){if(t("encoding packet %j",g),e.BINARY_EVENT===g.type||e.BINARY_ACK===g.type)a(g,m);else{var y=d(g);m([y])}};function d(g){var m=""+g.type;if((e.BINARY_EVENT===g.type||e.BINARY_ACK===g.type)&&(m+=g.attachments+"-"),g.nsp&&g.nsp!=="/"&&(m+=g.nsp+","),g.id!=null&&(m+=g.id),g.data!=null){var y=u(g.data);if(y!==!1)m+=y;else return c}return t("encoded %j as %s",g,m),m}function u(g){try{return JSON.stringify(g)}catch{return!1}}function a(g,m){function y(b){var _=r.deconstructPacket(b),C=d(_.packet),A=_.buffers;A.unshift(C),m(A)}r.removeBlobs(g,y)}function s(){this.reconstructor=null}n(s.prototype),s.prototype.add=function(g){var m;if(typeof g=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");m=f(g),e.BINARY_EVENT===m.type||e.BINARY_ACK===m.type?(this.reconstructor=new p(m),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",m)):this.emit("decoded",m)}else if(o(g)||g.base64)if(this.reconstructor)m=this.reconstructor.takeBinaryData(g),m&&(this.reconstructor=null,this.emit("decoded",m));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+g)};function f(g){var m=0,y={type:Number(g.charAt(0))};if(e.types[y.type]==null)return v("unknown packet type "+y.type);if(e.BINARY_EVENT===y.type||e.BINARY_ACK===y.type){for(var b=m+1;g.charAt(++m)!=="-"&&m!=g.length;);var _=g.substring(b,m);if(_!=Number(_)||g.charAt(m)!=="-")throw new Error("Illegal attachments");y.attachments=Number(_)}if(g.charAt(m+1)==="/"){for(var b=m+1;++m;){var C=g.charAt(m);if(C===","||m===g.length)break}y.nsp=g.substring(b,m)}else y.nsp="/";var A=g.charAt(m+1);if(A!==""&&Number(A)==A){for(var b=m+1;++m;){var C=g.charAt(m);if(C==null||Number(C)!=C){--m;break}if(m===g.length)break}y.id=Number(g.substring(b,m+1))}if(g.charAt(++m)){var w=h(g.substr(m)),F=w!==!1&&(y.type===e.ERROR||i(w));if(F)y.data=w;else return v("invalid payload")}return t("decoded %s as %j",g,y),y}function h(g){try{return JSON.parse(g)}catch{return!1}}s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function p(g){this.reconPack=g,this.buffers=[]}p.prototype.takeBinaryData=function(g){if(this.buffers.push(g),this.buffers.length===this.reconPack.attachments){var m=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),m}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function v(g){return{type:e.ERROR,data:"parser error: "+g}}}(Fs)),Fs}var or={exports:{}},ar={},cr={exports:{}},Ia;function Jh(){if(Ia)return cr.exports;Ia=1;try{cr.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{cr.exports=!1}return cr.exports}var Os,Pa;function po(){return Pa||(Pa=1,Os=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}()),Os}var Ms,La;function go(){if(La)return Ms;La=1;var e=Jh(),t=po();return Ms=function(n){var r=n.xdomain,i=n.xscheme,o=n.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!r||e))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!i&&o)return new XDomainRequest}catch{}if(!r)try{return new t[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},Ms}var ur={exports:{}},Ds={},Rs,$a;function Qh(){return $a||($a=1,Rs=Object.keys||function(t){var n=[],r=Object.prototype.hasOwnProperty;for(var i in t)r.call(t,i)&&n.push(i);return n}),Rs}var Bs,Na;function hl(){if(Na)return Bs;Na=1;var e=fo(),t=Object.prototype.toString,n=typeof Blob=="function"||typeof Blob<"u"&&t.call(Blob)==="[object BlobConstructor]",r=typeof File=="function"||typeof File<"u"&&t.call(File)==="[object FileConstructor]";Bs=i;function i(o){if(!o||typeof o!="object")return!1;if(e(o)){for(var l=0,c=o.length;l<c;l++)if(i(o[l]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(o)||typeof ArrayBuffer=="function"&&o instanceof ArrayBuffer||n&&o instanceof Blob||r&&o instanceof File)return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return i(o.toJSON(),!0);for(var d in o)if(Object.prototype.hasOwnProperty.call(o,d)&&i(o[d]))return!0;return!1}return Bs}var Is,qa;function ep(){return qa||(qa=1,Is=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||r===0)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),l=t,c=0;l<n;l++,c++)o[c]=i[l];return o.buffer}),Is}var Ps,za;function tp(){if(za)return Ps;za=1,Ps=e;function e(n,r,i){var o=!1;return i=i||t,l.count=n,n===0?r():l;function l(c,d){if(l.count<=0)throw new Error("after called too many times");--l.count,c?(o=!0,r(c),r=i):l.count===0&&!o&&r(null,d)}}function t(){}return Ps}/*! https://mths.be/utf8js v2.1.2 by @mathias */var Ls,ja;function np(){if(ja)return Ls;ja=1;var e=String.fromCharCode;function t(h){for(var p=[],v=0,g=h.length,m,y;v<g;)m=h.charCodeAt(v++),m>=55296&&m<=56319&&v<g?(y=h.charCodeAt(v++),(y&64512)==56320?p.push(((m&1023)<<10)+(y&1023)+65536):(p.push(m),v--)):p.push(m);return p}function n(h){for(var p=h.length,v=-1,g,m="";++v<p;)g=h[v],g>65535&&(g-=65536,m+=e(g>>>10&1023|55296),g=56320|g&1023),m+=e(g);return m}function r(h,p){if(h>=55296&&h<=57343){if(p)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function i(h,p){return e(h>>p&63|128)}function o(h,p){if((h&4294967168)==0)return e(h);var v="";return(h&4294965248)==0?v=e(h>>6&31|192):(h&4294901760)==0?(r(h,p)||(h=65533),v=e(h>>12&15|224),v+=i(h,6)):(h&4292870144)==0&&(v=e(h>>18&7|240),v+=i(h,12),v+=i(h,6)),v+=e(h&63|128),v}function l(h,p){p=p||{};for(var v=p.strict!==!1,g=t(h),m=g.length,y=-1,b,_="";++y<m;)b=g[y],_+=o(b,v);return _}function c(){if(s>=a)throw Error("Invalid byte index");var h=u[s]&255;if(s++,(h&192)==128)return h&63;throw Error("Invalid continuation byte")}function d(h){var p,v,g,m,y;if(s>a)throw Error("Invalid byte index");if(s==a)return!1;if(p=u[s]&255,s++,(p&128)==0)return p;if((p&224)==192){if(v=c(),y=(p&31)<<6|v,y>=128)return y;throw Error("Invalid continuation byte")}if((p&240)==224){if(v=c(),g=c(),y=(p&15)<<12|v<<6|g,y>=2048)return r(y,h)?y:65533;throw Error("Invalid continuation byte")}if((p&248)==240&&(v=c(),g=c(),m=c(),y=(p&7)<<18|v<<12|g<<6|m,y>=65536&&y<=1114111))return y;throw Error("Invalid UTF-8 detected")}var u,a,s;function f(h,p){p=p||{};var v=p.strict!==!1;u=t(h),a=u.length,s=0;for(var g=[],m;(m=d(v))!==!1;)g.push(m);return n(g)}return Ls={version:"2.1.2",encode:l,decode:f},Ls}var lr={},Ua;function rp(){return Ua||(Ua=1,function(e){lr.encode=function(t){var n=new Uint8Array(t),r,i=n.length,o="";for(r=0;r<i;r+=3)o+=e[n[r]>>2],o+=e[(n[r]&3)<<4|n[r+1]>>4],o+=e[(n[r+1]&15)<<2|n[r+2]>>6],o+=e[n[r+2]&63];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},lr.decode=function(t){var n=t.length*.75,r=t.length,i,o=0,l,c,d,u;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);var a=new ArrayBuffer(n),s=new Uint8Array(a);for(i=0;i<r;i+=4)l=e.indexOf(t[i]),c=e.indexOf(t[i+1]),d=e.indexOf(t[i+2]),u=e.indexOf(t[i+3]),s[o++]=l<<2|c>>4,s[o++]=(c&15)<<4|d>>2,s[o++]=(d&3)<<6|u&63;return a}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),lr}var $s,Va;function sp(){if(Va)return $s;Va=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var c=new Blob(["hi"]);return c.size===2}catch{return!1}}(),n=t&&function(){try{var c=new Blob([new Uint8Array([1,2])]);return c.size===2}catch{return!1}}(),r=e&&e.prototype.append&&e.prototype.getBlob;function i(c){return c.map(function(d){if(d.buffer instanceof ArrayBuffer){var u=d.buffer;if(d.byteLength!==u.byteLength){var a=new Uint8Array(d.byteLength);a.set(new Uint8Array(u,d.byteOffset,d.byteLength)),u=a.buffer}return u}return d})}function o(c,d){d=d||{};var u=new e;return i(c).forEach(function(a){u.append(a)}),d.type?u.getBlob(d.type):u.getBlob()}function l(c,d){return new Blob(i(c),d||{})}return typeof Blob<"u"&&(o.prototype=Blob.prototype,l.prototype=Blob.prototype),$s=function(){return t?n?Blob:l:r?o:void 0}(),$s}var Ha;function cn(){return Ha||(Ha=1,function(e){var t=Qh(),n=hl(),r=ep(),i=tp(),o=np(),l;typeof ArrayBuffer<"u"&&(l=rp());var c=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),d=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),u=c||d;e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=t(a),f={type:"error",data:"parser error"},h=sp();e.encodePacket=function(_,C,A,w){typeof C=="function"&&(w=C,C=!1),typeof A=="function"&&(w=A,A=null);var F=_.data===void 0?void 0:_.data.buffer||_.data;if(typeof ArrayBuffer<"u"&&F instanceof ArrayBuffer)return v(_,C,w);if(typeof h<"u"&&F instanceof h)return m(_,C,w);if(F&&F.base64)return p(_,w);var S=a[_.type];return _.data!==void 0&&(S+=A?o.encode(String(_.data),{strict:!1}):String(_.data)),w(""+S)};function p(_,C){var A="b"+e.packets[_.type]+_.data.data;return C(A)}function v(_,C,A){if(!C)return e.encodeBase64Packet(_,A);var w=_.data,F=new Uint8Array(w),S=new Uint8Array(1+w.byteLength);S[0]=a[_.type];for(var D=0;D<F.length;D++)S[D+1]=F[D];return A(S.buffer)}function g(_,C,A){if(!C)return e.encodeBase64Packet(_,A);var w=new FileReader;return w.onload=function(){e.encodePacket({type:_.type,data:w.result},C,!0,A)},w.readAsArrayBuffer(_.data)}function m(_,C,A){if(!C)return e.encodeBase64Packet(_,A);if(u)return g(_,C,A);var w=new Uint8Array(1);w[0]=a[_.type];var F=new h([w.buffer,_.data]);return A(F)}e.encodeBase64Packet=function(_,C){var A="b"+e.packets[_.type];if(typeof h<"u"&&_.data instanceof h){var w=new FileReader;return w.onload=function(){var P=w.result.split(",")[1];C(A+P)},w.readAsDataURL(_.data)}var F;try{F=String.fromCharCode.apply(null,new Uint8Array(_.data))}catch{for(var S=new Uint8Array(_.data),D=new Array(S.length),B=0;B<S.length;B++)D[B]=S[B];F=String.fromCharCode.apply(null,D)}return A+=btoa(F),C(A)},e.decodePacket=function(_,C,A){if(_===void 0)return f;if(typeof _=="string"){if(_.charAt(0)==="b")return e.decodeBase64Packet(_.substr(1),C);if(A&&(_=y(_),_===!1))return f;var F=_.charAt(0);return Number(F)!=F||!s[F]?f:_.length>1?{type:s[F],data:_.substring(1)}:{type:s[F]}}var w=new Uint8Array(_),F=w[0],S=r(_,1);return h&&C==="blob"&&(S=new h([S])),{type:s[F],data:S}};function y(_){try{_=o.decode(_,{strict:!1})}catch{return!1}return _}e.decodeBase64Packet=function(_,C){var A=s[_.charAt(0)];if(!l)return{type:A,data:{base64:!0,data:_.substr(1)}};var w=l.decode(_.substr(1));return C==="blob"&&h&&(w=new h([w])),{type:A,data:w}},e.encodePayload=function(_,C,A){typeof C=="function"&&(A=C,C=null);var w=n(_);if(C&&w)return h&&!u?e.encodePayloadAsBlob(_,A):e.encodePayloadAsArrayBuffer(_,A);if(!_.length)return A("0:");function F(D){return D.length+":"+D}function S(D,B){e.encodePacket(D,w?C:!1,!1,function(P){B(null,F(P))})}b(_,S,function(D,B){return A(B.join(""))})};function b(_,C,A){for(var w=new Array(_.length),F=i(_.length,A),S=function(B,P,J){C(P,function(Q,ee){w[B]=ee,J(Q,w)})},D=0;D<_.length;D++)S(D,_[D],F)}e.decodePayload=function(_,C,A){if(typeof _!="string")return e.decodePayloadAsBinary(_,C,A);typeof C=="function"&&(A=C,C=null);var w;if(_==="")return A(f,0,1);for(var F="",S,D,B=0,P=_.length;B<P;B++){var J=_.charAt(B);if(J!==":"){F+=J;continue}if(F===""||F!=(S=Number(F))||(D=_.substr(B+1,S),F!=D.length))return A(f,0,1);if(D.length){if(w=e.decodePacket(D,C,!1),f.type===w.type&&f.data===w.data)return A(f,0,1);var Q=A(w,B+S,P);if(Q===!1)return}B+=S,F=""}if(F!=="")return A(f,0,1)},e.encodePayloadAsArrayBuffer=function(_,C){if(!_.length)return C(new ArrayBuffer(0));function A(w,F){e.encodePacket(w,!0,!0,function(S){return F(null,S)})}b(_,A,function(w,F){var S=F.reduce(function(P,J){var Q;return typeof J=="string"?Q=J.length:Q=J.byteLength,P+Q.toString().length+Q+2},0),D=new Uint8Array(S),B=0;return F.forEach(function(P){var J=typeof P=="string",Q=P;if(J){for(var xt=new Uint8Array(P.length),ee=0;ee<P.length;ee++)xt[ee]=P.charCodeAt(ee);Q=xt.buffer}J?D[B++]=0:D[B++]=1;for(var kt=Q.byteLength.toString(),ee=0;ee<kt.length;ee++)D[B++]=parseInt(kt[ee]);D[B++]=255;for(var xt=new Uint8Array(Q),ee=0;ee<xt.length;ee++)D[B++]=xt[ee]}),C(D.buffer)})},e.encodePayloadAsBlob=function(_,C){function A(w,F){e.encodePacket(w,!0,!0,function(S){var D=new Uint8Array(1);if(D[0]=1,typeof S=="string"){for(var B=new Uint8Array(S.length),P=0;P<S.length;P++)B[P]=S.charCodeAt(P);S=B.buffer,D[0]=0}for(var J=S instanceof ArrayBuffer?S.byteLength:S.size,Q=J.toString(),ee=new Uint8Array(Q.length+1),P=0;P<Q.length;P++)ee[P]=parseInt(Q[P]);if(ee[Q.length]=255,h){var kt=new h([D.buffer,ee.buffer,S]);F(null,kt)}})}b(_,A,function(w,F){return C(new h(F))})},e.decodePayloadAsBinary=function(_,C,A){typeof C=="function"&&(A=C,C=null);for(var w=_,F=[];w.byteLength>0;){for(var S=new Uint8Array(w),D=S[0]===0,B="",P=1;S[P]!==255;P++){if(B.length>310)return A(f,0,1);B+=S[P]}w=r(w,2+B.length),B=parseInt(B);var J=r(w,0,B);if(D)try{J=String.fromCharCode.apply(null,new Uint8Array(J))}catch{var Q=new Uint8Array(J);J="";for(var P=0;P<Q.length;P++)J+=String.fromCharCode(Q[P])}F.push(J),w=r(w,B)}var ee=F.length;F.forEach(function(kt,xt){A(e.decodePacket(kt,C,!0),xt,ee)})}}(Ds)),Ds}var Ns,Ga;function vo(){if(Ga)return Ns;Ga=1;var e=cn(),t=Yr();Ns=n;function n(r){this.path=r.path,this.hostname=r.hostname,this.port=r.port,this.secure=r.secure,this.query=r.query,this.timestampParam=r.timestampParam,this.timestampRequests=r.timestampRequests,this.readyState="",this.agent=r.agent||!1,this.socket=r.socket,this.enablesXDR=r.enablesXDR,this.withCredentials=r.withCredentials,this.pfx=r.pfx,this.key=r.key,this.passphrase=r.passphrase,this.cert=r.cert,this.ca=r.ca,this.ciphers=r.ciphers,this.rejectUnauthorized=r.rejectUnauthorized,this.forceNode=r.forceNode,this.isReactNative=r.isReactNative,this.extraHeaders=r.extraHeaders,this.localAddress=r.localAddress}return t(n.prototype),n.prototype.onError=function(r,i){var o=new Error(r);return o.type="TransportError",o.description=i,this.emit("error",o),this},n.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},n.prototype.send=function(r){if(this.readyState==="open")this.write(r);else throw new Error("Transport not open")},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(r){var i=e.decodePacket(r,this.socket.binaryType);this.onPacket(i)},n.prototype.onPacket=function(r){this.emit("packet",r)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")},Ns}var fr={},Wa;function mo(){return Wa||(Wa=1,fr.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},fr.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}),fr}var qs,Ka;function Jr(){return Ka||(Ka=1,qs=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}),qs}var zs,Xa;function pl(){if(Xa)return zs;Xa=1;var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),t=64,n={},r=0,i=0,o;function l(u){var a="";do a=e[u%t]+a,u=Math.floor(u/t);while(u>0);return a}function c(u){var a=0;for(i=0;i<u.length;i++)a=a*t+n[u.charAt(i)];return a}function d(){var u=l(+new Date);return u!==o?(r=0,o=u):u+"."+l(r++)}for(;i<t;i++)n[e[i]]=i;return d.encode=l,d.decode=c,zs=d,zs}var js,Za;function gl(){if(Za)return js;Za=1;var e=vo(),t=mo(),n=cn(),r=Jr(),i=pl(),o=jn()("engine.io-client:polling");js=c;var l=function(){var d=go(),u=new d({xdomain:!1});return u.responseType!=null}();function c(d){var u=d&&d.forceBase64;(!l||u)&&(this.supportsBinary=!1),e.call(this,d)}return r(c,e),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(d){var u=this;this.readyState="pausing";function a(){o("paused"),u.readyState="paused",d()}if(this.polling||!this.writable){var s=0;this.polling&&(o("we are currently polling - waiting to pause"),s++,this.once("pollComplete",function(){o("pre-pause polling complete"),--s||a()})),this.writable||(o("we are currently writing - waiting to pause"),s++,this.once("drain",function(){o("pre-pause writing complete"),--s||a()}))}else a()},c.prototype.poll=function(){o("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(d){var u=this;o("polling got data %s",d);var a=function(s,f,h){if(u.readyState==="opening"&&u.onOpen(),s.type==="close")return u.onClose(),!1;u.onPacket(s)};n.decodePayload(d,this.socket.binaryType,a),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():o('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){var d=this;function u(){o("writing close packet"),d.write([{type:"close"}])}this.readyState==="open"?(o("transport open - closing"),u()):(o("transport not open - deferring close"),this.once("open",u))},c.prototype.write=function(d){var u=this;this.writable=!1;var a=function(){u.writable=!0,u.emit("drain")};n.encodePayload(d,this.supportsBinary,function(s){u.doWrite(s,a)})},c.prototype.uri=function(){var d=this.query||{},u=this.secure?"https":"http",a="";this.timestampRequests!==!1&&(d[this.timestampParam]=i()),!this.supportsBinary&&!d.sid&&(d.b64=1),d=t.encode(d),this.port&&(u==="https"&&Number(this.port)!==443||u==="http"&&Number(this.port)!==80)&&(a=":"+this.port),d.length&&(d="?"+d);var s=this.hostname.indexOf(":")!==-1;return u+"://"+(s?"["+this.hostname+"]":this.hostname)+a+this.path+d},js}var Ya;function ip(){if(Ya)return ur.exports;Ya=1;var e=go(),t=gl(),n=Yr(),r=Jr(),i=jn()("engine.io-client:polling-xhr"),o=po();ur.exports=c,ur.exports.Request=d;function l(){}function c(s){if(t.call(this,s),this.requestTimeout=s.requestTimeout,this.extraHeaders=s.extraHeaders,typeof location<"u"){var f=location.protocol==="https:",h=location.port;h||(h=f?443:80),this.xd=typeof location<"u"&&s.hostname!==location.hostname||h!==s.port,this.xs=s.secure!==f}}r(c,t),c.prototype.supportsBinary=!0,c.prototype.request=function(s){return s=s||{},s.uri=this.uri(),s.xd=this.xd,s.xs=this.xs,s.agent=this.agent||!1,s.supportsBinary=this.supportsBinary,s.enablesXDR=this.enablesXDR,s.withCredentials=this.withCredentials,s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized,s.requestTimeout=this.requestTimeout,s.extraHeaders=this.extraHeaders,new d(s)},c.prototype.doWrite=function(s,f){var h=typeof s!="string"&&s!==void 0,p=this.request({method:"POST",data:s,isBinary:h}),v=this;p.on("success",f),p.on("error",function(g){v.onError("xhr post error",g)}),this.sendXhr=p},c.prototype.doPoll=function(){i("xhr poll");var s=this.request(),f=this;s.on("data",function(h){f.onData(h)}),s.on("error",function(h){f.onError("xhr poll error",h)}),this.pollXhr=s};function d(s){this.method=s.method||"GET",this.uri=s.uri,this.xd=!!s.xd,this.xs=!!s.xs,this.async=s.async!==!1,this.data=s.data!==void 0?s.data:null,this.agent=s.agent,this.isBinary=s.isBinary,this.supportsBinary=s.supportsBinary,this.enablesXDR=s.enablesXDR,this.withCredentials=s.withCredentials,this.requestTimeout=s.requestTimeout,this.pfx=s.pfx,this.key=s.key,this.passphrase=s.passphrase,this.cert=s.cert,this.ca=s.ca,this.ciphers=s.ciphers,this.rejectUnauthorized=s.rejectUnauthorized,this.extraHeaders=s.extraHeaders,this.create()}if(n(d.prototype),d.prototype.create=function(){var s={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized;var f=this.xhr=new e(s),h=this;try{i("xhr open %s: %s",this.method,this.uri),f.open(this.method,this.uri,this.async);try{if(this.extraHeaders){f.setDisableHeaderCheck&&f.setDisableHeaderCheck(!0);for(var p in this.extraHeaders)this.extraHeaders.hasOwnProperty(p)&&f.setRequestHeader(p,this.extraHeaders[p])}}catch{}if(this.method==="POST")try{this.isBinary?f.setRequestHeader("Content-type","application/octet-stream"):f.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{f.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in f&&(f.withCredentials=this.withCredentials),this.requestTimeout&&(f.timeout=this.requestTimeout),this.hasXDR()?(f.onload=function(){h.onLoad()},f.onerror=function(){h.onError(f.responseText)}):f.onreadystatechange=function(){if(f.readyState===2)try{var v=f.getResponseHeader("Content-Type");(h.supportsBinary&&v==="application/octet-stream"||v==="application/octet-stream; charset=UTF-8")&&(f.responseType="arraybuffer")}catch{}f.readyState===4&&(f.status===200||f.status===1223?h.onLoad():setTimeout(function(){h.onError(typeof f.status=="number"?f.status:0)},0))},i("xhr data %s",this.data),f.send(this.data)}catch(v){setTimeout(function(){h.onError(v)},0);return}typeof document<"u"&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(s){this.emit("data",s),this.onSuccess()},d.prototype.onError=function(s){this.emit("error",s),this.cleanup(!0)},d.prototype.cleanup=function(s){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,s)try{this.xhr.abort()}catch{}typeof document<"u"&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var s;try{var f;try{f=this.xhr.getResponseHeader("Content-Type")}catch{}f==="application/octet-stream"||f==="application/octet-stream; charset=UTF-8"?s=this.xhr.response||this.xhr.responseText:s=this.xhr.responseText}catch(h){this.onError(h)}s!=null&&this.onData(s)},d.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",a);else if(typeof addEventListener=="function"){var u="onpagehide"in o?"pagehide":"unload";addEventListener(u,a,!1)}}function a(){for(var s in d.requests)d.requests.hasOwnProperty(s)&&d.requests[s].abort()}return ur.exports}var Us,Ja;function op(){if(Ja)return Us;Ja=1;var e=gl(),t=Jr(),n=po();Us=c;var r=/\n/g,i=/\\n/g,o;function l(){}function c(d){e.call(this,d),this.query=this.query||{},o||(o=n.___eio=n.___eio||[]),this.index=o.length;var u=this;o.push(function(a){u.onData(a)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){u.script&&(u.script.onerror=l)},!1)}return t(c,e),c.prototype.supportsBinary=!1,c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),e.prototype.doClose.call(this)},c.prototype.doPoll=function(){var d=this,u=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),u.async=!0,u.src=this.uri(),u.onerror=function(f){d.onError("jsonp poll error",f)};var a=document.getElementsByTagName("script")[0];a?a.parentNode.insertBefore(u,a):(document.head||document.body).appendChild(u),this.script=u;var s=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);s&&setTimeout(function(){var f=document.createElement("iframe");document.body.appendChild(f),document.body.removeChild(f)},100)},c.prototype.doWrite=function(d,u){var a=this;if(!this.form){var s=document.createElement("form"),f=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index,p;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=h,s.method="POST",s.setAttribute("accept-charset","utf-8"),f.name="d",s.appendChild(f),document.body.appendChild(s),this.form=s,this.area=f}this.form.action=this.uri();function v(){g(),u()}function g(){if(a.iframe)try{a.form.removeChild(a.iframe)}catch(y){a.onError("jsonp polling iframe removal error",y)}try{var m='<iframe src="javascript:0" name="'+a.iframeId+'">';p=document.createElement(m)}catch{p=document.createElement("iframe"),p.name=a.iframeId,p.src="javascript:0"}p.id=a.iframeId,a.form.appendChild(p),a.iframe=p}g(),d=d.replace(i,`\\
`),this.area.value=d.replace(r,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){a.iframe.readyState==="complete"&&v()}:this.iframe.onload=v},Us}const ap={},cp=Object.freeze(Object.defineProperty({__proto__:null,default:ap},Symbol.toStringTag,{value:"Module"})),vl=il(cp);var Vs,Qa;function up(){if(Qa)return Vs;Qa=1;var e=vo(),t=cn(),n=mo(),r=Jr(),i=pl(),o=jn()("engine.io-client:websocket"),l,c;if(typeof WebSocket<"u"?l=WebSocket:typeof self<"u"&&(l=self.WebSocket||self.MozWebSocket),typeof window>"u")try{c=vl}catch{}var d=l||c;Vs=u;function u(a){var s=a&&a.forceBase64;s&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,this.usingBrowserWebSocket=l&&!a.forceNode,this.protocols=a.protocols,this.usingBrowserWebSocket||(d=c),e.call(this,a)}return r(u,e),u.prototype.name="websocket",u.prototype.supportsBinary=!0,u.prototype.doOpen=function(){if(this.check()){var a=this.uri(),s=this.protocols,f={};this.isReactNative||(f.agent=this.agent,f.perMessageDeflate=this.perMessageDeflate,f.pfx=this.pfx,f.key=this.key,f.passphrase=this.passphrase,f.cert=this.cert,f.ca=this.ca,f.ciphers=this.ciphers,f.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(f.headers=this.extraHeaders),this.localAddress&&(f.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?s?new d(a,s):new d(a):new d(a,s,f)}catch(h){return this.emit("error",h)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},u.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(s){a.onData(s.data)},this.ws.onerror=function(s){a.onError("websocket error",s)}},u.prototype.write=function(a){var s=this;this.writable=!1;for(var f=a.length,h=0,p=f;h<p;h++)(function(g){t.encodePacket(g,s.supportsBinary,function(m){if(!s.usingBrowserWebSocket){var y={};if(g.options&&(y.compress=g.options.compress),s.perMessageDeflate){var b=typeof m=="string"?Buffer.byteLength(m):m.length;b<s.perMessageDeflate.threshold&&(y.compress=!1)}}try{s.usingBrowserWebSocket?s.ws.send(m):s.ws.send(m,y)}catch{o("websocket closed before onclose event")}--f||v()})})(a[h]);function v(){s.emit("flush"),setTimeout(function(){s.writable=!0,s.emit("drain")},0)}},u.prototype.onClose=function(){e.prototype.onClose.call(this)},u.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()},u.prototype.uri=function(){var a=this.query||{},s=this.secure?"wss":"ws",f="";this.port&&(s==="wss"&&Number(this.port)!==443||s==="ws"&&Number(this.port)!==80)&&(f=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||(a.b64=1),a=n.encode(a),a.length&&(a="?"+a);var h=this.hostname.indexOf(":")!==-1;return s+"://"+(h?"["+this.hostname+"]":this.hostname)+f+this.path+a},u.prototype.check=function(){return!!d&&!("__initialize"in d&&this.name===u.prototype.name)},Vs}var ec;function tc(){if(ec)return ar;ec=1;var e=go(),t=ip(),n=op(),r=up();ar.polling=i,ar.websocket=r;function i(o){var l,c=!1,d=!1,u=o.jsonp!==!1;if(typeof location<"u"){var a=location.protocol==="https:",s=location.port;s||(s=a?443:80),c=o.hostname!==location.hostname||s!==o.port,d=o.secure!==a}if(o.xdomain=c,o.xscheme=d,l=new e(o),"open"in l&&!o.forceJSONP)return new t(o);if(!u)throw new Error("JSONP disabled");return new n(o)}return ar}var Hs,nc;function ml(){if(nc)return Hs;nc=1;var e=[].indexOf;return Hs=function(t,n){if(e)return t.indexOf(n);for(var r=0;r<t.length;++r)if(t[r]===n)return r;return-1},Hs}var Gs,rc;function lp(){if(rc)return Gs;rc=1;var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];Gs=function(o){var l=o,c=o.indexOf("["),d=o.indexOf("]");c!=-1&&d!=-1&&(o=o.substring(0,c)+o.substring(c,d).replace(/:/g,";")+o.substring(d,o.length));for(var u=e.exec(o||""),a={},s=14;s--;)a[t[s]]=u[s]||"";return c!=-1&&d!=-1&&(a.source=l,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=n(a,a.path),a.queryKey=r(a,a.query),a};function n(i,o){var l=/\/{2,9}/g,c=o.replace(l,"/").split("/");return(o.substr(0,1)=="/"||o.length===0)&&c.splice(0,1),o.substr(o.length-1,1)=="/"&&c.splice(c.length-1,1),c}function r(i,o){var l={};return o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(c,d,u){d&&(l[d]=u)}),l}return Gs}var Ws,sc;function fp(){if(sc)return Ws;sc=1;var e=tc(),t=Yr(),n=jn()("engine.io-client:socket"),r=ml(),i=cn(),o=lp(),l=mo();Ws=c;function c(u,a){if(!(this instanceof c))return new c(u,a);a=a||{},u&&typeof u=="object"&&(a=u,u=null),u?(u=o(u),a.hostname=u.host,a.secure=u.protocol==="https"||u.protocol==="wss",a.port=u.port,u.query&&(a.query=u.query)):a.host&&(a.hostname=o(a.host).host),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.agent=a.agent||!1,this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=a.query||{},typeof this.query=="string"&&(this.query=l.decode(this.query)),this.upgrade=a.upgrade!==!1,this.path=(a.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!a.forceJSONP,this.jsonp=a.jsonp!==!1,this.forceBase64=!!a.forceBase64,this.enablesXDR=!!a.enablesXDR,this.withCredentials=a.withCredentials!==!1,this.timestampParam=a.timestampParam||"t",this.timestampRequests=a.timestampRequests,this.transports=a.transports||["polling","websocket"],this.transportOptions=a.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=a.policyPort||843,this.rememberUpgrade=a.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=a.onlyBinaryUpgrades,this.perMessageDeflate=a.perMessageDeflate!==!1?a.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=a.pfx||null,this.key=a.key||null,this.passphrase=a.passphrase||null,this.cert=a.cert||null,this.ca=a.ca||null,this.ciphers=a.ciphers||null,this.rejectUnauthorized=a.rejectUnauthorized===void 0?!0:a.rejectUnauthorized,this.forceNode=!!a.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(a.extraHeaders&&Object.keys(a.extraHeaders).length>0&&(this.extraHeaders=a.extraHeaders),a.localAddress&&(this.localAddress=a.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}c.priorWebsocketSuccess=!1,t(c.prototype),c.protocol=i.protocol,c.Socket=c,c.Transport=vo(),c.transports=tc(),c.parser=cn(),c.prototype.createTransport=function(u){n('creating transport "%s"',u);var a=d(this.query);a.EIO=i.protocol,a.transport=u;var s=this.transportOptions[u]||{};this.id&&(a.sid=this.id);var f=new e[u]({query:a,socket:this,agent:s.agent||this.agent,hostname:s.hostname||this.hostname,port:s.port||this.port,secure:s.secure||this.secure,path:s.path||this.path,forceJSONP:s.forceJSONP||this.forceJSONP,jsonp:s.jsonp||this.jsonp,forceBase64:s.forceBase64||this.forceBase64,enablesXDR:s.enablesXDR||this.enablesXDR,withCredentials:s.withCredentials||this.withCredentials,timestampRequests:s.timestampRequests||this.timestampRequests,timestampParam:s.timestampParam||this.timestampParam,policyPort:s.policyPort||this.policyPort,pfx:s.pfx||this.pfx,key:s.key||this.key,passphrase:s.passphrase||this.passphrase,cert:s.cert||this.cert,ca:s.ca||this.ca,ciphers:s.ciphers||this.ciphers,rejectUnauthorized:s.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:s.perMessageDeflate||this.perMessageDeflate,extraHeaders:s.extraHeaders||this.extraHeaders,forceNode:s.forceNode||this.forceNode,localAddress:s.localAddress||this.localAddress,requestTimeout:s.requestTimeout||this.requestTimeout,protocols:s.protocols||void 0,isReactNative:this.isReactNative});return f};function d(u){var a={};for(var s in u)u.hasOwnProperty(s)&&(a[s]=u[s]);return a}return c.prototype.open=function(){var u;if(this.rememberUpgrade&&c.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)u="websocket";else if(this.transports.length===0){var a=this;setTimeout(function(){a.emit("error","No transports available")},0);return}else u=this.transports[0];this.readyState="opening";try{u=this.createTransport(u)}catch{this.transports.shift(),this.open();return}u.open(),this.setTransport(u)},c.prototype.setTransport=function(u){n("setting transport %s",u.name);var a=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=u,u.on("drain",function(){a.onDrain()}).on("packet",function(s){a.onPacket(s)}).on("error",function(s){a.onError(s)}).on("close",function(){a.onClose("transport close")})},c.prototype.probe=function(u){n('probing transport "%s"',u);var a=this.createTransport(u,{probe:1}),s=!1,f=this;c.priorWebsocketSuccess=!1;function h(){if(f.onlyBinaryUpgrades){var _=!this.supportsBinary&&f.transport.supportsBinary;s=s||_}s||(n('probe transport "%s" opened',u),a.send([{type:"ping",data:"probe"}]),a.once("packet",function(C){if(!s)if(C.type==="pong"&&C.data==="probe"){if(n('probe transport "%s" pong',u),f.upgrading=!0,f.emit("upgrading",a),!a)return;c.priorWebsocketSuccess=a.name==="websocket",n('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){s||f.readyState!=="closed"&&(n("changing transport and sending upgrade packet"),b(),f.setTransport(a),a.send([{type:"upgrade"}]),f.emit("upgrade",a),a=null,f.upgrading=!1,f.flush())})}else{n('probe transport "%s" failed',u);var A=new Error("probe error");A.transport=a.name,f.emit("upgradeError",A)}}))}function p(){s||(s=!0,b(),a.close(),a=null)}function v(_){var C=new Error("probe error: "+_);C.transport=a.name,p(),n('probe transport "%s" failed because of error: %s',u,_),f.emit("upgradeError",C)}function g(){v("transport closed")}function m(){v("socket closed")}function y(_){a&&_.name!==a.name&&(n('"%s" works - aborting "%s"',_.name,a.name),p())}function b(){a.removeListener("open",h),a.removeListener("error",v),a.removeListener("close",g),f.removeListener("close",m),f.removeListener("upgrading",y)}a.once("open",h),a.once("error",v),a.once("close",g),this.once("close",m),this.once("upgrading",y),a.open()},c.prototype.onOpen=function(){if(n("socket open"),this.readyState="open",c.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var u=0,a=this.upgrades.length;u<a;u++)this.probe(this.upgrades[u])}},c.prototype.onPacket=function(u){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(n('socket receive: type "%s", data "%s"',u.type,u.data),this.emit("packet",u),this.emit("heartbeat"),u.type){case"open":this.onHandshake(JSON.parse(u.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var a=new Error("server error");a.code=u.data,this.onError(a);break;case"message":this.emit("data",u.data),this.emit("message",u.data);break}else n('packet received with socket readyState "%s"',this.readyState)},c.prototype.onHandshake=function(u){this.emit("handshake",u),this.id=u.sid,this.transport.query.sid=u.sid,this.upgrades=this.filterUpgrades(u.upgrades),this.pingInterval=u.pingInterval,this.pingTimeout=u.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},c.prototype.onHeartbeat=function(u){clearTimeout(this.pingTimeoutTimer);var a=this;a.pingTimeoutTimer=setTimeout(function(){a.readyState!=="closed"&&a.onClose("ping timeout")},u||a.pingInterval+a.pingTimeout)},c.prototype.setPing=function(){var u=this;clearTimeout(u.pingIntervalTimer),u.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",u.pingTimeout),u.ping(),u.onHeartbeat(u.pingTimeout)},u.pingInterval)},c.prototype.ping=function(){var u=this;this.sendPacket("ping",function(){u.emit("ping")})},c.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},c.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},c.prototype.write=c.prototype.send=function(u,a,s){return this.sendPacket("message",u,a,s),this},c.prototype.sendPacket=function(u,a,s,f){if(typeof a=="function"&&(f=a,a=void 0),typeof s=="function"&&(f=s,s=null),!(this.readyState==="closing"||this.readyState==="closed")){s=s||{},s.compress=s.compress!==!1;var h={type:u,data:a,options:s};this.emit("packetCreate",h),this.writeBuffer.push(h),f&&this.once("flush",f),this.flush()}},c.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var u=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?f():a()}):this.upgrading?f():a()}function a(){u.onClose("forced close"),n("socket closing - telling transport to close"),u.transport.close()}function s(){u.removeListener("upgrade",s),u.removeListener("upgradeError",s),a()}function f(){u.once("upgrade",s),u.once("upgradeError",s)}return this},c.prototype.onError=function(u){n("socket error %j",u),c.priorWebsocketSuccess=!1,this.emit("error",u),this.onClose("transport error",u)},c.prototype.onClose=function(u,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){n('socket close with reason: "%s"',u);var s=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",u,a),s.writeBuffer=[],s.prevBufferLen=0}},c.prototype.filterUpgrades=function(u){for(var a=[],s=0,f=u.length;s<f;s++)~r(this.transports,u[s])&&a.push(u[s]);return a},Ws}var ic;function dp(){return ic||(ic=1,or.exports=fp(),or.exports.parser=cn()),or.exports}var Ks={exports:{}},Xs={exports:{}},oc;function yl(){return oc||(oc=1,function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var i in t.prototype)r[i]=t.prototype[i];return r}t.prototype.on=t.prototype.addEventListener=function(r,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(i),this},t.prototype.once=function(r,i){function o(){this.off(r,o),i.apply(this,arguments)}return o.fn=i,this.on(r,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+r];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var l,c=0;c<o.length;c++)if(l=o[c],l===i||l.fn===i){o.splice(c,1);break}return this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};var i=[].slice.call(arguments,1),o=this._callbacks["$"+r];if(o){o=o.slice(0);for(var l=0,c=o.length;l<c;++l)o[l].apply(this,i)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}}(Xs)),Xs.exports}var Zs,ac;function hp(){if(ac)return Zs;ac=1,Zs=e;function e(t,n){var r=[];n=n||0;for(var i=n||0;i<t.length;i++)r[i-n]=t[i];return r}return Zs}var Ys,cc;function bl(){if(cc)return Ys;cc=1,Ys=e;function e(t,n,r){return t.on(n,r),{destroy:function(){t.removeListener(n,r)}}}return Ys}var Js,uc;function _l(){if(uc)return Js;uc=1;var e=[].slice;return Js=function(t,n){if(typeof n=="string"&&(n=t[n]),typeof n!="function")throw new Error("bind() requires a function");var r=e.call(arguments,2);return function(){return n.apply(t,r.concat(e.call(arguments)))}},Js}var dr={},lc;function pp(){return lc||(lc=1,dr.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},dr.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}),dr}var fc;function wl(){return fc||(fc=1,function(e,t){var n=ho(),r=yl(),i=hp(),o=bl(),l=_l(),c=Zr()("socket.io-client:socket"),d=pp(),u=hl();e.exports=f;var a={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},s=r.prototype.emit;function f(h,p,v){this.io=h,this.nsp=p,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},v&&v.query&&(this.query=v.query),this.io.autoConnect&&this.open()}r(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var h=this.io;this.subs=[o(h,"open",l(this,"onopen")),o(h,"packet",l(this,"onpacket")),o(h,"close",l(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},f.prototype.send=function(){var h=i(arguments);return h.unshift("message"),this.emit.apply(this,h),this},f.prototype.emit=function(h){if(a.hasOwnProperty(h))return s.apply(this,arguments),this;var p=i(arguments),v={type:(this.flags.binary!==void 0?this.flags.binary:u(p))?n.BINARY_EVENT:n.EVENT,data:p};return v.options={},v.options.compress=!this.flags||this.flags.compress!==!1,typeof p[p.length-1]=="function"&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=p.pop(),v.id=this.ids++),this.connected?this.packet(v):this.sendBuffer.push(v),this.flags={},this},f.prototype.packet=function(h){h.nsp=this.nsp,this.io.packet(h)},f.prototype.onopen=function(){if(c("transport is open - connecting"),this.nsp!=="/")if(this.query){var h=typeof this.query=="object"?d.encode(this.query):this.query;c("sending connect packet with query %s",h),this.packet({type:n.CONNECT,query:h})}else this.packet({type:n.CONNECT})},f.prototype.onclose=function(h){c("close (%s)",h),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",h)},f.prototype.onpacket=function(h){var p=h.nsp===this.nsp,v=h.type===n.ERROR&&h.nsp==="/";if(!(!p&&!v))switch(h.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(h);break;case n.BINARY_EVENT:this.onevent(h);break;case n.ACK:this.onack(h);break;case n.BINARY_ACK:this.onack(h);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",h.data);break}},f.prototype.onevent=function(h){var p=h.data||[];c("emitting event %j",p),h.id!=null&&(c("attaching ack callback to event"),p.push(this.ack(h.id))),this.connected?s.apply(this,p):this.receiveBuffer.push(p)},f.prototype.ack=function(h){var p=this,v=!1;return function(){if(!v){v=!0;var g=i(arguments);c("sending ack %j",g),p.packet({type:u(g)?n.BINARY_ACK:n.ACK,id:h,data:g})}}},f.prototype.onack=function(h){var p=this.acks[h.id];typeof p=="function"?(c("calling ack %s with %j",h.id,h.data),p.apply(this,h.data),delete this.acks[h.id]):c("bad ack %s",h.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){var h;for(h=0;h<this.receiveBuffer.length;h++)s.apply(this,this.receiveBuffer[h]);for(this.receiveBuffer=[],h=0;h<this.sendBuffer.length;h++)this.packet(this.sendBuffer[h]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var h=0;h<this.subs.length;h++)this.subs[h].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(h){return this.flags.compress=h,this},f.prototype.binary=function(h){return this.flags.binary=h,this}}(Ks)),Ks.exports}var Qs,dc;function gp(){if(dc)return Qs;dc=1,Qs=e;function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}return e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*t);t=(Math.floor(n*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t},Qs}var ei,hc;function pc(){if(hc)return ei;hc=1;var e=dp(),t=wl(),n=yl(),r=ho(),i=bl(),o=_l(),l=Zr()("socket.io-client:manager"),c=ml(),d=gp(),u=Object.prototype.hasOwnProperty;ei=a;function a(s,f){if(!(this instanceof a))return new a(s,f);s&&typeof s=="object"&&(f=s,s=void 0),f=f||{},f.path=f.path||"/socket.io",this.nsps={},this.subs=[],this.opts=f,this.reconnection(f.reconnection!==!1),this.reconnectionAttempts(f.reconnectionAttempts||1/0),this.reconnectionDelay(f.reconnectionDelay||1e3),this.reconnectionDelayMax(f.reconnectionDelayMax||5e3),this.randomizationFactor(f.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(f.timeout==null?2e4:f.timeout),this.readyState="closed",this.uri=s,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var h=f.parser||r;this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=f.autoConnect!==!1,this.autoConnect&&this.open()}return a.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var s in this.nsps)u.call(this.nsps,s)&&this.nsps[s].emit.apply(this.nsps[s],arguments)},a.prototype.updateSocketIds=function(){for(var s in this.nsps)u.call(this.nsps,s)&&(this.nsps[s].id=this.generateId(s))},a.prototype.generateId=function(s){return(s==="/"?"":s+"#")+this.engine.id},n(a.prototype),a.prototype.reconnection=function(s){return arguments.length?(this._reconnection=!!s,this):this._reconnection},a.prototype.reconnectionAttempts=function(s){return arguments.length?(this._reconnectionAttempts=s,this):this._reconnectionAttempts},a.prototype.reconnectionDelay=function(s){return arguments.length?(this._reconnectionDelay=s,this.backoff&&this.backoff.setMin(s),this):this._reconnectionDelay},a.prototype.randomizationFactor=function(s){return arguments.length?(this._randomizationFactor=s,this.backoff&&this.backoff.setJitter(s),this):this._randomizationFactor},a.prototype.reconnectionDelayMax=function(s){return arguments.length?(this._reconnectionDelayMax=s,this.backoff&&this.backoff.setMax(s),this):this._reconnectionDelayMax},a.prototype.timeout=function(s){return arguments.length?(this._timeout=s,this):this._timeout},a.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},a.prototype.open=a.prototype.connect=function(s,f){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=e(this.uri,this.opts);var h=this.engine,p=this;this.readyState="opening",this.skipReconnect=!1;var v=i(h,"open",function(){p.onopen(),s&&s()}),g=i(h,"error",function(b){if(l("connect_error"),p.cleanup(),p.readyState="closed",p.emitAll("connect_error",b),s){var _=new Error("Connection error");_.data=b,s(_)}else p.maybeReconnectOnOpen()});if(this._timeout!==!1){var m=this._timeout;l("connect attempt will timeout after %d",m);var y=setTimeout(function(){l("connect attempt timed out after %d",m),v.destroy(),h.close(),h.emit("error","timeout"),p.emitAll("connect_timeout",m)},m);this.subs.push({destroy:function(){clearTimeout(y)}})}return this.subs.push(v),this.subs.push(g),this},a.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var s=this.engine;this.subs.push(i(s,"data",o(this,"ondata"))),this.subs.push(i(s,"ping",o(this,"onping"))),this.subs.push(i(s,"pong",o(this,"onpong"))),this.subs.push(i(s,"error",o(this,"onerror"))),this.subs.push(i(s,"close",o(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",o(this,"ondecoded")))},a.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},a.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},a.prototype.ondata=function(s){this.decoder.add(s)},a.prototype.ondecoded=function(s){this.emit("packet",s)},a.prototype.onerror=function(s){l("error",s),this.emitAll("error",s)},a.prototype.socket=function(s,f){var h=this.nsps[s];if(!h){h=new t(this,s,f),this.nsps[s]=h;var p=this;h.on("connecting",v),h.on("connect",function(){h.id=p.generateId(s)}),this.autoConnect&&v()}function v(){~c(p.connecting,h)||p.connecting.push(h)}return h},a.prototype.destroy=function(s){var f=c(this.connecting,s);~f&&this.connecting.splice(f,1),!this.connecting.length&&this.close()},a.prototype.packet=function(s){l("writing packet %j",s);var f=this;s.query&&s.type===0&&(s.nsp+="?"+s.query),f.encoding?f.packetBuffer.push(s):(f.encoding=!0,this.encoder.encode(s,function(h){for(var p=0;p<h.length;p++)f.engine.write(h[p],s.options);f.encoding=!1,f.processPacketQueue()}))},a.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var s=this.packetBuffer.shift();this.packet(s)}},a.prototype.cleanup=function(){l("cleanup");for(var s=this.subs.length,f=0;f<s;f++){var h=this.subs.shift();h.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},a.prototype.close=a.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},a.prototype.onclose=function(s){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",s),this._reconnection&&!this.skipReconnect&&this.reconnect()},a.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var s=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var f=this.backoff.duration();l("will wait %dms before reconnect attempt",f),this.reconnecting=!0;var h=setTimeout(function(){s.skipReconnect||(l("attempting reconnect"),s.emitAll("reconnect_attempt",s.backoff.attempts),s.emitAll("reconnecting",s.backoff.attempts),!s.skipReconnect&&s.open(function(p){p?(l("reconnect attempt error"),s.reconnecting=!1,s.reconnect(),s.emitAll("reconnect_error",p.data)):(l("reconnect success"),s.onreconnect())}))},f);this.subs.push({destroy:function(){clearTimeout(h)}})}},a.prototype.onreconnect=function(){var s=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",s)},ei}var gc;function vp(){return gc||(gc=1,function(e,t){var n=Kh(),r=ho(),i=pc(),o=Zr()("socket.io-client");e.exports=t=c;var l=t.managers={};function c(d,u){typeof d=="object"&&(u=d,d=void 0),u=u||{};var a=n(d),s=a.source,f=a.id,h=a.path,p=l[f]&&h in l[f].nsps,v=u.forceNew||u["force new connection"]||u.multiplex===!1||p,g;return v?(o("ignoring socket cache for %s",s),g=i(s,u)):(l[f]||(o("new io instance for %s",s),l[f]=i(s,u)),g=l[f]),a.query&&!u.query&&(u.query=a.query),g.socket(a.path,u)}t.protocol=r.protocol,t.connect=c,t.Manager=pc(),t.Socket=wl()}(nr,nr.exports)),nr.exports}var Ot={};function mp(e,t){return t=t||{},new Promise(function(n,r){var i=new XMLHttpRequest,o=[],l=[],c={},d=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:d,headers:{keys:function(){return o},entries:function(){return l},get:function(a){return c[a.toLowerCase()]},has:function(a){return a.toLowerCase()in c}}}};for(var u in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(a,s,f){o.push(s=s.toLowerCase()),l.push([s,f]),c[s]=c[s]?c[s]+","+f:f}),n(d())},i.onerror=r,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(u,t.headers[u]);i.send(t.body||null)})}const yp=Object.freeze(Object.defineProperty({__proto__:null,default:mp},Symbol.toStringTag,{value:"Module"})),vc=il(yp);var ti,mc;function bp(){return mc||(mc=1,ti=self.fetch||(self.fetch=vc.default||vc)),ti}var yc;function _p(){if(yc)return Ot;yc=1;var e=Ot&&Ot.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.fetchBalancerConfig=void 0;var t=an(),n=e(bp()),r=function(i){return(0,t.debug)("using balancer ".concat(i," to get websocket url")),(0,n.default)("".concat(i)).then(function(o){return o.json()}).then(function(o){return o!=null&&o.url&&(o!=null&&o.token)?((0,t.debug)("balancer returns url ".concat(o==null?void 0:o.url," and token ").concat(o==null?void 0:o.token)),o):((0,t.debug)("balancer returns invalid response"),null)}).catch(function(o){return(0,t.debug)("failed to resolve url: ".concat(o.message)),null})};return Ot.fetchBalancerConfig=r,Ot}var je={},bc;function wp(){if(bc)return je;bc=1;var e=je&&je.__extends||function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(u[s]=a[s])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function u(){this.constructor=c}c.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}(),t=je&&je.__spreadArray||function(l,c,d){if(d||arguments.length===2)for(var u=0,a=c.length,s;u<a;u++)(s||!(u in c))&&(s||(s=Array.prototype.slice.call(c,0,u)),s[u]=c[u]);return l.concat(s||Array.prototype.slice.call(c))},n=je&&je.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(je,"__esModule",{value:!0}),je.SocketMock=void 0;var r=an(),i=n(fl()),o=function(l){e(c,l);function c(d){var u=l.call(this)||this;return u.options=d,u.id="mock",u.connected=!1,u.disconnected=!0,u.binaryType="blob",u}return c.prototype.open=function(){var d=this;return(0,r.debug)("SocketIOMock: connect"),this.once("visitor.connect",function(u,a){a(null,d.options.connectData)}),this.connected=!0,this.disconnected=!1,this.emit("connect"),this},c.prototype.close=function(){return(0,r.debug)("SocketIOMock: disconnect"),this.connected=!1,this.disconnected=!1,this.emit("disconnect","io client disconnect"),this},c.prototype.emit=function(d){for(var u=[],a=1;a<arguments.length;a++)u[a-1]=arguments[a];return r.debug.apply(void 0,t(["SocketIOMock: emit"],u,!1)),(d==="connect"||d==="disconnect"||d==="visitor.connect")&&l.prototype.emit.apply(this,t([d],u,!1)),this},c.prototype.send=function(){for(var d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];return this.emit(event,d)},c.prototype.compress=function(){return this},c.prototype.connect=function(){return this.open()},c.prototype.disconnect=function(){return this.close()},c.prototype.hasListeners=function(d){return this.listenerCount(d)===0},c.prototype.addEventListener=function(d,u){return this.addListener(d,u),this},c.prototype.removeEventListener=function(d,u){return this.removeListener(d,u),this},c}(i.default);return je.SocketMock=o,je}var _c;function Cl(){return _c||(_c=1,function(e){var t=pe&&pe.__assign||function(){return t=Object.assign||function(p){for(var v,g=1,m=arguments.length;g<m;g++){v=arguments[g];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(p[y]=v[y])}return p},t.apply(this,arguments)},n=pe&&pe.__createBinding||(Object.create?function(p,v,g,m){m===void 0&&(m=g);var y=Object.getOwnPropertyDescriptor(v,g);(!y||("get"in y?!v.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return v[g]}}),Object.defineProperty(p,m,y)}:function(p,v,g,m){m===void 0&&(m=g),p[m]=v[g]}),r=pe&&pe.__exportStar||function(p,v){for(var g in p)g!=="default"&&!Object.prototype.hasOwnProperty.call(v,g)&&n(v,p,g)},i=pe&&pe.__awaiter||function(p,v,g,m){function y(b){return b instanceof g?b:new g(function(_){_(b)})}return new(g||(g=Promise))(function(b,_){function C(F){try{w(m.next(F))}catch(S){_(S)}}function A(F){try{w(m.throw(F))}catch(S){_(S)}}function w(F){F.done?b(F.value):y(F.value).then(C,A)}w((m=m.apply(p,v||[])).next())})},o=pe&&pe.__generator||function(p,v){var g={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},m,y,b,_;return _={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function C(w){return function(F){return A([w,F])}}function A(w){if(m)throw new TypeError("Generator is already executing.");for(;_&&(_=0,w[0]&&(g=0)),g;)try{if(m=1,y&&(b=w[0]&2?y.return:w[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,w[1])).done)return b;switch(y=0,b&&(w=[w[0]&2,b.value]),w[0]){case 0:case 1:b=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,y=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(b=g.trys,!(b=b.length>0&&b[b.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!b||w[1]>b[0]&&w[1]<b[3])){g.label=w[1];break}if(w[0]===6&&g.label<b[1]){g.label=b[1],b=w;break}if(b&&g.label<b[2]){g.label=b[2],g.ops.push(w);break}b[2]&&g.ops.pop(),g.trys.pop();continue}w=v.call(p,g)}catch(F){w=[6,F],y=0}finally{m=b=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},l=pe&&pe.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.SocketError=void 0;var c=an(),d=l(fl()),u=l(vp()),a=_p(),s={transports:["websocket"],path:"/socket",reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:Number.POSITIVE_INFINITY},f=function(){function p(v){this.options=v,this.initialized=!1,this.forceReconnect=!1,this.identity=null,this.connection=null,this.connectCallback=null,this.disconnectCallback=null,this.initData=null,this.internalReconnection=!1,this.internalReconnecting=!1,this.internalReconnectingAttempt=0,this.emitter=new d.default,this.sendBuffer=[],this.options.options=t(t(t({},s),this.options.options),{autoConnect:!1})}return p.prototype.initConnection=function(){return i(this,void 0,void 0,function(){var v;return o(this,function(g){switch(g.label){case 0:if(this.connection)throw new Error("Connection already exists");return this.options.socket?((0,c.debug)("using socket ".concat(this.options.socket.id)),this.internalReconnection=!1,this.setConnection(this.options.socket),[3,4]):[3,1];case 1:return this.options.balancerUrl?[4,(0,a.fetchBalancerConfig)(this.options.balancerUrl)]:[3,3];case 2:return v=g.sent(),(0,c.debug)("creating socket to ".concat(v.url," with token ").concat(v.token)),this.internalReconnection=!0,this.setConnection((0,u.default)(v.url,t(t({},this.options.options),{autoConnect:!1,reconnection:!1,query:{token:v.token}})),!0),[3,4];case 3:if(this.options.url)(0,c.debug)("creating socket to ".concat(this.options.url)),this.internalReconnection=!1,this.setConnection((0,u.default)(this.options.url,t(t({},this.options.options),{autoConnect:!1})));else throw new Error("Missing required parameter url");g.label=4;case 4:return[2]}})})},p.prototype.setConnection=function(v,g){var m=this;g===void 0&&(g=!1),this.connection=v,this.forceReconnect=!1,this.internalReconnection=g,v.on("connect_error",function(y){m.internalReconnection&&(m.connectCallback=null,(0,c.debug)("connection was not reconnected"),m.emitter.emit("reconnect_error",y),m.options.options.reconnectionAttempts>m.internalReconnectingAttempt+1?m.reconnect(m.internalReconnectingAttempt+1):m.emitter.emit("reconnect_failed",m.internalReconnectingAttempt))}),v.on("connect",function(){(0,c.debug)("socket was connected"),m.initialized=!1,m.internalReconnecting?((0,c.debug)("connection is reconnected"),m.emitter.emit("reconnect"),m.internalReconnecting=!1,m.internalReconnectingAttempt=0):m.emitter.emit("connect"),m.initialize().then(function(y){return(0,c.debug)("socket was initialized"),m.onInitialized(y),m.connectCallback&&(m.connectCallback(null,y),m.connectCallback=null),y}).catch(function(y){(0,c.debug)("socket was not initialized ",t({},y)),m.onInitializeError(y),m.connectCallback&&(m.connectCallback(y),m.connectCallback=null)})}),v.on("disconnect",function(y){(0,c.debug)("socket was disconnected reason='".concat(y,"'")),m.initialized=!1,(!m.internalReconnecting||m.internalReconnectingAttempt===1)&&setTimeout(function(){m.emitter.emit("disconnect",y),m.disconnectCallback&&(m.disconnectCallback(),m.disconnectCallback=null)},100),m.options.options.reconnection&&m.internalReconnection&&!m.internalReconnecting&&(m.forceReconnect||y!=="io server disconnect")&&m.reconnect()}),v.on("reconnecting",function(y){m.emitter.emit("reconnecting",y)}),v.on("reconnect",function(){m.emitter.emit("reconnect")}),v.on("reconnect_attempt",function(y){m.emitter.emit("reconnect_attempt",y)}),v.on("reconnect_error",function(y){m.emitter.emit("reconnect_error",y)}),v.on("reconnect_failed",function(){m.emitter.emit("reconnect_failed")}),v.on("force_reconnect",function(){(0,c.debug)("received event force_reconnect, setting flag forceReconnect = true"),m.forceReconnect=!0})},p.prototype.getConnection=function(){return this.connection},p.prototype.isConnected=function(){var v;return((v=this.connection)===null||v===void 0?void 0:v.connected)||!1},p.prototype.isInitialized=function(){return this.initialized},p.prototype.getInitData=function(){return this.initData},p.prototype.connect=function(){return i(this,void 0,void 0,function(){var v=this;return o(this,function(g){switch(g.label){case 0:return this.connection?[3,2]:[4,this.initConnection()];case 1:g.sent(),g.label=2;case 2:return[2,new Promise(function(m,y){v.initialized?m(v.initData):((0,c.debug)("starting connecting"),v.connectCallback=(0,c.createCallback)(m,y),v.connection.open())})]}})})},p.prototype.disconnect=function(){var v=this;return new Promise(function(g,m){!v.connection||v.connection.disconnected?(v.connection=null,g()):((0,c.debug)("starting disconnecting"),v.disconnectCallback=(0,c.createCallback)(g,m),v.connection.close(),v.connection=null)})},p.prototype.reconnect=function(v){var g=this;return v===void 0&&(v=1),this.internalReconnecting=!0,this.internalReconnectingAttempt=v,this.disconnect().then(function(){var m=Math.floor(Math.random()*(g.options.options.reconnectionDelayMax-g.options.options.reconnectionDelay)+g.options.options.reconnectionDelay);return(0,c.debug)("connection will reconnect in ".concat(m,"ms")),g.emitter.emit("reconnecting",v),new Promise(function(y){setTimeout(y,m)})}).then(function(){return(0,c.debug)("connection is starting reconnect"),g.emitter.emit("reconnect_attempt",v),g.connect()})},p.prototype.initialize=function(){return new Promise(function(v){v({})})},p.prototype.onInitialized=function(v){var g=this;this.initialized||(this.initialized=!0,this.initData=v,(0,c.debug)("emit initialized"),this.emitter.emit("initialized",v),setTimeout(function(){if(g.sendBuffer.length>0){(0,c.debug)("sending buffered ".concat(g.sendBuffer.length," events"));for(var m=0;m<g.sendBuffer.length;m++){var y=g.sendBuffer[m];g.connection.emit(y.name,y.data,y.callback)}g.sendBuffer=[]}},1))},p.prototype.onInitializeError=function(v){this.disconnect(),(0,c.debug)("emit initialize_error",t({},v)),this.emitter.emit("initialize_error",v)},p.prototype.send=function(v,g,m){this.initialized?this.connection.emit(v,g,m):this.sendBuffer.push({name:v,data:g,callback:m})},p.prototype.on=function(v,g){return this.emitter.on(v,g),this},p.prototype.once=function(v,g){return this.emitter.once(v,g),this},p.prototype.removeAllListeners=function(){for(var v,g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];return(v=this.emitter).removeAllListeners.apply(v,g),this},p}();e.default=f;var h=an();Object.defineProperty(e,"SocketError",{enumerable:!0,get:function(){return h.SocketError}}),r(wp(),e)}(pe)),pe}var wc;function Cc(){return wc||(wc=1,function(e){var t=xe&&xe.__extends||function(){var u=function(a,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(f[p]=h[p])},u(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(a,s);function f(){this.constructor=a}a.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),n=xe&&xe.__assign||function(){return n=Object.assign||function(u){for(var a,s=1,f=arguments.length;s<f;s++){a=arguments[s];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(u[h]=a[h])}return u},n.apply(this,arguments)},r=xe&&xe.__awaiter||function(u,a,s,f){function h(p){return p instanceof s?p:new s(function(v){v(p)})}return new(s||(s=Promise))(function(p,v){function g(b){try{y(f.next(b))}catch(_){v(_)}}function m(b){try{y(f.throw(b))}catch(_){v(_)}}function y(b){b.done?p(b.value):h(b.value).then(g,m)}y((f=f.apply(u,a||[])).next())})},i=xe&&xe.__generator||function(u,a){var s={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},f,h,p,v;return v={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function g(y){return function(b){return m([y,b])}}function m(y){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(s=0)),s;)try{if(f=1,h&&(p=y[0]&2?h.return:y[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,y[1])).done)return p;switch(h=0,p&&(y=[y[0]&2,p.value]),y[0]){case 0:case 1:p=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,h=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(p=s.trys,!(p=p.length>0&&p[p.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!p||y[1]>p[0]&&y[1]<p[3])){s.label=y[1];break}if(y[0]===6&&s.label<p[1]){s.label=p[1],p=y;break}if(p&&s.label<p[2]){s.label=p[2],s.ops.push(y);break}p[2]&&s.ops.pop(),s.trys.pop();continue}y=a.call(u,s)}catch(b){y=[6,b],h=0}finally{f=p=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},o=xe&&xe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebsocketVisitorClient=void 0;var l=o(Cl()),c=an(),d=function(u){t(a,u);function a(s){var f=u.call(this,s.connection)||this;return f.serverVersion=null,f.updatedValues={},f.connectData=s.data,f.identity=null,f}return a.prototype.setConnection=function(s){u.prototype.setConnection.call(this,s),s.on("server.error",(0,c.bound)(this,"onServerError")),s.on("account.updated",(0,c.createEmitter)(this.emitter,"account.updated")),s.on("agent.updated",(0,c.createEmitter)(this.emitter,"agent.updated")),s.on("agent.status_updated",(0,c.createEmitter)(this.emitter,"agent.status_updated")),s.on("agent.removed",(0,c.createEmitter)(this.emitter,"agent.removed")),s.on("visitor.updated",(0,c.bound)(this,"onVisitorUpdated")),s.on("chat.updated",(0,c.createEmitter)(this.emitter,"chat.updated")),s.on("chat.agent_joined",(0,c.createEmitter)(this.emitter,"chat.agent_joined")),s.on("chat.agent_assigned",(0,c.createEmitter)(this.emitter,"chat.agent_assigned")),s.on("chat.agent_unassigned",(0,c.createEmitter)(this.emitter,"chat.agent_unassigned")),s.on("chat.agent_left",(0,c.createEmitter)(this.emitter,"chat.agent_left")),s.on("chat.opened",(0,c.createEmitter)(this.emitter,"chat.opened")),s.on("chat.served",(0,c.createEmitter)(this.emitter,"chat.served")),s.on("chat.closed",(0,c.createEmitter)(this.emitter,"chat.closed")),s.on("chat.visitor_closed",(0,c.createEmitter)(this.emitter,"chat.visitor_closed")),s.on("chat.message_received",(0,c.createEmitter)(this.emitter,"chat.message_received")),s.on("chat.message_updated",(0,c.createEmitter)(this.emitter,"chat.message_updated")),s.on("chat.message_deleted",(0,c.createEmitter)(this.emitter,"chat.message_deleted")),s.on("chat.agent_typing",(0,c.createEmitter)(this.emitter,"chat.agent_typing")),s.on("chat.rated",(0,c.createEmitter)(this.emitter,"chat.rated")),s.on("chat.rating_cancelled",(0,c.createEmitter)(this.emitter,"chat.rating_cancelled")),s.on("chat.rating_suggested",(0,c.createEmitter)(this.emitter,"chat.rating_suggested")),s.on("chat.contact_read",(0,c.createEmitter)(this.emitter,"chat.contact_read")),s.on("chat.deleted",(0,c.createEmitter)(this.emitter,"chat.deleted")),s.on("chat.ticket_form_finish",(0,c.createEmitter)(this.emitter,"chat.ticket_form_finish")),s.on("chat.transcript_pdf",(0,c.createEmitter)(this.emitter,"chat.transcript_pdf")),s.on("contact.acquired",(0,c.createEmitter)(this.emitter,"contact.acquired")),s.on("identity.status_updated",(0,c.createEmitter)(this.emitter,"identity.status_updated"))},a.prototype.on=function(s,f){return this.emitter.on(s,f),this},a.prototype.once=function(s,f){return this.emitter.once(s,f),this},a.prototype.getId=function(){return this.identity?this.identity.id:null},a.prototype.getIdentity=function(){return this.identity},a.prototype.connect=function(){return u.prototype.connect.call(this)},a.prototype.disconnect=function(s){return s===void 0&&(s=!1),r(this,void 0,void 0,function(){var f=this;return i(this,function(h){switch(h.label){case 0:return s?[4,new Promise(function(p,v){f.send("visitor.logout",{},(0,c.createCallback)(p,v))})]:[3,2];case 1:h.sent(),h.label=2;case 2:return[2,u.prototype.disconnect.call(this)]}})})},a.prototype.update=function(s){s===void 0&&(s={}),this.checkServerVersion();for(var f in s)this.identity[f]=s[f],this.updatedValues[f]=s[f];this.saveVisitorValues()},a.prototype.authenticate=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("visitor.authenticate",{values:s},(0,c.createCallback)(h,p))})},a.prototype.notify=function(s,f){var h=this;return f===void 0&&(f=null),this.checkServerVersion(),new Promise(function(p,v){h.send("visitor.notify",{name:s,value:f},(0,c.createCallback)(p,v))})},a.prototype.chatRead=function(){this.checkServerVersion(),this.send("chat.read",null)},a.prototype.chatTyping=function(s,f){f===void 0&&(f=null),this.checkServerVersion(),this.send("chat.typing",{typing:{is:s,text:f}})},a.prototype.chatMessage=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.message",s,(0,c.createCallback)(h,p))})},a.prototype.chatClose=function(s){s===void 0&&(s=null),this.checkServerVersion(),this.send("chat.close",{type:s})},a.prototype.chatUploadInit=function(){var s=this;return this.checkServerVersion(),new Promise(function(f,h){s.send("chat.upload_init",null,(0,c.createCallback)(f,h))})},a.prototype.chatUploadFinish=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.upload_finish",{uploadToken:s},(0,c.createCallback)(h,p))})},a.prototype.chatTranscript=function(s,f){var h=this;return this.checkServerVersion(),new Promise(function(p,v){h.send("chat.transcript",{email:s,lang:f},(0,c.createCallback)(p,v))})},a.prototype.chatTicketFormFinish=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.ticket_form_finish",s,(0,c.createCallback)(h,p))})},a.prototype.chatRateInit=function(){var s=this;return this.checkServerVersion(),new Promise(function(f,h){s.send("chat.rate_init",null,(0,c.createCallback)(f,h))})},a.prototype.chatRate=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.rate",s,(0,c.createCallback)(h,p))})},a.prototype.chatTranscriptPdf=function(){var s=this;return this.checkServerVersion(),new Promise(function(f,h){s.send("chat.transcript_pdf",null,(0,c.createCallback)(f,h))})},a.prototype.linkOpened=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.link_opened",s,(0,c.createCallback)(h,p))})},a.prototype.visitorConnect=function(){var s=this,f=n({version:a.CLIENT_VERSION},this.connectData);for(var h in this.updatedValues)f[h]=this.updatedValues[h];if(this.updatedValues={},this.identity)for(var h in this.identity)["bannedAt","chatId","status"].includes(h)||(f[h]=this.identity[h]);return this.emitter.emit("initialize",f),new Promise(function(p,v){s.connection.emit("visitor.connect",f,(0,c.createCallback)(p,v))})},a.prototype.visitorDisconnect=function(){var s=this;return new Promise(function(f,h){s.connection.emit("visitor.disconnect",{},(0,c.createCallback)(f,h))})},a.prototype.onVisitorUpdated=function(s){var f={};for(var h in s.changes)a.identityProperties.includes(h)&&(this.identity&&(this.identity[h]=s.changes[h]),f[h]=s.changes[h]);Object.getOwnPropertyNames(f).length>0&&this.emitter.emit("visitor.updated",f)},a.prototype.onServerError=function(s){var f=(0,c.createSocketError)(s);this.emitter.emit("error",f)},a.prototype.initialize=function(){var s=this;return this.visitorConnect().then(function(f){return s.serverVersion=f.serverVersion,s.identity=n(n({},f.visitor),{variables:n({},f.visitor.variables)}),f})},a.prototype.saveVisitorValues=function(){var s=this;this.initialized&&setTimeout(function(){if(!(!s.initialized||Object.getOwnPropertyNames(s.updatedValues).length===0)){var f={};for(var h in s.updatedValues)f[h]=s.updatedValues[h];s.send("visitor.update",{values:f}),s.updatedValues={}}},1)},a.prototype.checkServerVersion=function(){if(this.serverVersion===null)throw new Error("Client not yet connected to server")},a.CLIENT_VERSION=6,a.identityProperties=["id","name","email","phone","chatId","variables","lang","group","bannedAt","triggerable","visits","gdprApproved"],a}(l.default);e.WebsocketVisitorClient=d,function(u){(function(a){a.WidgetOpen="widget_open",a.WidgetShow="widget_show",a.VisitorActive="visitor_active",a.VisitorInactive="visitor_inactive"})(u.EventName||(u.EventName={}))}(d=e.WebsocketVisitorClient||(e.WebsocketVisitorClient={})),e.WebsocketVisitorClient=d}(xe)),xe}var ni={},Ac;function Cp(){return Ac||(Ac=1,Object.defineProperty(ni,"__esModule",{value:!0})),ni}var ri={},Ec;function Ap(){return Ec||(Ec=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RatingTarget=void 0,function(t){t.Agent="agent",t.Ai="ai"}(e.RatingTarget||(e.RatingTarget={}))}(ri)),ri}var Y={},Fc;function Ep(){return Fc||(Fc=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.MessageDeliveryFailReason=Y.MessageDeliveryStatus=Y.AgentDevicePlatform=Y.AgentDeviceType=Y.VisitorStatus=Y.ChatReadInfoType=Y.ChatStatus=Y.AgentStatus=Y.AccountStatus=void 0,Y.AccountStatus={Online:"online",Offline:"offline",OfflineWithAI:"offlineWithAi"},Y.AgentStatus={Online:"online",Offline:"offline"},Y.ChatStatus={Pending:"pending",Open:"open",Closed:"closed",Served:"served"},Y.ChatReadInfoType={Agent:"agent",Contact:"contact"},Y.VisitorStatus={Active:"active",Clicked:"clicked",Idle:"idle",Served:"served",Unserved:"unserved",Triggered:"triggered"},Y.AgentDeviceType={Browser:"browser",Mobile:"mobile",Xmpp:"xmpp",Other:"other"},Y.AgentDevicePlatform={IOS:"ios",ANDROID:"android"},Y.MessageDeliveryStatus={Ok:"ok",PermanentFail:"permanent_fail",TemporaryFail:"temporary_fail",Complained:"complained",Seen:"seen"},Y.MessageDeliveryFailReason={Facebook24hWindow:"facebook.outside_allowed_window",WhatsappUnsupportedFile:"whatsapp.unsupported_file_type",WhatsappUnknown:"whatsapp.unknown"}),Y}var Sc;function Fp(){return Sc||(Sc=1,function(e){var t=Tt&&Tt.__createBinding||(Object.create?function(o,l,c,d){d===void 0&&(d=c);var u=Object.getOwnPropertyDescriptor(l,c);(!u||("get"in u?!l.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(o,d,u)}:function(o,l,c,d){d===void 0&&(d=c),o[d]=l[c]}),n=Tt&&Tt.__exportStar||function(o,l){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&t(l,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.SocketError=e.default=void 0;var r=Cc();Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.WebsocketVisitorClient}}),n(Cc(),e),n(Cp(),e),n(Ap(),e);var i=an();Object.defineProperty(e,"SocketError",{enumerable:!0,get:function(){return i.SocketError}}),n(Ep(),e)}(Tt)),Tt}var re=Fp();const yo=sl(re),bo=O(null),Sp=O(!1),_o=O([]),kp=e=>{_o.update(t=>[...t,e])},xp=()=>{let e;return _o.update(t=>(e=t.pop(),t)),e??null},Tp=()=>E(_o).length===0,tA=M(bo,e=>e!==null),wo=(e,{useStack:t=!1}={})=>{bo.update(n=>(t&&n&&kp(n),Sp.set(n!==null),e))},Al=()=>{let e=null;Tp()||(e=xp()),bo.set(e)};var Qr=(e=>(e[e.Options=0]="Options",e[e.GdprAndPrivacy=1]="GdprAndPrivacy",e[e.AuthForm=2]="AuthForm",e[e.CloseChat=3]="CloseChat",e[e.ChatRating=4]="ChatRating",e[e.TicketForm=5]="TicketForm",e))(Qr||{});const nA=500,rA=1e3,sA=Symbol("contentListItem"),iA=Symbol("contentMessageAttachment"),oA="-replies",Op=.35,Mp=5e3;var Mt={},si={},kc;function Dp(){return kc||(kc=1,Object.defineProperty(si,"__esModule",{value:!0})),si}var wn={},xc;function Rp(){return xc||(xc=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.CardsLayout=void 0,wn.CardsLayout={Grid:"grid",Carousel:"carousel"}),wn}var ii={},Tc;function Bp(){return Tc||(Tc=1,Object.defineProperty(ii,"__esModule",{value:!0})),ii}var oi={},Oc;function Ip(){return Oc||(Oc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RatingTarget=e.GroupType=e.ChannelType=e.MessageSubType=e.MessageType=e.AttachmentInvalidReason=e.AttachmentType=e.MessageActionType=void 0,e.MessageActionType={Text:"text",OpenUrl:"open_url"},e.AttachmentType={Card:"card",Cards:"cards",File:"file",Image:"image",Media:"media",Invalid:"invalid"},e.AttachmentInvalidReason={InvalidSize:"invalid_size",InvalidType:"invalid_type"},e.MessageType={Message:"message",Event:"event",Help:"help"},e.MessageSubType={Agent:"agent",Contact:"contact",Trigger:"trigger",Bot:"bot",System:"system",AgentExternal:"agent_external",FoundEmail:"found_email",ChatResolve:"chat_resolve"},e.ChannelType={Default:"default",Email:"email",EmailIntegration:"email_integration",FacebookMessenger:"facebook_messenger",Gmail:"gmail",Smartsupp:"smartsupp",Whatsapp:"whatsapp"},function(t){t.ai="ai",t.chatbot="chatbot",t.message="message"}(e.GroupType||(e.GroupType={})),function(t){t.Agent="agent",t.Ai="ai"}(e.RatingTarget||(e.RatingTarget={}))}(oi)),oi}var ai={},Mc;function Pp(){return Mc||(Mc=1,Object.defineProperty(ai,"__esModule",{value:!0})),ai}var ci={},Dc;function Lp(){return Dc||(Dc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageContentType=e.MessageContent=void 0;var t;(function(n){(function(r){r.Type={Text:"text",Upload:"upload",RateForm:"rate_form",TicketForm:"ticket_form"}})(n.Message||(n.Message={})),function(r){r.Type={AgentJoin:"agent_join",AgentAssign:"agent_assign",AgentUnassign:"agent_unassign",AgentLeave:"agent_leave",ChatClose:"chat_close",ChatVisitorClose:"chat_visitor_close"}}(n.Event||(n.Event={})),function(r){r.Type={Text:"text",FoundEmail:"found_email"}}(n.Help||(n.Help={}))})(t=e.MessageContent||(e.MessageContent={})),e.MessageContentType={...t.Message.Type,...t.Event.Type,...t.Help.Type}}(ci)),ci}var ui={},Rc;function $p(){return Rc||(Rc=1,Object.defineProperty(ui,"__esModule",{value:!0})),ui}var Bc;function Np(){return Bc||(Bc=1,function(e){var t=Mt&&Mt.__createBinding||(Object.create?function(r,i,o,l){l===void 0&&(l=o);var c=Object.getOwnPropertyDescriptor(i,o);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,l,c)}:function(r,i,o,l){l===void 0&&(l=o),r[l]=i[o]}),n=Mt&&Mt.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Dp(),e),n(Rp(),e),n(Bp(),e),n(Ip(),e),n(Pp(),e),n(Lp(),e),n($p(),e)}(Mt)),Mt}var T=Np();const qp="default",es=(e,t)=>{const n={};for(const r of t){const i=String(r[e]);n[i]=r}return n},zp=()=>{const e=O({}),{subscribe:t,set:n}=e;return{subscribe:t,setGroups:i=>{n(es("key",i))}}},Co=zp(),El=M([Co],([e])=>Object.values(e));var jp=Cl();const Se={authFormDrawer:"authFormDrawer",authFormPrivacyNotice:"authFormPrivacyNotice",authFormPrivacyNoticeSwitch:"authFormPrivacyNoticeSwitch",authFormSubmitButton:"authFormSubmitButton",avatarAgent:"avatarAgent",avatarBot:"avatarBot",avatarGroup:"avatarGroup",avatarInfo:"avatarInfo",buttonAttachment:"buttonAttachment",buttonCloseChat:"buttonCloseChat",buttonCloseDrawer:"buttonCloseDrawer",buttonCollapseChat:"buttonCollapseChat",buttonEmoji:"buttonEmoji",buttonExpandChat:"buttonExpandChat",buttonMinimizeChat:"buttonMinimizeChat",buttonOptions:"buttonOptions",buttonSend:"buttonSend",chatRatingDrawer:"chatRatingDrawer",chatRatingEmojiButton:"chatRatingEmoji",chatRatingSendButton:"chatRatingSendButton",chatRatingTextarea:"chatRatingTextarea",chatRatingFeedbackButton:"chatRatingFeedbackButton",chatRatingButtonAi:"chatRatingButtonAi",chatRatingButtonAgent:"chatRatingButtonAgent",closeChatConfirmButton:"closeChatConfirmButton",closeChatDeclineButton:"closeChatDeclineButton",closeChatDrawer:"closeChatDrawer",flashMessage:"flashMessage",gdprDrawer:"gdprDrawer",headerTitle:"headerTitle",headerStatus:"headerStatus",headerBadge:"headerBadge",messageAttachment:"messageAttachment",messageAgent:"messageAgent",messageBot:"messageBot",messageBotReply:"messageBotReply",messageBotBack:"messageBotBack",messageContact:"messageContact",messageFile:"messageFile",messageGroup:"messageGroup",messageImage:"messageImage",optionsAccessibility:"optionsAccessibility",optionsDrawer:"optionsDrawer",optionsPrivacyNotice:"optionsPrivacyNotice",optionsSounds:"optionsSounds",optionsTranscript:"optionsTranscript",popup:"popup",popupMessage:"popupMessage",popupButton:"popupButton",popupButtonClose:"popupButtonClose",productCard:"productCard",productCardArrowLeft:"productCardArrowLeft",productCardArrowRight:"productCardArrowRight",productCardButton:"productCardButton",productCardCarousel:"productCardCarousel",productCardDescription:"productCardDescription",productCardImage:"productCardImage",productCardInfo:"productCardInfo",productCardTitle:"productCardTitle",systemMessage:"systemMessage",textarea:"textarea",textareaPreviewFile:"textareaPreviewFile",textareaPreviewImage:"textareaPreviewImage",ticketFormDrawer:"ticketFormDrawer",ticketFormSubmitButton:"ticketFormSubmitButton",widgetButton:"widgetButton",widgetButtonFrame:"widgetButtonFrame",widgetButtonText:"widgetButtontext",widgetImagePreview:"widgetImagePreview",widgetMessenger:"widgetMessenger",widgetMessengerFrame:"widgetMessengerFrame",widgetOnlineBadge:"widgetOnlineBadge",widgetPopupFrame:"widgetPopupFrame",widgetTypingFrame:"widgetTypingFrame",widgetUnreadMessagesBadge:"widgetUnreadMessagesBadge",widgetHeader:"widgetHeader"},aA="https://www.smartsupp.com",cA="/powered-by-smartsupp",uA=["cs","es","fr","hu","it","de","nl","pl"],Up="3.0",lA="https://www.smartsupp.com/my-data-and-gdpr",Ao=O(!1),Ic=al(j.SessionId,""),Vp=()=>{const{protocol:e,host:t}=x.getOptions();return`${e==="http"?"http":"https"}://${t}`},Hp=async()=>{const{mobileSdk:e,visitorId:t}=x.getOptions();if(e&&t)return t;try{return await Oh()}catch(n){return X(String(n)),null}},Gp=(e,t)=>{let n=yr().location.href;return e&&t&&(n=`${n}${n.includes("?")?"&":"?"}ss-bot-run=${t}`),n},Fl=()=>{H.clearMessages(),Yv(),At.clearAssignedAgentIds(),yh(),gh(j.VisitorId)},Wp=async e=>{try{await Mh(e),Th()}catch(t){X(String(t))}},Kp=async(e=!1)=>{const{key:t,lang:n,isPreviewMode:r,previewWithoutReset:i,sitePlatform:o,triggerable:l,_chatMaxReopenTime:c,botId:d}=x.getOptions();(r&&!i||e)&&Fl();const u=await Hp(),a=E(Ho);return{key:t,id:u,isPreviewMode:r,sitePlatform:o,triggerable:l,_chatMaxReopenTime:c,name:a.name,email:a.email,phone:a.phone,group:a.group,lang:a.lang??n,variables:a.variables,widgetVersion:Up,visits:Dh(),isWidgetVisible:E(Ft),isWidgetOpen:E(_e),pageUrl:Gp(r,d),pageTitle:yr().document.title,domain:yr().location.hostname||"unknown",referer:yr().document.referrer,bundleVersion:"a3c705092be92600c2bca01b2aeb8f962aa96a85"}},Xp=(e,t)=>{const{isPreviewMode:n}=x.getOptions();!e&&t!==E(Ic)&&!n&&(Fl(),E(_e)&&_e.set(!1)),Ic.set(t)},Zp=()=>{const e=O(),{subscribe:t,set:n}=e;return{subscribe:t,initialize:i=>n(i)}},Eo=Zp(),Fn=5,Yp="FILE",fA=2e3,dA=e=>e.split("/")[0]==="image",hA=e=>!!e.match(/^video\/(?:mp4|webm|ogg){1}$/);async function Jp(e){if(!FileReader)return Ke("FileReader not supported"),null;const t=new FileReader;return new Promise(n=>{t.onload=()=>{if(!t.result){n(null);return}let r;typeof t.result=="string"?r=t.result:r=String(t.result),r.startsWith("data:image")||(r=null),n(r)},t.onerror=()=>{Ke("Failed to load image data"),n(null)},t.readAsDataURL(e)})}async function Qp(e){return new Promise(t=>{const n=document.createElement("img");n.onload=()=>{t({width:n.width,height:n.height})},n.onerror=()=>{Ke("Failed to obtain image dimensions"),t(null)},n.src=e})}function eg(e){return{horizontal:e.width>e.height,vertical:e.height>e.width}}const tg="ar",ng="az",rg="bg",sg="br",ig="bs",og="ca",ag="cn",cg="cs",ug="da",lg="de",fg="el",Sl="en",dg="es",hg="fa",pg="fi",gg="fil",vg="fr",mg="he",yg="hi",bg="hr",_g="hu",wg="is",Cg="it",Ag="ja",Eg="ka",Fg="lt",Sg="lv",kg="mk",xg="nl",Tg="no",Og="pl",Mg="pt",Dg="ro",Rg="ru",Bg="sk",Ig="sl",Pg="sr",Lg="sv",$g="th",Ng="tr",qg="tw",zg="uk",kl=Sl,jg=[tg,ng,rg,sg,ig,og,ag,cg,ug,lg,fg,Sl,dg,hg,pg,gg,vg,mg,yg,bg,_g,wg,Cg,Ag,Eg,Fg,Sg,kg,xg,Tg,Og,Mg,Dg,Rg,Bg,Ig,Pg,Lg,$g,Ng,qg,zg];var Dt={},Pc;function Ug(){if(Pc)return Dt;Pc=1;var e=Dt&&Dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.FetchAdapter=void 0;const t=e(vl);class n{constructor(i){this.options={},this.options=i}async request(i,o,l,c,d){const u={...this.options,...d},a=c?"?"+t.default.stringify(c):"";try{const s=await fetch(`${u.baseURL||""}${o}${a}`,{method:i,body:l?JSON.stringify(l):null,...u});return{status:s.status,statusText:s.statusText,data:await s.json(),headers:[...s.headers.entries()].reduce((f,[h,p])=>(f[h]=p,f),{})}}catch(s){throw s.isOpenApiError=!0,s}}withOptions(i){return new n(i)}}return Dt.FetchAdapter=n,Dt}var Vg=Ug(),Rt={},Bt={},Lc;function Hg(){return Lc||(Lc=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.ProjectName=Bt.ErrorCode=void 0,Bt.ErrorCode={BadRequest:"bad_request",NotAllowed:"not_allowed",NotFound:"not_found",Forbidden:"forbidden",TooManyRequests:"too_many_requests",Unauthorized:"unauthorized",Unprocessable:"unprocessable"},Bt.ProjectName={Widget:"widget",Chatbot:"chatbot"}),Bt}var Xt={},It={},$c;function xl(){if($c)return It;$c=1,Object.defineProperty(It,"__esModule",{value:!0}),It.TranslationsClientRaw=It.TranslationsClient=void 0;class e{constructor(i){this.adapter=i,this.raw=new t(this.adapter)}getDefaults(i,o,l){return this.adapter.request("get",`/${i}/translations/lang/${o}/defaults`,null,null,l).then(n)}}It.TranslationsClient=e;class t{constructor(i){this.adapter=i}getDefaults(i,o,l){return this.adapter.request("get",`/${i}/translations/lang/${o}/defaults`,null,null,l)}}It.TranslationsClientRaw=t;function n(r){return r.data}return It}var Nc;function qc(){if(Nc)return Xt;Nc=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.SmartsuppTranslationsClientApi=void 0;const e=xl();class t{constructor(r){this.adapter=r,this.translations=new e.TranslationsClient(r)}withOptions(r){return new t(this.adapter.withOptions(r))}}return Xt.SmartsuppTranslationsClientApi=t,Xt.default=t,Xt}var zc;function Gg(){return zc||(zc=1,function(e){var t=Rt&&Rt.__createBinding||(Object.create?function(i,o,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(o,l);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,c,d)}:function(i,o,l,c){c===void 0&&(c=l),i[c]=o[l]}),n=Rt&&Rt.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&t(o,i,l)};Object.defineProperty(e,"__esModule",{value:!0}),n(Hg(),e),n(qc(),e),n(xl(),e);const r=qc();e.default=r.SmartsuppTranslationsClientApi}(Rt)),Rt}var Tl=Gg();const Ol=e=>jg.includes(e),Wg=e=>Ol(e)?e:kl,Kg=()=>{const{lang:e}=x.getOptions(),{lang:t}=E(Ho);return Wg(t??e)};function Xg(){return new Tl.TranslationsClient(new Vg.FetchAdapter({baseURL:`${x.getOptions().translationsBaseUrl}/api/v1`}))}const Zg=async e=>Xg().getDefaults(Tl.ProjectName.Widget,e),Yg=(e,t)=>{const{translates:n}=x.getOptions();return{...e,...n[t]&&n[t]}},Un=O(kl),un=O({}),Ml=async e=>{try{const t=await Zg(e),n=Yg(t,e);un.update(r=>({...r,[e]:n}))}catch{Ke(`Fetch translations of '${e}' language failed.`)}},Jg=async e=>{E(un)[e]||await Ml(e),Un.set(e)},Qg=async()=>{const e=Kg();Un.set(e),await Ml(e)},ev=e=>{const t=E(Un),r={...E(un)[t],...e};un.update(i=>({...i,[t]:r}))},tv=(e,t,n)=>{var l;const r=E(un),i=`|${t}|`;if(Object.keys(r).length===0)return i;let o=((l=r[e])==null?void 0:l[t])||i;return Object.keys(n).map(c=>{const d=new RegExp(`{${c}}`,"g");o=o.replace(d,n[c])}),o},oe=M([Un,un],([e])=>(t,n={})=>tv(e,t,n)),nv=()=>{const e=O([]),{subscribe:t,update:n}=e,r=()=>E(e).map(g=>g.file),i=(g,m)=>(m||E(e)).find(y=>y.file.name===g)||null,o=g=>({file:g,preview:{},previewState:"none",uploadStatus:"none"}),l=g=>{const m=Array.isArray(g)?g:[g];n(y=>y.length+m.length>Fn?(zt(`${E(oe)("fileUpload.tooManyFiles")} ${Fn}`),y):[...y,...m.map(o)]),p(m)},c=g=>{n(m=>m.filter(y=>y.file!==g))},d=()=>E(e).length,u=()=>d()>=Fn,a=()=>e.set([]),s=()=>{e.update(g=>(g.forEach(m=>m.uploadStatus="in-progress"),g))},f=g=>{e.update(m=>{const y=i(g,m);return y&&(y.uploadStatus="done"),m})},h=g=>{var m;return((m=i(g.name))==null?void 0:m.previewState)!=="none"},p=g=>{g.forEach(m=>void v(m))},v=async g=>{if(h(g))return;const m=await Jp(g),y=m?await Qp(m):null,b=y?eg(y):null;e.update(_=>{const C=i(g.name,_);return C?(C.previewState="ready",C.preview={data:m,dimensions:y,orientation:b},[..._]):_})};return{subscribe:t,getFiles:r,find:i,add:l,remove:c,count:d,isLimitReached:u,clear:a,setUploadingStatus:s,setFileUploaded:f}},$t=nv(),rv=()=>{const e=[];return Object.freeze({push:r=>{e.push(r)},executeAll:()=>{for(;e.length>0;){const r=e.shift();r&&r()}}})},Vn=rv(),sv=()=>{const{widgetV3Url:e}=x.getOptions();return`${e}/assets/images/default-ai-identity.webp`},iv=e=>({...e,avatarUrl:e.avatarUrl||sv()}),ov=()=>{const e=O({}),{update:t,subscribe:n,set:r}=e;return{subscribe:n,setIdentities:c=>{r(es("id",c.map(iv)))},addIdentity:c=>{t(d=>({...d,[c.id]:c}))},updateIdentity:(c,d)=>{t(u=>u[c]?{...u,[c]:{...u[c],...d}}:u)}}},Dl=ov(),av=e=>{var n,r;Be("init data",e),Ao.set(!0),Xp(e.chat,e.sessionId);const t=e.visitor.id;Wp(t),Rh(e.visitor.visits),Ye.setVisitorData(e.visitor),ah({vid:t}),Eo.initialize(e.fileUpload),Kr.set(e.browser),Ct.setAgents(e.account.agents),Dl.setIdentities(e.account.botIdentities),((n=e.chat)==null?void 0:n.virtualAgent)!==void 0&&Ct.setVirtualAgent((r=e.chat)==null?void 0:r.virtualAgent),Co.setGroups(e.account.groups),Ll(e.account.status),e.chat&&(Gn()&&Dn.set(e.chat.ratingSuggestedTarget||null),Je.set(e.chat.status),vn(e.chat.isClosed),Hn.set(e.chat.unreadInfo.lastReadAt),H.setMessages(e.chat.messages),At.setAssignedAgentIds(e.chat.assignedIds??[]),e.chat.widgetOptions&&Et.updateGeneralOptions(e.chat.widgetOptions)),Ie.set(!0),G.emit("widgetInit",!0),Vn.executeAll()},cv=e=>{console.error(e)},uv=()=>{Ao.set(!1)},lv=({chatId:e})=>{ko.set(!1),Il.set(e),Je.set(re.ChatStatus.Open),Et.setMessageOptions({disableAttachments:!1})},fv=()=>{Je.set(re.ChatStatus.Served),vn(!1)},dv=({message:e})=>{const{closeType:t}=e.content.data;(t==="agent_close"||t==="bot_close")&&(At.setAssignedAgentIds([]),Je.set(re.ChatStatus.Closed),H.addMessage(e),G.emit("chatClosed",e))},hv=({message:e})=>{Gn()&&Oo(Xr),vn(!0,{byVisitor:!0}),H.addMessage(e),G.emit("chatVisitorClosed",e)},pv=({changes:e})=>{e.widgetOptions&&Et.updateGeneralOptions(e.widgetOptions),e.isClosed!==void 0&&vn(e.isClosed),e.virtualAgent!==void 0&&Ct.setVirtualAgent(e.virtualAgent)},gv=async({message:e})=>{const t=E(Eb)&&rs(e);!E(_e)&&ss(e)&&!t?dy(e):await H.addMessage(e),Nl(),e.widgetOptions&&Et.setMessageOptions(e.widgetOptions),t&&Kn(),G.emit("messageReceived",e)},vv=e=>{gv(e)},mv=({messageId:e})=>{H.deleteMessage(e)},yv=({message:e})=>{H.replaceMessage(e),e.widgetOptions&&e.id===E(To)&&Et.setMessageOptions(e.widgetOptions)},bv=({message:e,agent:t})=>{At.addAssignedAgentId(e.content.data.agentId),H.addMessage(e),G.emit("agentJoined",t)},_v=({message:e})=>{At.removeAssignedAgentId(e.content.data.agentId),H.addMessage(e)},wv=({message:e})=>{At.addAssignedAgentId(e.content.data.assigned),H.addMessage(e)},Cv=({message:e})=>{At.removeAssignedAgentId(e.content.data.unassigned),H.addMessage(e)},Av=e=>{!e.typing.is&&E(ko)||So.set(e.typing.is)},Ev=e=>{Hn.set(e.lastReadAt)},Fv=({message:e,rating:t})=>{H.updateMessageRating(e),G.emit("chatRated",t)},Sv=e=>{G.emit("transcriptPdf",e)},kv=({id:e,changes:t})=>{Ct.updateAgent(e,t)},xv=({id:e,status:t})=>{Ct.updateAgent(e,{status:t})},Tv=({status:e})=>{Ll(e)},Ov=e=>{Ye.updateVisitorData(e)},Mv=e=>{G.emit("contactAcquired",e)},Dv=e=>{(Gn()||tf())&&Dn.set(e.ratingSuggestedTarget)},Rv=()=>{E(Dn)&&Dn.set(null)},Bv=({id:e,isActive:t})=>{Dl.updateIdentity(e,{isActive:t})},Iv=async e=>{const t=await x.awaitOptions(),n={data:e,connection:{url:Vp(),socket:t.mock?new jp.SocketMock(t.mock):void 0,balancerUrl:t.balancerUrl,options:{path:"/socket",autoConnect:!1,reconnection:!0}}};return new yo(n)},Pv=()=>{let e=null;const t=()=>!!e,n=()=>{if(!e)throw new Error("Visitor client is not initialized");return e},r=async o=>{const l=await Kp(o);e=await Iv(l),e&&(Lv(e),await e.connect().catch(c=>{Ke("Failed connect to server.",c)}))};return Object.freeze({getClient:n,initClient:r,reloadClient:async(o,l)=>{await(e==null?void 0:e.disconnect()),o&&x.updateOptions({mock:o}),await r(l)},isInitialized:t})},Lv=e=>{e.on("initialized",av),e.on("error",cv),e.on("disconnect",uv),e.on("chat.opened",lv),e.on("chat.served",fv),e.on("chat.closed",dv),e.on("chat.visitor_closed",hv),e.on("chat.updated",pv),e.on("chat.message_received",vv),e.on("chat.message_updated",yv),e.on("chat.message_deleted",mv),e.on("chat.agent_joined",bv),e.on("chat.agent_left",_v),e.on("chat.agent_assigned",wv),e.on("chat.agent_unassigned",Cv),e.on("chat.agent_typing",Av),e.on("chat.contact_read",Ev),e.on("chat.rated",Fv),e.on("chat.rating_suggested",Dv),e.on("chat.rating_cancelled",Rv),e.on("chat.transcript_pdf",Sv),e.on("agent.updated",kv),e.on("agent.status_updated",xv),e.on("account.updated",Tv),e.on("visitor.updated",Ov),e.on("contact.acquired",Mv),e.on("identity.status_updated",Bv)},he=Pv(),$v=()=>{const e=O(null),{subscribe:t,set:n,update:r}=e,i=a=>{n(a)},o=a=>{r(s=>s?{...s,...a}:null)},l=(a,s)=>{try{he.getClient().update({[a]:s})}catch(f){Ke(`Update of visitor property '${a}' failed.`,String(f))}};return{subscribe:t,setVisitorData:i,updateVisitorData:o,updateVisitorProperty:(a,s)=>{if(!E(Ie)){Cr(a,s);return}o({[a]:s}),l(a,s)},updateVisitorVariables:a=>{if(!E(Ie)){Cr("variables",a);return}const s=E(e);if(!s)return;const f=s.variables;o({variables:{...f,...a}});let h={};Object.keys(a).forEach(p=>{a[p]!==f[p]&&(h={...h,[p]:a[p]})}),Object.keys(h).length!==0&&l("variables",h)},updateVisitorContactData:a=>{var p;if(!E(Ie)){Cr("contactData",{properties:a});return}const s=E(e);if(!s)return;const f=(p=s==null?void 0:s.contactData)==null?void 0:p.properties;o({variables:{...f,...a}});let h={};Object.keys(a).forEach(v=>{(!f||a[v]!==f[v])&&(h={...h,[v]:a[v]})}),Object.keys(h).length!==0&&l("contactData",{properties:a})}}},Ye=$v(),Nv=(e,t)=>e.hasOwnProperty(t),Rl=e=>typeof e=="boolean",Bl=e=>typeof e=="number",ts=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),jt=e=>typeof e=="string"||e instanceof String,jc=e=>jt(e)||Bl(e)||Rl(e),qv=e=>{const t={};return Object.keys(e).forEach(n=>{const r=e[n];jc(r)?t[n]=r:ts(r)&&Nv(r,"value")&&jc(r.value)&&(t[n]=r.value)}),t},zv=()=>{const e=O({}),{update:t,subscribe:n,set:r}=e;return{subscribe:n,setAgents:d=>{r(es("id",d))},addAgent:d=>{t(u=>({...u,[d.id]:d}))},updateAgent:(d,u)=>{t(a=>a[d]?{...a,[d]:{...a[d],...u}}:a)},setVirtualAgent:d=>{const{description:u,avatar:a,name:s}=d,f={};u&&(f.description=u),a&&(f.avatar=a),s&&(f.fullname=s),t(h=>(Object.keys(h).forEach(p=>{h[p]={...h[p],...f}}),h))}}},Ct=zv(),pA=e=>M([Ct],([t])=>t[e]??null),jv=M([Ct],([e])=>Object.values(e).filter(t=>!t.disabled)),Uv=M([jv,Ye],([e,t])=>{const n=t==null?void 0:t.group;return!n||n===qp?e:e.filter(r=>r.groups.length===0||r.groups.includes(n))}),Vv=M([Uv],([e])=>e.filter(t=>t.status===re.AgentStatus.Online)),Hv=()=>{const e=O([]),{subscribe:t,set:n,update:r}=e;return{subscribe:t,setAssignedAgentIds:d=>{n(d)},addAssignedAgentId:d=>{r(u=>[...new Set([...u,d])])},removeAssignedAgentId:d=>{r(u=>u.filter(a=>a!==d))},clearAssignedAgentIds:()=>{n([])}}},At=Hv(),Fo=M([At,Ct],([e,t])=>e.map(n=>t[n]).filter(Boolean)),gA=M([Fo],([e])=>e.length>0),Gv=M([Fo],([e])=>e.filter(t=>!t.disabled)),vA=M([Fo],([e])=>e.some(t=>t.status===re.AgentStatus.Online)),Wv=()=>{const e=O({disableAttachments:!1,disableAuthentication:!1,disableInput:!1}),t=O({}),n=o=>{e.update(l=>({...l,...o}))},r=o=>{t.set(o)};return{subscribe:M([e,t],([o,l])=>({...o,...l})).subscribe,updateGeneralOptions:n,setMessageOptions:r}},Et=Wv(),mA=M([Et],([e])=>e.disableAttachments),Ut=O(re.AccountStatus.Offline),Je=O(null),Ti=O(0),So=O(!1),Hn=O(null),Dn=O(null),Il=O(""),Pl=M([Je],([e])=>e===re.ChatStatus.Pending);M([Je],([e])=>e!==null);const Kv=M([Je],([e])=>e===re.ChatStatus.Served),yA=M([Je],([e])=>e===re.ChatStatus.Open),bA=M([Je],([e])=>e===re.ChatStatus.Closed),_A=M([Kv,Ti],([e,t])=>e&&t===0),vn=(e,{byVisitor:t=!1}={})=>{e?Ti.set(t?2:1):Ti.set(0)},Xv=M([Ut,Gv],([e,t])=>t.length===0?e===re.AccountStatus.Online:t.some(n=>n.status===re.AgentStatus.Online)),Zv=M([Et],([e])=>e.disableAuthentication),Yv=()=>{So.set(!1),Je.set(null),vn(!1),Hn.set(null)},Ll=e=>{e===re.AccountStatus.OfflineWithAI?Ut.set(re.AccountStatus.Online):Ut.set(e)},$l=()=>{Hn.set(new Date().toISOString()),he.getClient().chatRead()},Nl=()=>{const e=Lt().visibilityState==="visible";!E(gy)||!E(_e)||!e||$l()},Jv=e=>({...va,chatId:E(Il),createdAt:new Date().toISOString(),content:{...va.content,data:{target:e}}}),wA=()=>{vn(!0,{byVisitor:!0}),he.getClient().chatClose(),Al(),Gn()||Bn()},CA=async e=>{await H.addMessage(Jv(e))},Qv=()=>{H.deleteMessage(Xr)};function mn(e){return e.length===0?null:e[e.length-1]}const em=e=>e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase(),tm=e=>{let t=e,n=0;const r=["B","KB","MB","GB"];for(;t>=1024&&n<r.length-1;)t/=1024,n++;return{size:Math.floor(t),unit:r[n]}},AA=e=>{const t=e.split("."),n=mn(t);return n?n.toUpperCase():Yp},EA=(e,t)=>`${e}?name=${t}`,nm=async(e,t)=>{const n=he.getClient(),r=[];for(const{file:i}of e){const o=await n.chatUploadInit(),l=new FormData;l.append("file",i,i.name);try{if(!(await fetch(o.url,{method:"post",body:l})).ok)throw new Error("Upload failed");r.push(o.token)}catch{Ke(`File [${i.name}] upload failed`),zt(E(oe)("fileUpload.filesWerentProcessed"))}finally{t(i)}}return r},rm=async e=>{const t=he.getClient();try{await t.chatUploadFinish(e)}catch{Ke(`Failed to finish file upload for ${e}`)}},sm=1e3,Oi=6e4,im=36e5,ql=864e5,om=2628e6,am=31536e6,Uc=e=>Math.floor(e/Oi)*Oi,cm=(e,t)=>Uc(new Date(e).getTime())===Uc(new Date(t).getTime()),um=(e,t)=>{const n=new Date(e),r=new Date(t);return n.getDate()===r.getDate()&&n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()},FA=(e,t)=>e.getTime()-t.getTime(),lm=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric"}),fm=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),SA=e=>um(new Date,e)?lm:fm,dm=()=>typeof Intl<"u"&&"RelativeTimeFormat"in Intl,hm=e=>dm()?new Intl.RelativeTimeFormat(e,{numeric:"auto"}):null,pm=[{unit:"year",amount:am},{unit:"month",amount:om},{unit:"day",amount:ql},{unit:"hour",amount:im},{unit:"minute",amount:Oi},{unit:"second",amount:sm}],kA=(e,t)=>{const n=hm(t);if(!n)return X("Relative time format not supported"),"";for(const{unit:r,amount:i}of pm){if(r==="second")return n.format(0,"second");if(Math.abs(e)>i)return n.format(Math.round(e/i),r)}return""},gm=(e,t=300)=>{let n;return(...i)=>{n||(e(...i),n=setTimeout(()=>n=null,t))}},vm=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mm=/[\0-\x1F\x7F-\x9F]/,ym=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,bm=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;function _m(e){const t={};e=e||{},t.src_Any=vm.source,t.src_Cc=mm.source,t.src_Z=bm.source,t.src_P=ym.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Mi(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function ns(e){return Object.prototype.toString.call(e)}function wm(e){return ns(e)==="[object String]"}function Cm(e){return ns(e)==="[object Object]"}function Am(e){return ns(e)==="[object RegExp]"}function Vc(e){return ns(e)==="[object Function]"}function Em(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const zl={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Fm(e){return Object.keys(e||{}).reduce(function(t,n){return t||zl.hasOwnProperty(n)},!1)}const Sm={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},km="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",xm="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function Tm(e){e.__index__=-1,e.__text_cache__=""}function Om(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Hc(){return function(e,t){t.normalize(e)}}function Br(e){const t=e.re=_m(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(km),n.push(t.src_xn),t.src_tlds=n.join("|");function r(c){return c.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function o(c,d){throw new Error('(LinkifyIt) Invalid schema "'+c+'": '+d)}Object.keys(e.__schemas__).forEach(function(c){const d=e.__schemas__[c];if(d===null)return;const u={validate:null,link:null};if(e.__compiled__[c]=u,Cm(d)){Am(d.validate)?u.validate=Om(d.validate):Vc(d.validate)?u.validate=d.validate:o(c,d),Vc(d.normalize)?u.normalize=d.normalize:d.normalize?o(c,d):u.normalize=Hc();return}if(wm(d)){i.push(c);return}o(c,d)}),i.forEach(function(c){e.__compiled__[e.__schemas__[c]]&&(e.__compiled__[c].validate=e.__compiled__[e.__schemas__[c]].validate,e.__compiled__[c].normalize=e.__compiled__[e.__schemas__[c]].normalize)}),e.__compiled__[""]={validate:null,normalize:Hc()};const l=Object.keys(e.__compiled__).filter(function(c){return c.length>0&&e.__compiled__[c]}).map(Em).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Tm(e)}function Mm(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function Di(e,t){const n=new Mm(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function ke(e,t){if(!(this instanceof ke))return new ke(e,t);t||Fm(e)&&(t=e,e={}),this.__opts__=Mi({},zl,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Mi({},Sm,e),this.__compiled__={},this.__tlds__=xm,this.__tlds_replaced__=!1,this.re={},Br(this)}ke.prototype.add=function(t,n){return this.__schemas__[t]=n,Br(this),this};ke.prototype.set=function(t){return this.__opts__=Mi(this.__opts__,t),this};ke.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,o,l,c,d,u,a;if(this.re.schema_test.test(t)){for(d=this.re.schema_search,d.lastIndex=0;(n=d.exec(t))!==null;)if(o=this.testSchemaAt(t,n[2],d.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(l=r.index+r[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(a=t.indexOf("@"),a>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(l=i.index+i[1].length,c=i.index+i[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&c>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=c))),this.__index__>=0};ke.prototype.pretest=function(t){return this.re.pretest.test(t)};ke.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};ke.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Di(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(Di(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};ke.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Di(this,0)):null};ke.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),Br(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Br(this),this)};ke.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};ke.prototype.onCompile=function(){};const jl=JSON.parse('["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"]'),Dm=/^[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/,xA=/((?:www.)?[^\s.]+\.[^\s/]+\/[^\s.]+)/,Gc=/[&<>"']/g,li=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n=RegExp(Gc.source);return e&&n.test(e)?e.replace(Gc,r=>t[r]):e||""},Rm="overflow: hidden; display: -webkit-inline-box; -webkit-box-orient: vertical; -webkit-line-clamp: 1; line-clamp: 1; word-break: break-all;",Bm=new ke().tlds(jl).set({fuzzyIP:!0}),Im=new ke().tlds(jl),Pm=(e,t,n)=>{const r=ne().location.hostname,i=r.length>0&&e.includes(r)?"_parent":"_blank";return`<a href="${e}" target="${i}" rel="noreferrer noopener" title="${e}" style="${n!=null&&n.clamp&&!(n!=null&&n.replaceText)?Rm:""}">${t}</a>`},TA=(e,t)=>{if(e==="")return e;const n=Bm.match(e);if(!n)return li(e);let r="",i=0;return n.forEach(o=>{var a;let l="",c="";const d=Ul(e,o),u=(t==null?void 0:t.clamp)&&o.text.length>30&&!d;o.index>i&&(l=e.substring(i,o.index)),c=Pm(o.url,o.text,{...t,clamp:u}),i=o.lastIndex,d&&(l=l.substring(0,l.length-1),i+=1),u&&!Lm(e,o)&&(c=`
${c}
`,l=l.trimEnd(),(a=e[i])!=null&&a.match(/\s/)&&(i+=1)),r+=li(l)+c}),e.length>i&&(r+=li(e.substring(i))),r},Ul=(e,t)=>e[t.index-1]==='"'&&e[t.lastIndex]==='"',Lm=(e,t)=>!!(t.index<=1&&e.substring(t.lastIndex,t.lastIndex+3).match(/[\n\r]+/)||e.substring(t.index-3,t.index).match(/[\n\r]+/)&&e.substring(t.lastIndex,t.lastIndex+3).match(/[\n\r]+/)||e.substring(t.index-3,t.index).match(/[\n\r]+/)&&t.lastIndex>e.length-3||t.index<=1&&t.lastIndex>=e.length-2),$m=e=>{const t=[...e.matchAll(/\[([^\]]+)\]/g)];return t.length?t.map(n=>n[1]).filter(n=>!n.includes('"')&&!n.includes("'")).join(" "):e.trim()},Vl=e=>{const t=["mailto:","ftp:","//"],n=Im.match($m(e));return n?n.filter(r=>!t.includes(r.schema)):null},Nm=()=>Wr("cards"),qm=e=>{ao({...e},"cards")},zm=async e=>{const t=new Headers,{widgetApiUrl:n}=x.getOptions();t.append("Content-Type","application/json");const r=JSON.stringify({links:e});try{const i=await fetch(`${n}/links/preview`,{method:"POST",headers:t,body:r});return i.ok&&i.json?await i.json():null}catch{return null}},jm=e=>{const t=e.find(n=>n.type==="open_url");return(t==null?void 0:t.value)||""},Um=e=>{const t=e.filter(n=>n.title&&n.image&&!Hm(jm(n.actions)));return t.length&&e.length>1?e:t.length===1?t:[]},Vm=e=>{const t=new Date().getTime();return Object.keys(e).forEach(r=>{(!e[r].expiration||e[r].expiration&&e[r].expiration<t)&&delete e[r]}),e},Hm=e=>{const{acceptedFileExtensions:t}=E(Eo),n=e.match(/(\.)([^.]{3,4})$/m);return n&&n[2]&&t.includes(n[2])},OA=async e=>{try{await he.getClient().linkOpened({url:e})}catch(t){Ke("Sending link opened analytics event failed",String(t))}};let Wc=!1;const Ri=O(),Bi=O(!1),Ii=O(!1),Gm=(e,t,n)=>{const r={},i=new Date().getTime()+ql;e.forEach((l,c)=>r[l]={expiration:i,card:t[c]});const o={...n,...r};Ri.set(o),qm(o)},Wm=async(e,t,n=!1)=>{let r=[];const i={type:"cards",layout:"carousel",items:[]};Wc||(Ri.set(Nm()),Wc=!0);const o=Vl(e);if(!o)return null;const l=Vm(E(Ri)),c=[];if(o.forEach(d=>{Ul(e,d)||(l[d.url]?r.push(l[d.url].card):c.push(d.url))}),c.length>0){t&&Bi.set(!0),n&&Ii.set(!0);const d=await zm(c);d&&(Gm(c,d,l),r=[...r,...d])}return i.items=Um(r),Bi.set(!1),Ii.set(!1),i.items.length>0?i:null};var Ve=(e=>(e.ContactMessage="contact-message",e.AgentMessage="agent-message",e.BotMessage="bot-message",e.BotReplies="bot-replies",e))(Ve||{});const Kc=async({text:e,quickReply:t})=>{try{return await he.getClient().chatMessage({content:{type:T.MessageContentType.Text,text:e},quickReply:t})??null}catch{return null}},rs=e=>e.subType===T.MessageSubType.Bot||e.subType===T.MessageSubType.Trigger,Km=e=>e.subType===T.MessageSubType.System,ss=e=>e.subType===T.MessageSubType.Agent||rs(e),Xm=(e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime(),Hl=(e,t)=>t===Ve.BotReplies?`${e.id}-replies`:e.id,Gl=e=>{const t={isRight:!1,isLeft:!1},n={isPrimary:!1,isSecondary:!1};switch(e){case Ve.ContactMessage:t.isRight=!0,n.isPrimary=!0;break;default:t.isLeft=!0,n.isSecondary=!0}return{align:t,variant:n}},Zm=e=>!!e.agentId||e.subType===T.MessageSubType.Bot&&e.content.type!==T.MessageContentType.TicketForm,Wl=(e,t)=>e.subType===T.MessageSubType.System||t===Ve.BotReplies||e.content.type===T.MessageContentType.TicketForm,Ym=e=>{const t=[];let n=null,r=null;for(const i of e){if(i.content.type===T.MessageContentType.RateForm&&(i.content.data.target===T.RatingTarget.Ai&&!tf()||i.content.data.target===T.RatingTarget.Agent&&!Gn()))continue;n&&!sy(i,n)&&(t.push(n),n=null,r=null),n=n||Jm(i);const o=Xc(i,n);if(r){const c=Zl(r),d=Kl(r);o.neighbors.hasTop=c,d.any.neighbors.hasBottom=c,d.attachmentContext&&(d.attachmentContext.extraSpaces.hasBottom=br(d.attachmentContext.attachment))}const l=ty(i);if(l&&ey(l,o,r),n.messagesContext.push(o),r=o,(rs(i)||Km(i))&&uy(i)){t.push(n);const c=Qm(i);c.messagesContext.push(Xc(i,c)),t.push(c),n=null}}return n&&t.push(n),t},Jm=e=>{const t=Xl(e),n=e.subType===T.MessageSubType.Bot||e.subType===T.MessageSubType.Trigger,{align:r,variant:i}=Gl(t);return{type:t,isBot:n,id:Hl(e,t),date:e.createdAt,agentId:e.agentId,align:r,variant:i,messagesContext:[],showAvatar:Zm(e),useFullWidth:Wl(e,t)}},Qm=e=>{const t=Ve.BotReplies,{align:n,variant:r}=Gl(t);return{type:Ve.BotReplies,isBot:!0,id:Hl(e,t),date:e.createdAt,agentId:e.agentId,align:n,variant:r,messagesContext:[],showAvatar:!1,useFullWidth:Wl(e,t)}},Xc=(e,t)=>({group:t,message:e,neighbors:{hasTop:!1,hasBottom:!1},attachmentsContext:[]}),ey=(e,t,n)=>{let r=null;for(const i of e){const o=Zc(i),l={hasTop:!1,hasBottom:!1},c=br(i),d={hasTop:c,hasBottom:!1};if(r){const a=Zc(r.attachment),s=br(r.attachment);r.neighbors.hasBottom=a&&o,l.hasTop=a&&o,r.extraSpaces.hasBottom=!c&&s}else if(t.neighbors.hasBottom=o,l.hasTop=o,ny(t.message))if(l.hasTop=!1,t.neighbors.hasTop=!1,t.neighbors.hasBottom=!1,n){const a=Zl(n),s=Kl(n);l.hasTop=a&&o,s.any.neighbors.hasBottom=a&&o;const f=s.attachmentContext;f&&(f.extraSpaces.hasBottom=!c&&br(f.attachment))}else d.hasTop=!1;const u={attachment:i,neighbors:l,extraSpaces:d,messageContext:t};t.attachmentsContext.push(u),r={...u}}},Kl=e=>{const t=mn(e.attachmentsContext)||void 0;return{attachmentContext:t,any:t||e}},ty=e=>{var t;return e?((t=e.content)==null?void 0:t.type)===T.MessageContentType.Upload?[e.content.data]:e.attachments:[]},ny=e=>!e.content.text,ry=e=>{try{const t=ne().location.hostname,r=new DOMParser().parseFromString(e,"text/html");return r.querySelectorAll("a[href]").forEach(o=>{let l=o.getAttribute("href")||"";l=l.replace(/^https?:\/\/"?https?:\/\//,"https://"),l=l.replace(/^"+|"+$/g,""),o.setAttribute("href",l);const c=t.length>0&&l.includes(t);o.hasAttribute("target")||o.setAttribute("target",c?"_parent":"_blank"),o.hasAttribute("rel")||o.setAttribute("rel","noopener noreferrer")}),r.body.innerHTML}catch{return e}},sy=(e,t)=>{const n=Xl(e),r=n===Ve.AgentMessage&&e.agentId===t.agentId,i=n===Ve.ContactMessage,o=e.subType!==T.MessageSubType.Bot||(e.content.quickReplies||[]).length===0;return t.type===n&&(r||i)&&o&&cm(t.date,e.createdAt)},Xl=e=>{switch(e.subType){case T.MessageSubType.Agent:return Ve.AgentMessage;case T.MessageSubType.Contact:return Ve.ContactMessage;case T.MessageSubType.Bot:return Ve.BotMessage}return null},Zl=e=>{const t=e.attachmentsContext.length;return!(t>0&&e.attachmentsContext[t-1].attachment.type===T.AttachmentType.File)},Zc=e=>e.type!==T.AttachmentType.File&&e.type!==T.AttachmentType.Cards,br=e=>!!e&&(e.type===T.AttachmentType.File||e.type===T.AttachmentType.Cards),Yl=()=>{const e=hb();e.volume=Op,e.addEventListener("canplaythrough",()=>{e.play().catch(t=>X("Could not play message sound.",t))})},iy=gm(Yl,Mp),oy=e=>e.filter(t=>t.type===T.MessageType.Message&&(t.subType===T.MessageSubType.Agent||t.subType===T.MessageSubType.Contact)),ay=(e,t=!0)=>{const n=e.reduce((r,i)=>(r.push(i),i.content.type===T.MessageContentType.ChatClose||i.content.type===T.MessageContentType.ChatVisitorClose?[]:r),[]);return t?n.filter(r=>r.type===T.MessageType.Message&&r.subType!==T.MessageSubType.System):n},cy=e=>{const t={};return e.forEach(n=>{n.trigger&&(t[n.trigger.id]={sent:!0})}),t},uy=e=>!!(e.content.quickReplies&&e.content.quickReplies.length>0),Pi=async(e,t=!1)=>{var i;const n=ss(e),r=!t&&n;if("html"in e.content&&e.content.html&&(e.content.html=ry(e.content.html)),(i=e.content)!=null&&i.text&&x.getOptions().urlCardsEnabled){const o=await Wm(e.content.text,e.subType===T.MessageSubType.Contact,r);o&&o.items.length>0&&e.attachments.push(o)}return So.set(!1),e},ly=async e=>(x.getOptions().urlCardsEnabled&&await Promise.all(e.map(async t=>await Pi(t))),e),MA=e=>e.findIndex(t=>t.message.channel.type==="email")>-1,DA=e=>{var n,r;const t=e.find(i=>{var o,l;return(l=(o=i.message)==null?void 0:o.trigger)==null?void 0:l.identityId});return(r=(n=t==null?void 0:t.message)==null?void 0:n.trigger)==null?void 0:r.identityId},fy=()=>{const e=O({}),{subscribe:t,update:n,set:r}=e,i=async f=>{r(es("id",await ly(f)))},o=async f=>{const h=await Pi(f);rs(f)&&ko.set(!1),n(p=>({...p,[f.id]:h})),hy(h)},l=async f=>{if(!E(it).some(v=>v.id===f.id))return;const p=E(To)===f.id?await Pi(f,!0):f;n(v=>({...v,[f.id]:p}))};return{subscribe:t,setMessages:i,addMessage:o,deleteMessage:f=>{n(h=>{const{[f]:p,...v}=h;return v})},replaceMessage:l,updateMessageRating:f=>{var h;E(Dn)===((h=f.content.data)==null?void 0:h.target)&&Qv(),n(p=>!f||f.content.type!==T.MessageContentType.RateForm?{...p}:(p[f.id]||Oo(f.id),{...p,[f.id]:f}))},sendMessage:async(f,h)=>{Li.set(f);const p=await Kc({text:f});p&&(Li.set(null),await o(p),G.emit("messageSent",p),C0(E(Ut))),await Promise.all(h.map(v=>rm(v)))},sendBotReply:async(f,h,p)=>{const v=await Kc({text:h,quickReply:{replyTo:f,payload:p}});p.isGoBackButton||t0(h),v&&await l(v)},clearMessages:()=>{r({})}}},H=fy(),dy=e=>{E(Ft)||No(),xb(),setTimeout(()=>{H.addMessage(e),mf()},1600)},hy=e=>{e&&E(Pr)&&E(Ft)&&!(E(vf)&&E(_e))&&pb(e)&&iy()},ko=O(!1),Jl=M([H],([e])=>{const t=Object.values(e).filter(ss);if(!t)return null;const n=t.sort((r,i)=>new Date(r.createdAt).getTime()-new Date(i.createdAt).getTime());return mn(n)}),xo=M([H,Hn],([e,t])=>{const n=Object.values(e).filter(ss);return t?n.filter(r=>new Date(r.createdAt)>new Date(t)):n}),py=M([xo],([e])=>mn(e)),Ql=M([xo],([e])=>e.length),gy=M([Ql],([e])=>e>0),it=M([H],([e])=>Object.values(e).sort(Xm)),RA=M([it],([e])=>Ym(e)),To=M([it],([e])=>{const t=mn(e);return(t==null?void 0:t.id)??null}),BA=M([H],([e])=>{var r;const t=Object.values(e).filter(i=>{var o;return typeof((o=i.widgetOptions)==null?void 0:o.disableInput)=="boolean"}),n=mn(t);return((r=n==null?void 0:n.widgetOptions)==null?void 0:r.disableInput)??!1}),ef=M([H],([e])=>Object.values(e).filter(t=>t.subType==="contact"||t.subType==="agent").length>0),IA=M([H],([e])=>Object.values(e).filter(t=>t.subType===T.MessageSubType.Contact).length>0),PA=M([H,ll],([e,t],n)=>{var r,i,o;if(t){const l=e[t];l&&l.content.type===T.MessageContentType.RateForm&&n({messageId:l.id,value:(r=l.content.data)==null?void 0:r.value,text:(i=l.content.data)==null?void 0:i.text,target:(o=l.content.data)==null?void 0:o.target})}else n(null)}),vy=M([it],([e])=>e.slice().reverse().find(n=>n.subType===T.MessageSubType.Contact)||null),Li=O(null),Gn=()=>!!x.getOptions().ratingEnabled,tf=()=>!!x.getOptions().aiRatingEnabled,Oo=e=>{ll.set(e),wo(Qr.ChatRating)},LA=async({messageId:e,rating:{text:t,value:n},onSuccess:r})=>{const i=E(H)[e],o=e===Xr?void 0:e;try{await he.getClient().chatRate({messageId:o,value:n,text:t??void 0}),r&&r()}catch(l){i&&await H.replaceMessage(i),Ke("Chat rating failed.",String(l)),zt(E(oe)("form.submit.error"))}},$A=e=>{const{widgetV3Url:t}=x.getOptions();return`${t}/assets/images/rating/${e}.svg`},my=/(G-([A-Z,0-9]*))/g,gt=[];let Mo=!1,fe,Do=!1,Rn;const $i=e=>e.match(my),yy=()=>{const{googleAnalyticsEnabled:e}=x.getOptions();fe=window.top||window,e&&(fe.gtag&&(Rn=fe.gtag,Do=!0),G.on("analyticsConsentChanged",by),!Mo&&nl()&&nf())},by=e=>{!Mo&&e&&nf()},nf=()=>{const{gaKey:e,gaOptions:t,googleAnalyticsManual:n,googleAnalyticsMeasurementIds:r}=x.getOptions(),i=t||{cookieDomain:"auto"};if(e)$i(e)&&gt.push({key:e,options:i});else if(n&&r)r.forEach(o=>{$i(o)&&gt.push({key:o,options:i})});else try{gt.push(...rf())}catch(o){const l=o instanceof Error?o.message:o;Be("Error during getting GA top trackers",l)}gt.length>0&&!Do&&_y(),gt.length!==0?(Cy(),Mo=!0,Be("GA initialized")):Be("No GA to setup")},rf=()=>{const e=[];return fe.google_tag_manager&&Object.keys(fe.google_tag_manager).forEach(n=>{$i(n)&&e.push({key:n,options:{cookieDomain:"auto"}})}),e},_y=()=>{const e=fe.document,{head:t}=e,n=e.createElement("script");n.id="gtag",n.type="text/javascript",n.async=!0,n.src="https://www.googletagmanager.com/gtag/js",t.insertBefore(n,t.firstChild),fe.dataLayer=fe.dataLayer||[],fe.gtag=function(){fe.dataLayer.push(arguments)},Rn=fe.gtag,Rn("js",new Date)},wy=()=>{let e=[];if(Do){const t=rf();gt.forEach(n=>{t.find(({key:r})=>r===n.key)||e.push(n)})}else e=[...gt];return e},Cy=()=>{wy().forEach(e=>{const{key:t,options:n}=e;let r={};n?(r={cookie_domain:n.cookieDomain},n.name&&(r.name=n.name)):r={cookie_domain:(fe==null?void 0:fe.location.hostname)||""},Rn("config",t,r)})},Ay=(e,t)=>{const{googleAnalyticsEnabled:n}=x.getOptions();if(!(!n||!fe.gtag||!nl()||fe.document.hidden))try{gt.forEach(r=>{t.send_to=r.key,Rn("event",e,t),Be(`Smartsupp: GA event ${e} - ${JSON.stringify(t)}`)})}catch(r){const i=r instanceof Error?r.message:r;Be("Smartsupp: GA error:",i)}},Ey="Visitor_started_conversation",Fy="Trigger_message_sent",Sy="Trigger_message_viewed",ky="Trigger_visitor_reaction",xy="Auto_message_sent",Ty="Auto_message_viewed",Oy="Auto_message_visitor_reaction",My="Chatbot_sent",Dy="Chatbot_viewed",Ry="Chatbot_interaction",By="Chatbot_button_interaction",Iy="Chatbot_visitor_reaction",Py="Ai_chatbot_interaction",Ly="Ai_chatbot_visitor_reaction",$y="Agent_served_conversation",Ny="Contact_acquired",qy="Auth_form_filled",zy="Offline_message_sent",jy="Feedback_sent",Uy="Feedback_text_sent",Vy="Url_card_opened",Hy={event_category:"Smartsupp_v3",non_interaction:!0},se=(e,t)=>{const n={...Hy,...t};Ay(e,n)},Gy=(e="")=>se(Fy,{event_label:e}),Wy=e=>se(Sy,{event_label:e}),Ky=(e="")=>se(ky,{event_label:e}),Xy=(e="")=>se(xy,{event_label:e}),Zy=e=>se(Ty,{event_label:e}),Yy=(e="")=>se(Oy,{event_label:e}),Jy=(e="")=>se(My,{event_label:e}),Qy=e=>se(Dy,{event_label:e}),e0=(e="")=>se(Ry,{event_label:e}),t0=(e="")=>se(By,{event_label:e}),n0=(e="")=>se(Iy,{event_label:e}),r0=()=>se(Ey),s0=e=>se($y,{event_label:e}),i0=()=>se(qy),o0=()=>se(zy),a0=(e,t)=>{const n={event_label:t||ul[e]||"",value:e};se(t?Uy:jy,n)},c0=e=>se(Ny,{event_label:e}),NA=e=>se(Vy,{event_label:e}),u0=(e="")=>se(Py,{event_label:e}),l0=(e="")=>se(Ly,{event_label:e});let Ni=!1,Ae={};const sf=()=>{Ni=!1},f0=()=>{const e=E(it);Ae=cy(e)},d0=(e,t)=>Ni?!1:ay(e).length===1&&t===T.MessageSubType.Contact?(Ni=!0,!0):!1,h0=(e,t)=>{var r,i;const n=((r=e.trigger)==null?void 0:r.id)||"";return t.subType===T.MessageSubType.Contact&&e.subType===T.MessageSubType.Trigger&&!((i=Ae[n])!=null&&i.visitorResponded)?(Ae[n].visitorResponded=!0,!0):!1},p0=(e,t)=>{var r,i;const n=((r=e.trigger)==null?void 0:r.id)||"";return t.subType===T.MessageSubType.Contact&&!(t.content.quickReplies||t.content.quickReply)&&e.subType===T.MessageSubType.Bot&&!((i=Ae[n])!=null&&i.visitorResponded)&&n?(Ae[n].visitorResponded=!0,!0):!1},g0=(e,t)=>{var r,i,o;const n=((r=e.trigger)==null?void 0:r.id)||"";return t.subType===T.MessageSubType.Contact&&((i=e.trigger)==null?void 0:i.groupType)===T.GroupType.chatbot&&!((o=Ae[n])!=null&&o.reacted)?(Ae[n].reacted=!0,!0):!1},v0=e=>{var n,r,i;const t=((n=e.trigger)==null?void 0:n.id)||"";return((r=e.trigger)==null?void 0:r.groupType)===T.GroupType.ai&&!((i=Ae[t])!=null&&i.reacted)?(Ae[t].reacted=!0,!0):!1},ht=(e,t,n=!1)=>{var r;if(e.length>0&&!n){const i=e.slice(-2).filter(o=>o.trigger);return i?(r=i[i.length-1].trigger)==null?void 0:r.name:""}else return t.trigger?t.trigger.name:""},m0=e=>{const t=E(it);b0(t,e),_0(t,e),d0(t,e.subType)&&r0()},y0=e=>{var i;let t=e;const r=E(it).filter(o=>o.trigger);r&&r.length>0&&(t=((i=r[r.length-1].trigger)==null?void 0:i.name)??e),c0(t)},b0=(e,t)=>{var i,o,l,c,d,u,a,s;const n=((i=t.trigger)==null?void 0:i.id)||"";t.subType===T.MessageSubType.Bot&&!((o=Ae[n])!=null&&o.sent)&&(((l=t.trigger)==null?void 0:l.groupType)===T.GroupType.chatbot&&(Jy(ht(e,t,!0)),Ae[n]={sent:!0}),((c=t.trigger)==null?void 0:c.groupType)===T.GroupType.message&&(Xy(ht(e,t,!0)),Ae[n]={sent:!0}),((d=t.trigger)==null?void 0:d.groupType)===T.GroupType.ai&&(Ae[n]={sent:!0}));const r=e.length>1?e[e.length-2]:void 0;r&&(p0(r,t)?(((u=r.trigger)==null?void 0:u.groupType)===T.GroupType.chatbot&&n0(ht(e,t)),((a=r.trigger)==null?void 0:a.groupType)===T.GroupType.message&&Yy(ht(e,t)),((s=r.trigger)==null?void 0:s.groupType)===T.GroupType.ai&&l0(ht(e,t))):g0(r,t)?e0(ht(e,t)):v0(t)&&u0(ht(e,t)))},_0=(e,t)=>{var r,i;t.subType===T.MessageSubType.Trigger&&(Gy((r=t==null?void 0:t.trigger)==null?void 0:r.name),Ae[((i=t.trigger)==null?void 0:i.id)||""]={sent:!0});const n=e.length>1?e[e.length-2]:void 0;n&&h0(n,t)&&Ky(ht(e,t))},w0=()=>{const e=E(xo).filter(n=>n.trigger),t=e[e.length-1];t&&t.trigger&&(t.subType===T.MessageSubType.Bot&&t.content.quickReplies?Qy(t.trigger.name):t.subType===T.MessageSubType.Bot?Zy(t.trigger.name):t.subType===T.MessageSubType.Trigger&&Wy(t.trigger.name))},C0=e=>{e===re.AccountStatus.Offline&&o0()};G.on("messageReceived",m0);G.on("agentJoined",e=>{s0(e.fullname)});G.on("chatRated",e=>{a0(e.value,e.text)});G.on("chatClosed",()=>{sf()});G.on("chatVisitorClosed",()=>{sf()});G.on("contactAcquired",({acquiredBy:e})=>{y0(e)});Vn.push(f0);const of={Enter:"Enter",Escape:"Escape"},qA=2e3,zA=2e3,af=255,A0=32,jA=500,UA=e=>{const t={};return e.filter(n=>!n.isHidden).reduce((n,r)=>(n[r.name]=r.value,n),t)},VA=e=>{const t={};return e.reduce((n,r)=>(n[r.name]=r.validators,n),t)},HA=(e,t,n)=>{e.update(r=>({...r,[t]:n}))},GA=(e,t)=>{const n={};for(const r in e)n[r]=t;return n},WA=()=>Math.random().toString(36),E0=e=>{if(!e)return!1;const t=e.split("@");if(t.length!==2)return!1;const n=t[0],r=t[1];return n.length>64||r.length>255||r.split(".").some(o=>o.length>63)?!1:Dm.test(e)};var Ht=(e=>(e.Text="text",e.Checkbox="checkbox",e.Select="select",e))(Ht||{});const is=()=>e=>{let t=!0;return e==null&&(t=!1),jt(e)&&(t=e.trim().length>0),{type:"required",isValid:t}},F0=()=>e=>({type:"checked",isValid:jt(e)?e==="true":e===!0}),S0=()=>e=>({type:"email",isValid:E0(String(e))}),k0=()=>e=>({type:"phone",isValid:/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-s./0-9]*$/.test(String(e))}),fi=O(void 0),x0=e=>{const{emailControl:t}=x.getOptions(),n=!!(e!=null&&e.email);return t&&!n},T0=e=>{const{nameControl:t}=x.getOptions(),n=!!(e!=null&&e.name);return t&&!n},O0=e=>{const{numberControl:t}=x.getOptions(),n=!!(e!=null&&e.phone);return!!t&&!n},M0=()=>{const{groupSelectEnabled:e}=x.getOptions(),t=E(El);return!!e&&t.length>0},D0=()=>{const{privacyNoticeEnabled:e,privacyNoticeCheckRequired:t}=x.getOptions(),n=V0();return!!e&&t&&!n},R0=e=>{var r;const{privacyNoticeEnabled:t}=x.getOptions(),n=!!((r=e==null?void 0:e.variables)!=null&&r.personalDataProcessingConsent);return!!t&&!n},B0=()=>({type:Ht.Text,subType:"email",name:"email",label:"authForm.label.email",placeholder:"authForm.yourEmail",value:"",validators:[is(),S0()],maxLength:af}),I0=()=>({type:Ht.Text,subType:"text",name:"name",label:"authForm.label.name",placeholder:"authForm.yourName",value:"",validators:[is()],maxLength:af}),P0=()=>({type:Ht.Text,subType:"tel",name:"phone",label:"authForm.label.phone",placeholder:"authForm.yourPhone",value:"",validators:[is(),k0()],maxLength:A0}),L0=e=>{const t=E(El);return{type:Ht.Select,name:"group",label:"authForm.label.group",placeholder:"authForm.group",value:(e==null?void 0:e.group)??"",validators:[is()],options:t.map(n=>({text:n.name,value:n.key}))}},$0=()=>({type:Ht.Checkbox,name:"personalDataProcessingConsent",label:"authForm.acceptTerms",value:!1,validators:[F0()]}),N0=()=>({type:Ht.Checkbox,name:"personalDataProcessingConsent",label:"topBar.gdprTitle",value:!1,validators:[],isHidden:!0}),cf=e=>({showEmail:x0(e),showName:T0(e),showPhone:O0(e),showGroups:M0(),showConsent:D0()}),q0=e=>({showEmail:!!e.emailControl,showName:!!e.nameControl,showPhone:!!e.numberControl,showGroups:!!e.groupSelectEnabled,showConsent:!!e.privacyNoticeEnabled&&e.privacyNoticeCheckRequired}),z0=e=>Object.values(cf(e)).some(t=>t),KA=(e,t)=>{const n=[],{showEmail:r,showName:i,showPhone:o,showGroups:l,showConsent:c}=t?q0(t):cf(e);return i&&n.push(I0()),r&&n.push(B0()),o&&n.push(P0()),l&&n.push(L0(e)),c?n.push($0()):n.length>0&&(t?t!=null&&t.privacyNoticeEnabled:R0(e))&&n.push(N0()),n},j0=()=>{const e=Xe(j.AuthForm);if(!e)return null;try{return JSON.parse(e)}catch{return null}},XA=(e,t)=>{const n=j0(),r={[e]:t},i=n?{...n,...r}:r;ft({name:j.AuthForm,value:JSON.stringify(i)})},ZA=()=>{tl(j.AuthForm)},U0=()=>{var t;const e=E(Ye);return!!((t=e==null?void 0:e.variables)!=null&&t.authenticated)},V0=()=>{var e;return((e=E(Ye))==null?void 0:e.gdprApproved)||!1},Yc=()=>{const{isPreviewMode:e}=x.getOptions();if(e||E(Zv)||U0())return!1;const t=E(Ye);if(!z0(t))return!1;const{requireLogin:n}=x.getOptions(),r=E(Ut)===re.AccountStatus.Offline,i=E(Vv).length>0;return!!n||r||!r&&!i},YA=async e=>{const{privacyNoticeCheckRequired:t}=x.getOptions(),n=E(Ye),r=(n==null?void 0:n.name)??e.name,i=(n==null?void 0:n.email)??e.email,o=(n==null?void 0:n.phone)??e.phone,l=e.group??(n==null?void 0:n.group),c=e.personalDataProcessingConsent,d={...r&&{name:r},...i&&{email:i},...o&&{phone:o},...l&&{group:l},...c&&t&&{personalDataProcessingConsent:c}};await he.getClient().authenticate(d),i0(),await hf(),Al()},Ro=(e,t=300)=>{let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)}},H0=500,G0=3e3,W0=["smartsupp.dev","smartsuppchat.loc"];var uf=(e=>(e.Default="blackberry2.mp3",e))(uf||{}),mt=(e=>(e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e))(mt||{}),qi=(e=>(e.Image="image",e.Video="video",e))(qi||{});const Bo=O(!1),Jc=O(!1),lf=O(!1);ne().addEventListener("offline",()=>Bo.set(!0));ne().addEventListener("online",()=>Bo.set(!1));const ff=M([Ao,Bo,lf],([e,t,n])=>n?mt.Connected:!e||t?mt.Disconnected:mt.Connected,mt.Connecting);let Cn;const Qc=Ro(e=>{e&&!Cn&&(Cn=Qt(E(oe)("error.noInternet"),0)),!e&&Cn&&(Cn(),Cn=void 0)},G0);ff.subscribe(e=>{e===mt.Disconnected&&(Jc.set(!0),Qc(!0)),e===mt.Connected&&(Jc.set(!1),Qc(!1))});const K0=()=>{const e=E(ff),t=E(ef),n=E(Et);return e===mt.Disconnected||!t||n.disableAttachments},_r=O(!1),JA=e=>{if(E(_r)){X("There is already file upload in progress");return}if(e.length===0)return;const t=X0(e);t.length>0&&$t.add(t)},X0=e=>e.length>Fn?(zt(`${E(oe)("fileUpload.tooManyFiles")} ${Fn}`),[]):e.filter(t=>Z0(t)),Z0=e=>{const{acceptedFileExtensions:t,acceptedFileTypes:n,maxFileSize:r}=E(Eo);if(!e)return!1;const i=t.includes(em(e.name)),o=n.some(l=>l===e.type);if(K0())return X("File upload is disabled"),!1;if(!E(ef))return zt(E(oe)("warningBar.uploadFileNotFirst")),!1;if(e.size>r){const l=tm(r);return zt(`${E(oe)("fileUpload.fileTooBig")} ${l.size} ${l.unit}`),!1}return i||o?!0:(zt(E(oe)("fileUpload.badFileType")),!1)},Y0=()=>$t.count()===0?[]:($t.setUploadingStatus(),nm(E($t),e=>$t.setFileUploaded(e.name))),J0=10,Q0=1e4,eb=3e4,tb=20,zi={":)":"🙂",":-)":"🙂",":D":"😀",":-D":"😀",";)":"😉",";-)":"😉","<3":"❤️",":(":"😞",":-(":"😞",":P":"😛",":-P":"😛",":-o":"😮",":O":"😮",":/":"😕",":-/":"😕"},nb=e=>{const t=`(${e?"$|":""} )`;return new RegExp(Object.keys(zi).map(n=>`${n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}${t}`).join("|"),"gi")},df=(e,t=!1)=>{const n=nb(t);return e.replace(n,r=>{const i=Object.keys(zi).find(l=>r.toUpperCase().includes(l));if(!i)return r;const o=r.endsWith(" ")?" ":"";return`${zi[i]}${o}`})},rb=e=>{if(e.length>0&&e.length%J0===0){const t=e.slice(-10),n=new Date(e[e.length-1].createdAt).getTime();if(new Date().getTime()-n>eb||!t.every(i=>i.subType===T.MessageSubType.Contact))return!1;const r=new Date(t[0].createdAt).getTime();if(n-r<Q0)return!0}return!1},sb=e=>{const t=Vl(e);return t?t.length>tb:!1},Io=O(),Ir=O(!1),QA=O(),ib=200,ob=O(!1),Wn=M([Io],([e])=>typeof e>"u"?Xe(j.Message)??"":e),Po=M([Wn],([e])=>e.trim().length===0),Lo=e=>{Io.set(df(e))},e1=(e,t)=>{const n=E(Wn)??"",r=n.slice(0,t),i=n.slice(t),o=`${r}${e}${i}`;Io.set(o)},t1=()=>{if(E(Ir))return;he.getClient().chatTyping(!0),Ir.set(!0)},ab=()=>{if(!E(Ir))return;he.getClient().chatTyping(!1),Ir.set(!1)},hf=async(e=[])=>{if(E(Po)&&e.length===0)return;const t=df(E(Wn),!0).trim();await H.sendMessage(t,e),Lo(""),ab(),ob.set(!0),$l()},cb=Ro(async()=>{const e=$t.count()>0;if(E(Po)&&!e)return;if(!E(_e)&&Yc()&&Kn(),ub()&&!e){Qt(E(oe)("warningBar.sameMessageTwice"));return}if(rb(E(it))){Qt(E(oe)("warningBar.spamProtection"));return}if(E(_r)){Ke(E(oe)("chat.fileUpload.error.stillUploading"));return}if(E(Bi)){Qt(E(oe)("card.sendingInProgress"));return}if(sb(E(Wn))){Qt(E(oe)("card.linksLimitReached"));return}if(Yc()){wo(Qr.AuthForm);return}let t=[];e&&(_r.set(!0),t=await Y0(),$t.clear(),_r.set(!1)),await hf(t)},ib),ub=()=>{const e=E(vy),t=E(Li),n=E(Wn).trim();return e&&n===e.content.text||t&&n===t},lb=e=>{const t=()=>{Nl()};lt(()=>(e.addEventListener("visibilitychange",t),()=>e.removeEventListener("visibilitychange",t)))},fb=e=>{const t=()=>{E(_e)&&Bn(!0)};lt(()=>(e.addEventListener("popstate",t),()=>e.removeEventListener("popstate",t)))},db=()=>{const e=ne()._smartsupp||{};e.appVersion="0.0.1",e.commitHash="a3c705092be92600c2bca01b2aeb8f962aa96a85",e.commitInfo="a3c705092be92600c2bca01b2aeb8f962aa96a85 - Merge pull request #389 from smartsupp/develop - 2025-09-02 15:56:05 +0200",ne()._smartsupp=e},hb=(e=uf.Default)=>{const{widgetV3Url:t}=x.getOptions(),n=new Audio(`${t}/assets/sounds/${e}`);return n.crossOrigin="anonymous",n.load(),n},pb=e=>e.subType!==T.MessageSubType.Contact&&![T.MessageContentType.RateForm,T.MessageContentType.AgentJoin,T.MessageContentType.AgentLeave,T.MessageContentType.AgentAssign,T.MessageContentType.AgentUnassign].includes(e.content.type),pf=e=>{he.isInitialized()&&he.getClient().notify(e)},gb=()=>{x.getOptions().isPreviewMode||pf(yo.EventName.WidgetOpen)},vb=()=>pf(yo.EventName.WidgetShow),gf=()=>document.visibilityState==="visible",mb=()=>{if(E(st)){ji.set(!0);const e=ne();e.history.pushState(null,"",e.location.href)}},Ie=O(!1),yb=O(!1),ji=O(!1),bb=e=>!!W0.find(t=>e.includes(t)),Pr=O(!0);x.awaitOptions().then(e=>{const t=Xe(j.SoundsEnabled);t?Pr.set(t==="true"):typeof e.enableSounds=="boolean"&&Pr.set(e.enableSounds),yb.set(bb(e.bootstrapUrl))});const n1=e=>{Pr.set(e),ft({name:j.SoundsEnabled,value:e.toString()}),e&&Yl()},vf=O(gf()),_b=Ro(()=>vf.set(gf()),H0);ne().addEventListener("visibilitychange",()=>{_b()});const wb=O(0),r1=()=>wb.update(e=>e+1),Zt=(e,t)=>(Be(`widget visible: ${String(t)} => reason: ${e}`),t&&t!==E(Ft)&&vb(),t),$o=O(),No=()=>$o.set(!0),Cb=()=>$o.set(!1),Ab=M([Ut,it,Po,Pl],([e,t,n,r])=>{const{hideOfflineChat:i,isPreviewMode:o}=x.getOptions();return e===re.AccountStatus.Offline&&!!i&&oy(t).length===0&&n&&!r&&!o}),Ft=M([Ye,st,$o,Je,Pl,Ab],([e,t,n,r,i,o])=>{const{hideMobileWidget:l,hideWidget:c}=x.getOptions();return e!=null&&e.bannedAt?Zt("visitor is banned",!1):t&&l?Zt("option 'hideMobileWidget' is true",!1):typeof n=="boolean"?Zt("set by API command",n):r&&!i?Zt("chat status is not pending",!0):o?Zt("option 'hideOfflineChat' is true",!1):Zt(`option 'hideWidget' is ${String(c)}`,!c)}),Eb=M([st],([e])=>{const{openOnTrigger:t}=x.getOptions();return t&&!e}),_e=al(j.IsMessengerFrameOpened,!1,e=>!E(st)&&e==="true"),Kn=(e=!1)=>{const{widgetBlockingOptions:t}=x.getOptions();t!=null&&t.disableOpenMessenger&&!e||(mb(),_e.set(!0),Tb(),w0(),gb())},Bn=e=>{if(E(st)&&E(ji)&&!e)return ji.set(!1),ne().history.back();G.emit("messengerClose",!0),_e.set(!1)},s1=e=>{if(!e)return;const{widgetBlockingOptions:t}=x.getOptions(),n=r=>{if(r.key===of.Escape){if(t!=null&&t.disableCloseButton)return;Bn()}};return e.addEventListener("keydown",n),{destroy(){e.removeEventListener("keydown",n)}}},Fb=M([Ie,Ft,_e],([e,t,n])=>e&&t&&n);function Sb(){const e=O(!1),{subscribe:t}=e;let n=null;return{subscribe:t,handleDragOver:(o,l=!0)=>{l&&o.preventDefault(),E(e)||e.set(!0),n&&clearTimeout(n),n=window.setTimeout(()=>{e.set(!1)},200)},handleDrop:o=>{var c;o.preventDefault(),n&&clearTimeout(n),e.set(!1);const l=(c=o.dataTransfer)!=null&&c.files?[...o.dataTransfer.files]:[];return l.length===0&&Qt("Dropped item(s) are not processable files"),{droppedFiles:l}}}}const i1=Sb(),kb=M([Ie,Ft,_e],([e,t,n])=>e&&t&&!n),qo=O(!1),os=O(!1),xb=()=>{qo.set(!0),os.set(!1)},mf=()=>{os.set(!0),qo.set(!1)},Tb=(e=!1)=>{os.set(!1),e&&ft({name:j.PopupClosedAt,value:new Date().toISOString()})},yf=M([st],([e])=>{const{mobilePopupsEnabled:t}=x.getOptions();return e?!!t:!0}),Ob=M([Jl],([e])=>{const t=Xe(j.PopupClosedAt)??null;if(!t||!e)return!0;const n=new Date(e.createdAt).getTime(),r=new Date(t).getTime();return n>r}),Mb=M([Ie,Ft,qo,_e,yf],([e,t,n,r,i])=>e&&t&&n&&!r&&i),Db=M([Ie,Ft,os,_e,Jl,Ob,yf,Ii],([e,t,n,r,i,o,l,c])=>e&&t&&n&&i&&o&&!r&&l&&!c),ln={white:"#ffffff",slate300:"#cbd5e1",slate900:"#0f172a",smartsuppBlue:"#1233df"};function le(e,t){Rb(e)&&(e="100%");const n=Bb(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function hr(e){return Math.min(1,Math.max(0,e))}function Rb(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Bb(e){return typeof e=="string"&&e.indexOf("%")!==-1}function bf(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function pr(e){return Number(e)<=1?`${Number(e)*100}%`:e}function Nt(e){return e.length===1?"0"+e:String(e)}function Ib(e,t,n){return{r:le(e,255)*255,g:le(t,255)*255,b:le(n,255)*255}}function eu(e,t,n){e=le(e,255),t=le(t,255),n=le(n,255);const r=Math.max(e,t,n),i=Math.min(e,t,n);let o=0,l=0;const c=(r+i)/2;if(r===i)l=0,o=0;else{const d=r-i;switch(l=c>.5?d/(2-r-i):d/(r+i),r){case e:o=(t-n)/d+(t<n?6:0);break;case t:o=(n-e)/d+2;break;case n:o=(e-t)/d+4;break}o/=6}return{h:o,s:l,l:c}}function di(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Pb(e,t,n){let r,i,o;if(e=le(e,360),t=le(t,100),n=le(n,100),t===0)i=n,o=n,r=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=di(c,l,e+1/3),i=di(c,l,e),o=di(c,l,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function tu(e,t,n){e=le(e,255),t=le(t,255),n=le(n,255);const r=Math.max(e,t,n),i=Math.min(e,t,n);let o=0;const l=r,c=r-i,d=r===0?0:c/r;if(r===i)o=0;else{switch(r){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4;break}o/=6}return{h:o,s:d,v:l}}function Lb(e,t,n){e=le(e,360)*6,t=le(t,100),n=le(n,100);const r=Math.floor(e),i=e-r,o=n*(1-t),l=n*(1-i*t),c=n*(1-(1-i)*t),d=r%6,u=[n,l,o,o,c,n][d],a=[c,n,n,l,o,o][d],s=[o,o,c,n,n,l][d];return{r:u*255,g:a*255,b:s*255}}function nu(e,t,n,r){const i=[Nt(Math.round(e).toString(16)),Nt(Math.round(t).toString(16)),Nt(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function $b(e,t,n,r,i){const o=[Nt(Math.round(e).toString(16)),Nt(Math.round(t).toString(16)),Nt(Math.round(n).toString(16)),Nt(qb(r))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Nb(e,t,n,r){const i=e/100,o=t/100,l=n/100,c=r/100,d=255*(1-i)*(1-c),u=255*(1-o)*(1-c),a=255*(1-l)*(1-c);return{r:d,g:u,b:a}}function ru(e,t,n){let r=1-e/255,i=1-t/255,o=1-n/255,l=Math.min(r,i,o);return l===1?(r=0,i=0,o=0):(r=(r-l)/(1-l)*100,i=(i-l)/(1-l)*100,o=(o-l)/(1-l)*100),l*=100,{c:Math.round(r),m:Math.round(i),y:Math.round(o),k:Math.round(l)}}function qb(e){return Math.round(parseFloat(e)*255).toString(16)}function su(e){return Oe(e)/255}function Oe(e){return parseInt(e,16)}function zb(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}const Ui={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function jb(e){let t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,l=!1,c=!1;return typeof e=="string"&&(e=Hb(e)),typeof e=="object"&&(Te(e.r)&&Te(e.g)&&Te(e.b)?(t=Ib(e.r,e.g,e.b),l=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Te(e.h)&&Te(e.s)&&Te(e.v)?(r=pr(e.s),i=pr(e.v),t=Lb(e.h,r,i),l=!0,c="hsv"):Te(e.h)&&Te(e.s)&&Te(e.l)?(r=pr(e.s),o=pr(e.l),t=Pb(e.h,r,o),l=!0,c="hsl"):Te(e.c)&&Te(e.m)&&Te(e.y)&&Te(e.k)&&(t=Nb(e.c,e.m,e.y,e.k),l=!0,c="cmyk"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=bf(n),{ok:l,format:e.format||c,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}const Ub="[-\\+]?\\d+%?",Vb="[-\\+]?\\d*\\.\\d+%?",yt="(?:"+Vb+")|(?:"+Ub+")",hi="[\\s|\\(]+("+yt+")[,|\\s]+("+yt+")[,|\\s]+("+yt+")\\s*\\)?",gr="[\\s|\\(]+("+yt+")[,|\\s]+("+yt+")[,|\\s]+("+yt+")[,|\\s]+("+yt+")\\s*\\)?",Pe={CSS_UNIT:new RegExp(yt),rgb:new RegExp("rgb"+hi),rgba:new RegExp("rgba"+gr),hsl:new RegExp("hsl"+hi),hsla:new RegExp("hsla"+gr),hsv:new RegExp("hsv"+hi),hsva:new RegExp("hsva"+gr),cmyk:new RegExp("cmyk"+gr),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Hb(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(Ui[e])e=Ui[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let n=Pe.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Pe.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Pe.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Pe.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Pe.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Pe.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Pe.cmyk.exec(e),n?{c:n[1],m:n[2],y:n[3],k:n[4]}:(n=Pe.hex8.exec(e),n?{r:Oe(n[1]),g:Oe(n[2]),b:Oe(n[3]),a:su(n[4]),format:t?"name":"hex8"}:(n=Pe.hex6.exec(e),n?{r:Oe(n[1]),g:Oe(n[2]),b:Oe(n[3]),format:t?"name":"hex"}:(n=Pe.hex4.exec(e),n?{r:Oe(n[1]+n[1]),g:Oe(n[2]+n[2]),b:Oe(n[3]+n[3]),a:su(n[4]+n[4]),format:t?"name":"hex8"}:(n=Pe.hex3.exec(e),n?{r:Oe(n[1]+n[1]),g:Oe(n[2]+n[2]),b:Oe(n[3]+n[3]),format:t?"name":"hex"}:!1))))))))))}function Te(e){return typeof e=="number"?!Number.isNaN(e):Pe.CSS_UNIT.test(e)}class ${constructor(t="",n={}){if(t instanceof $)return t;typeof t=="number"&&(t=zb(t)),this.originalInput=t;const r=jb(t);this.originalInput=t,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=n.format??r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){const t=this.toRgb();let n,r,i;const o=t.r/255,l=t.g/255,c=t.b/255;return o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),l<=.03928?r=l/12.92:r=Math.pow((l+.055)/1.055,2.4),c<=.03928?i=c/12.92:i=Math.pow((c+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i}getAlpha(){return this.a}setAlpha(t){return this.a=bf(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:t}=this.toHsl();return t===0}toHsv(){const t=tu(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=tu(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?`hsv(${n}, ${r}%, ${i}%)`:`hsva(${n}, ${r}%, ${i}%, ${this.roundA})`}toHsl(){const t=eu(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=eu(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?`hsl(${n}, ${r}%, ${i}%)`:`hsla(${n}, ${r}%, ${i}%, ${this.roundA})`}toHex(t=!1){return nu(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return $b(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const t=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?`rgb(${t}, ${n}, ${r})`:`rgba(${t}, ${n}, ${r}, ${this.roundA})`}toPercentageRgb(){const t=n=>`${Math.round(le(n,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=n=>Math.round(le(n,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toCmyk(){return{...ru(this.r,this.g,this.b)}}toCmykString(){const{c:t,m:n,y:r,k:i}=ru(this.r,this.g,this.b);return`cmyk(${t}, ${n}, ${r}, ${i})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const t="#"+nu(this.r,this.g,this.b,!1);for(const[n,r]of Object.entries(Ui))if(t===r)return n;return!1}toString(t){const n=!!t;t=t??this.format;let r=!1;const i=this.a<1&&this.a>=0;return!n&&i&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),t==="cmyk"&&(r=this.toCmykString()),r||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new $(this.toString())}lighten(t=10){const n=this.toHsl();return n.l+=t/100,n.l=hr(n.l),new $(n)}brighten(t=10){const n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new $(n)}darken(t=10){const n=this.toHsl();return n.l-=t/100,n.l=hr(n.l),new $(n)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){const n=this.toHsl();return n.s-=t/100,n.s=hr(n.s),new $(n)}saturate(t=10){const n=this.toHsl();return n.s+=t/100,n.s=hr(n.s),new $(n)}greyscale(){return this.desaturate(100)}spin(t){const n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new $(n)}mix(t,n=50){const r=this.toRgb(),i=new $(t).toRgb(),o=n/100,l={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return new $(l)}analogous(t=6,n=30){const r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new $(r));return o}complement(){const t=this.toHsl();return t.h=(t.h+180)%360,new $(t)}monochromatic(t=6){const n=this.toHsv(),{h:r}=n,{s:i}=n;let{v:o}=n;const l=[],c=1/t;for(;t--;)l.push(new $({h:r,s:i,v:o})),o=(o+c)%1;return l}splitcomplement(){const t=this.toHsl(),{h:n}=t;return[this,new $({h:(n+72)%360,s:t.s,l:t.l}),new $({h:(n+216)%360,s:t.s,l:t.l})]}onBackground(t){const n=this.toRgb(),r=new $(t).toRgb(),i=n.a+r.a*(1-n.a);return new $({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){const n=this.toHsl(),{h:r}=n,i=[this],o=360/t;for(let l=1;l<t;l++)i.push(new $({h:(r+l*o)%360,s:n.s,l:n.l}));return i}equals(t){const n=new $(t);return this.format==="cmyk"||n.format==="cmyk"?this.toCmykString()===n.toCmykString():this.toRgbString()===n.toRgbString()}}function iu(e,t){const n=new $(e),r=new $(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)}const Gb=.299,Wb=.587,Kb=.114,Xb=180,Zb=-20,Yb=-.25,Jb=.2,Qb=-5,e_=.03,t_=.5,ou=5,wr=(e,t)=>new $(e).darken(t).toHexString(),n_=e=>{const t=new $(e).toRgb();return`${t.r}, ${t.g}, ${t.b}`},Lr=e=>/^#[0-9A-F]{6}$/i.test(e),as=e=>{const{r:t,g:n,b:r}=new $(e).toRgb();return Math.sqrt(Gb*(t*t)+Wb*(n*n)+Kb*(r*r))>Xb},r_=e=>{const t=new $(e),{s:n,l:r}=t.toHsl();return t.spin(Zb).desaturate(n*Yb).lighten(r*Jb).toHexString()},s_=(e,t=t_)=>{const n=new $(e),{s:r,l:i}=n.toHsl();return n.spin(Qb).saturate(r*e_).darken(i*t).toHexString()},i_=e=>{const{color:t,color2:n,colorGradient:r}=e;return r?n?{from:t,to:n}:as(t)?{from:t,to:s_(t)}:{from:r_(t),to:t}:{from:t,to:t}},o_=e=>as(e)?ln.slate900:ln.white,a_=e=>as(e)?.1:.2,c_=e=>{if(as(e)){const t=new $(e).getLuminance();return t>.8?wr(e,Math.pow(10*t,t)):e}return e},Yt=(e,t)=>{const i=(t==null?void 0:t.backgroundColor)??e;let o=0,l=new $(e),c=iu(i,l);const d=(t==null?void 0:t.forceLightBg)??new $(i).isLight();for(;c<3.75&&o<20;)l=d?l.darken(5):l.lighten(5),c=iu(i,l),o++;return l.toHexString()},u_=(e,t)=>{const n=Yt(e,{backgroundColor:ln.white});let r=Yt(e);const i=new $(e).isLight(),o=new $(t).isLight();return i&&o?r=Yt(t):!i&&!o?r=Yt(e):i&&!o?r=Yt(t,{forceLightBg:!0}):!i&&o&&(r=Yt(e,{forceLightBg:!1})),{primary:n,secondary:r}},ge=(e,t,n)=>{e.documentElement.style.setProperty(t,n)},l_=(e,t)=>{const{color:n}=t,r=i_(t),i=r.from==="#ffffff"&&r.from===r.to?{from:ln.slate300,to:ln.slate300}:r,o=o_(n);ge(e,"--color-primary",n),ge(e,"--color-primary-content",o),ge(e,"--color-primary-content-rgb",n_(o)),ge(e,"--color-primary-gradient-from",r.from),ge(e,"--color-primary-gradient-to",r.to),ge(e,"--color-primary-gradient-button-from",i.from),ge(e,"--color-primary-gradient-button-to",i.to),ge(e,"--color-primary-gradient-hover-from",wr(r.from,ou)),ge(e,"--color-primary-gradient-hover-to",wr(r.to,ou));const l=c_(n);ge(e,"--color-primary-button",l),ge(e,"--color-primary-button-hover",wr(l,10)),ge(e,"--color-primary-button-content",o),ge(e,"--opacity-primary-content",String(a_(n)));const c=u_(r.from,r.to);ge(e,"--color-primary-focus",c.primary),ge(e,"--color-secondary-focus",c.secondary)},f_=()=>{const e=O({color:ln.smartsuppBlue,color2:null,colorGradient:!0}),{subscribe:t,set:n}=e;return{subscribe:t,setThemeColor:i=>{const{color:o,color2:l,colorGradient:c}=i;if(Lr(o)){if(c&&l&&!Lr(l)){X(`Provided color '${l}' is not valid. Default color will be used instead.`);return}}else{X(`Provided color '${o}' is not valid. Default color will be used instead.`);return}n({color:o,color2:l,colorGradient:c})}}},zo=f_(),_f=24,wf=12,d_=300,Cf=56,Af=Cf,h_=166,p_=Af+16,g_=380,v_=672,m_=12,y_=560,b_=840,__=114,w_=68,o1=M([cl],([e])=>e?w_:__),qe=e=>`${e}px`,Ef=e=>{if(e)return jt(e)?parseInt(e,10):e},C_=(e,t)=>{const{widgetBlockingOptions:n}=x.getOptions();return e||n!=null&&n.headlessMode?{width:"100%",height:"100%"}:t?{width:y_,height:b_}:{width:g_,height:v_}},A_=e=>{const{widgetBlockingOptions:t}=x.getOptions();e.style.borderRadius=qe(m_),t!=null&&t.headlessMode?e.style.boxShadow="none":t!=null&&t.limitShadow?e.style.boxShadow="rgba(0, 0, 0, 0.25) 0px 5px 12px":e.style.boxShadow="rgba(0, 0, 0, 0.16) 0px 5px 40px"},Ff=()=>{const{offsetY:e}=x.getOptions();return Ef(e)??_f},Sf=()=>{const{offsetX:e}=x.getOptions();return Ef(e)??wf},E_=e=>{const{widgetBlockingOptions:t}=x.getOptions();return e||t!=null&&t.headlessMode?0:_f},F_=e=>{const{widgetBlockingOptions:t}=x.getOptions();return e||t!=null&&t.headlessMode?0:wf},jo=()=>{const{position:e}=x.getOptions();return e==="fixed"},Uo=e=>{jo()&&(e.style.position="fixed")},cs=(e,t)=>{jo()&&(e.style.bottom=qe(t))},us=(e,t)=>{if(jo()){const{orientation:n}=x.getOptions();n==="right"?(e.style.left="initial",e.style.right=qe(t)):(e.style.left=qe(t),e.style.right="initial")}},ls=e=>{const{zIndex:t}=x.getOptions();e.style.zIndex=String(t??"auto")},Xn=e=>{const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.border="none",t.style.display="block",t.style.textAlign="left",t.style.margin="0",t.style.padding="0",t.style.top="0",t.style.left="0",t.style.opacity="1",e&&e(t),t.getAttribute("style")??""},S_=e=>{Uo(e),cs(e,Ff()),us(e,Sf()),ls(e)},k_=(e,t)=>{Uo(e),cs(e,E_(t)),us(e,F_(t)),ls(e),t||A_(e)},kf=e=>{Uo(e),cs(e,Ff()+p_),us(e,Sf()),ls(e)},x_=e=>{e.style.position="fixed",e.style.width="100%",e.style.height="100%",cs(e,0),us(e,0),ls(e)},pi=e=>{S_(e)},gi=(e,t)=>{k_(e,t)},vi=e=>{kf(e)},mi=e=>{kf(e)},yi=e=>{x_(e)},xf=O(d_),T_=O(h_),O_=O(!1),Tf=O(void 0),Vo=M([st,Tf],([e,t])=>{const{buttonStyle:n}=x.getOptions();return t?t==="bubble":e||n==="bubble"}),M_=M([Vo,xf],([e,t])=>e?Cf:t),Of=O(),D_=M([Of],([e])=>typeof e>"u"?Xe(j.IsMessengerFrameExpanded)==="true":e),a1=e=>{ft({name:j.IsMessengerFrameExpanded,value:e.toString()}),Of.set(e)};var L=(e=>(e.Name="name",e.Group="group",e.Email="email",e.Phone="phone",e.Variables="variables",e.ContactData="contactData",e.Language="language",e.ChatClose="chat:close",e.ChatOpen="chat:open",e.ChatShow="chat:show",e.ChatHide="chat:hide",e.ThemeColor="theme:color",e.ChatMessage="chat:message",e.ChatSend="chat:send",e.HtmlApply="html:apply",e.On="on",e.AnalyticsConsent="analyticsConsent",e.MarketingConsent="marketingConsent",e.OpenRateForm="openRateForm",e.OpenAuthForm="openAuthForm",e.WidgetStatus="widgetStatus",e.Translations="translations",e.AuthFormFields="authFormFields",e.ButtonStyle="buttonStyle",e.PreviewTranslate="previewTranslate",e.DisableConnectionStatus="disableConnectionStatus",e.ReloadWithMockData="reloadWithMockData",e.Reload="reload",e))(L||{}),en=(e=>(e.MessageSent="message_sent",e.MessageReceived="message_received",e.MessengerClose="messenger_close",e.WidgetInit="widget_init",e))(en||{});const R_=e=>{G.on("messageSent",e)},B_=e=>{G.on("messageReceived",e)},I_=e=>{G.on("messengerClose",e)},P_=e=>{G.on("widgetInit",e)},L_={[en.MessageSent]:R_,[en.MessageReceived]:B_,[en.MessengerClose]:I_,[en.WidgetInit]:P_},$_=(e,t)=>{const n=L_[e];n&&n(t)},St="https://docs.smartsupp.com/chat-box/",N_=`${St}localization/#supported-languages`,q_=`${St}visitor-identification/#custom-visitor-data`,z_=`${St}visitor-identification/#custom-contact-data`,j_=`${St}javascript-api/events/`,U_="https://www.smartsupp.com/help/cookie-consent/#where-to-enable-cookie-consent-in-smartsupp",Mf="https://www.smartsupp.com/pricing",Ho=O({}),Cr=(e,t)=>{Ho.update(n=>({...n,[e]:t}))},V_=e=>Object.values(L).some(t=>t===e),dt=(e,t)=>jt(t)?!0:(X(`Parameter of '${e}' API command must be type string. See ${St} for more information.`),!1),Zn=(e,t)=>Rl(t)?!0:(X(`Parameter of '${e}' API command must be type boolean. See ${St} for more information.`),!1),H_=(e,t)=>typeof t!="function"?(X(`Parameter of '${e}' API command must be type function. See ${St} for more information.`),!1):!0,fs=(e,t)=>ts(t)?!0:(X(`Parameter of '${e}' API command must be type object. See ${q_} for more information.`),!1),G_=(e,t)=>ts(t)?!0:(X(`Parameter of '${e}' API command must be type object. See ${z_} for more information.`),!1),W_=(e,t)=>ts(t)?!0:(X(`Parameter of '${e}' API command must be type object.`),!1),K_=(e,t)=>{const n=Object.values(en);return n.includes(t)?!0:(X(`Unknown event: '${t}'. Available event names are: ${n.join(", ")}. See ${j_} for more information.`),!1)},Df=e=>{X(`Unknown API command: '${e}'. See ${St} to check available API commands.`)},Rf=()=>{var e;return!!((e=x.getOptions().features)!=null&&e.api)},X_=()=>{var e;return!!((e=x.getOptions().features)!=null&&e.groups)},Z_=()=>x.getOptions().isPreviewMode,Gt=()=>!Rf()&&!Z_()?(X(`Chat box API feature is not enabled. See ${Mf} to upgrade your package.`),!1):!0,Y_=()=>!Rf()||!X_()?(X(`Chat box Groups feature is not enabled. See ${Mf} to upgrade your package.`),!1):!0,Bf=()=>{co()||X(`Enable managing cookie consent in widget settings to allow this command. See ${U_} for more information.`)},J_=()=>{const e=()=>{Kn(!0),No()};if(!E(Ie)){Vn.push(e);return}e()},Q_=()=>{if(Gt()){if(!E(Ie)){Vn.push(Bn);return}Bn()}},ew=()=>{Gt()&&No()},tw=()=>{Gt()&&Cb()},nw=(e,t)=>{if(Gt()&&e===L.Language&&dt(e,t)){if(!Ol(t)){X(`Provided language '${t}' is not supported. See ${N_} to check supported languages.`);return}if(!E(Ie)){Cr("lang",t);return}Jg(t)}},rw=(e,t)=>{let n,r=null,i=!0;if(Gt()){if(typeof t=="string"&&dt(e,t))n=t;else if(fs(e,t)){if(n=t.color,r=t.color2,i=t.colorGradient,!Zn(e,i))return}else return;if(Lr(n)){if(i&&r&&!Lr(r)){X(`Provided color '${r}' is not valid. Default color will be used instead.`);return}}else{X(`Provided color '${n}' is not valid. Please use hex color code.`);return}zo.setThemeColor({color:n,color2:r,colorGradient:i})}},sw=(e,t)=>{Gt()&&dt(e,t)&&Lo(t)},iw=(e,t)=>{Gt()&&dt(e,t)&&(Lo(t),cb())},ow=(e,t,n)=>{dt(e,t)&&K_(e,t)&&H_(e,n)&&$_(t,n)},aw=(e,t)=>{fs(e,t)&&Ye.updateVisitorVariables(qv(t))},Ar=(e,t)=>{e!==L.Name&&e!==L.Email&&e!==L.Phone&&e!==L.Group||dt(e,t)&&Ye.updateVisitorProperty(e,t)},cw=(e,t)=>{if(!Y_()||!dt(e,t))return;const n=E(Co)[t];if(E(Ie)&&!n){X(`Group with key '${t}' does not exist. Please provide correct group key from your group settings.`);return}Ar(e,t)},uw=(e,t)=>{G_(e,t)&&Ye.updateVisitorContactData(t)},lw=(e,t)=>{Zn(e,t)&&(Bf(),G.emit("analyticsConsentChanged",!!t))},fw=(e,t)=>{Zn(e,t)&&(Bf(),G.emit("marketingConsentChanged",!!t))},dw=()=>{Oo(E(To)||"")},hw=()=>{wo(Qr.AuthForm)},pw=(e,t)=>{dt(e,t)&&(t!==re.AccountStatus.Online&&t!==re.AccountStatus.Offline||Ut.set(t))},gw=(e,t)=>{fs(e,t)&&ev(t)},vw=(e,t)=>{fs(e,t)&&(E(fi)||fi.set(x.getOptions()),fi.update(n=>({...n,...t})))},mw=(e,t)=>{dt(e,t)&&Tf.set(t)},yw=()=>{let e=()=>{};e=Un.subscribe(()=>{E(it).forEach(t=>{var r;const n=((r=t.content)==null?void 0:r.data)||"";typeof n=="string"&&n.match(/widgetPreview\..*/)&&(t.content.text=E(oe)(n),H.replaceMessage(t))}),e()})},bw=(e,t)=>{Zn(e,t)&&lf.set(t)},_w=(e,t)=>{W_(e,t)&&he.reloadClient(t)},ww=(e,t)=>{Zn(e,t)&&he.reloadClient(void 0,t)},Cw={version:"a3c705092be92600c2bca01b2aeb8f962aa96a85",execute:e=>{const t=e[0];if(typeof t=="function"){Fw(t);return}if(!V_(t)){Df(String(t));return}Ew(t,e[1],...e.slice(2))},exec:function(...e){this.execute(e)}},Aw={[L.ChatOpen]:J_,[L.ChatClose]:Q_,[L.ChatShow]:ew,[L.ChatHide]:tw,[L.ChatMessage]:sw,[L.ChatSend]:iw,[L.Language]:nw,[L.ThemeColor]:rw,[L.On]:ow,[L.Variables]:aw,[L.ContactData]:uw,[L.Name]:Ar,[L.Group]:cw,[L.Email]:Ar,[L.Phone]:Ar,[L.AnalyticsConsent]:lw,[L.MarketingConsent]:fw,[L.HtmlApply]:null,[L.OpenRateForm]:dw,[L.OpenAuthForm]:hw,[L.WidgetStatus]:pw,[L.Translations]:gw,[L.AuthFormFields]:vw,[L.ButtonStyle]:mw,[L.PreviewTranslate]:yw,[L.DisableConnectionStatus]:bw,[L.ReloadWithMockData]:_w,[L.Reload]:ww},Ew=(e,t,...n)=>{const r=Aw[e];if(r===void 0){Df(e);return}r!==null&&(r(e,t,...n),Be(`🧙‍♂️[API] ${e}${t?":":""}`,t??""))},Fw=e=>{E(Ie)?e():Vn.push(e)},Sw="5";var uu;typeof window<"u"&&((uu=window.__svelte??(window.__svelte={})).v??(uu.v=new Set)).add(Sw);var kw=Z("<div><!></div>");function xw(e,t){ae(t,!0);let n=te(null);const r=`${ne().SMARTSUPP_AUTOCREATE!==!1?"smartsupp":io(window).id}-widget-container`;lt(()=>{k(n)&&Lt().body.appendChild(k(n))}),Yu(()=>{var l;(l=Lt().getElementById(r))==null||l.remove()});var i=kw();K(i,"id",r);var o=R(i);Or(o,()=>t.children??de),gn(i,l=>N(n,l),()=>k(n)),I(e,i),ce()}const Tw=e=>e;function Go(e){const t=e-1;return t*t*t+1}function au(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Ow(e,{delay:t=0,duration:n=400,easing:r=Tw}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function Ze(e,{delay:t=0,duration:n=400,easing:r=Go,x:i=0,y:o=0,opacity:l=0}={}){const c=getComputedStyle(e),d=+c.opacity,u=c.transform==="none"?"":c.transform,a=d*(1-l),[s,f]=au(i),[h,p]=au(o);return{delay:t,duration:n,easing:r,css:(v,g)=>`
			transform: ${u} translate(${(1-v)*s}${f}, ${(1-v)*h}${p});
			opacity: ${d-a*g}`}}function c1(e,{delay:t=0,duration:n=400,easing:r=Go,axis:i="y"}={}){const o=getComputedStyle(e),l=+o.opacity,c=i==="y"?"height":"width",d=parseFloat(o[c]),u=i==="y"?["top","bottom"]:["left","right"],a=u.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),s=parseFloat(o[`padding${a[0]}`]),f=parseFloat(o[`padding${a[1]}`]),h=parseFloat(o[`margin${a[0]}`]),p=parseFloat(o[`margin${a[1]}`]),v=parseFloat(o[`border${a[0]}Width`]),g=parseFloat(o[`border${a[1]}Width`]);return{delay:t,duration:n,easing:r,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*l};${c}: ${m*d}px;padding-${u[0]}: ${m*s}px;padding-${u[1]}: ${m*f}px;margin-${u[0]}: ${m*h}px;margin-${u[1]}: ${m*p}px;border-${u[0]}-width: ${m*v}px;border-${u[1]}-width: ${m*g}px;min-${c}: 0`}}function Wo(e,{delay:t=0,duration:n=400,easing:r=Go,start:i=0,opacity:o=0}={}){const l=getComputedStyle(e),c=+l.opacity,d=l.transform==="none"?"":l.transform,u=1-i,a=c*(1-o);return{delay:t,duration:n,easing:r,css:(s,f)=>`
			transform: ${d} scale(${1-u*f});
			opacity: ${c-a*f}
		`}}var Mw=Z('<iframe allowfullscreen="" scrolling="no"></iframe>');function Yn(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(zo,"$themeColor",n);let o=te(void 0),l=te(null),c;nt(()=>{k(l)&&d(k(l))}),nt(()=>{k(l)&&u(i())});const d=async p=>{c&&await sa(c),p&&t.component&&(c=Vu(t.component,{target:p.body}))},u=p=>{k(l)&&l_(k(l),p)},a=p=>{if(!k(l))return;const v=k(l).createElement("style");return v.textContent=p,k(l).head.appendChild(v),v},s=()=>{for(const p of window.document.styleSheets){let v="";try{v=[...p.cssRules].map(m=>m.cssText).join("")}catch{continue}if(!a(v))return}},f=()=>{!k(o)||!k(o).contentDocument||(N(l,k(o).contentDocument,!0),s())};lt(async()=>{var p,v;await Md(),(p=k(o))!=null&&p.contentDocument&&k(o).contentDocument.readyState==="complete"&&k(o).contentDocument.defaultView?f():(v=k(o))==null||v.addEventListener("load",f)}),Yu(async()=>{k(o)&&k(o).removeEventListener("load",f),c&&await sa(c)});var h=Mw();gn(h,p=>N(o,p),()=>k(o)),ie(()=>{K(h,"id",t.id),K(h,"title",t.title),$e(h,t.frameStyle)}),I(e,h),ce(),r()}td();var Dw=Uu('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" fill="currentColor" preserveAspectRatio="xMidYMid meet"><path d="M63.113,18.51v-.16C60.323,7.05,44.582,3,31.972,3S3.582,7,.792,18.5a66.22,66.22,0,0,0,0,20.46c1.18,4.74,5.05,8.63,11.36,11.41l-4,5A3.47,3.47,0,0,0,10.882,61a3.39,3.39,0,0,0,1.44-.31L26.862,54c1.79.18,3.49.27,5.07.27,11.04.04,28.41-4.04,31.18-15.43a60.33,60.33,0,0,0,0-20.33Z"></path></svg>');function Rw(e,t){let n=we(t,"iconSize",3,16);var r=Dw();ie(()=>{K(r,"width",n()),K(r,"height",n())}),I(e,r)}function Bw(e,t){ae(t,!0);let n=te(!1);lt(()=>{N(n,!0)});var r=De(),i=Ce(r);{var o=l=>{var c=De(),d=Ce(c);Or(d,()=>t.children??de),I(l,c)};Ee(i,l=>{k(n)&&l(o)})}I(e,r),ce()}var Iw=Z('<div class="transform transition-transform duration-300 group-hover:scale-115"><!></div>');function If(e){Bw(e,{children:(t,n)=>{var r=Iw(),i=R(r);Rw(i,{iconSize:24}),be(3,r,()=>Wo,()=>({delay:200,duration:300,start:.6,opacity:.8})),I(t,r)},$$slots:{default:!0}})}var Pw=Z('<div class="p-1"><div class="flex-center w-12 h-12 bg-white bg-opacity-10 rounded-full"><!></div></div>');function Lw(e){var t=Pw(),n=R(t),r=R(n);If(r),I(e,t)}var $w=Z('<div class="flex"><div class="flex-center whitespace-nowrap pl-4 pr-1"> </div> <!></div>');function Nw(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(oe,"$t",n);let o=Zi();lt(()=>{const a=Math.ceil(k(o).getBoundingClientRect().width);xf.set(a)}),zn();var l=$w(),c=R(l),d=R(c),u=U(c,2);Lw(u),gn(l,a=>N(o,a),()=>k(o)),ie(a=>{K(c,"data-testid",Se.widgetButtonText),Gr(d,a)},[()=>i()("button.greeting")],rn),I(e,l),ce(),r()}var qw=Z('<div id="widget-online-badge" class="absolute left-0 bottom-0 w-2 h-2 p-1.5 bg-green-400 rounded-full border-2 border-white"></div>');function zw(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(Xv,"$isWidgetOnline",n);zn();var o=De(),l=Ce(o);{var c=d=>{var u=qw();ie(()=>K(u,"data-testid",Se.widgetOnlineBadge)),be(3,u,()=>Wo),I(d,u)};Ee(l,d=>{i()&&d(c)})}I(e,o),ce(),r()}var jw=Z('<div id="widget-unread-messages-badge" class="absolute right-0 top-0 min-w-5 h-5 flex-center px-1 text-white bg-red-600 text-xs rounded-full shadow"> </div>');function Uw(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(Ql,"$unreadMessagesCount",n);let o=Ge(()=>i()>0);var l=De(),c=Ce(l);{var d=u=>{var a=jw(),s=R(a);ie(()=>{K(a,"data-testid",Se.widgetUnreadMessagesBadge),Gr(s,i()>99?"99+":i())}),be(3,a,()=>Wo),I(u,a)};Ee(c,u=>{k(o)&&u(d)})}I(e,l),ce(),r()}var Vw=()=>Kn(),Hw=Z('<div class="h-full w-full relative flex justify-end border-rounded-full"><div role="button" class="group flex-center w-full bg-primary-gradient bg-primary-gradient-hover text-primary-content rounded-full overflow-hidden cursor-pointer content-focus-secondary"><!> <!></div> <!></div>');function Gw(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(oe,"$t",n),o=()=>W(Vo,"$isWidgetButtonBubble",n);zn();var l=Hw(),c=R(l);K(c,"tabindex",0),c.__click=[Vw];var d=R(c);{var u=h=>{If(h)},a=h=>{Nw(h,{})};Ee(d,h=>{o()?h(u):h(a,!1)})}var s=U(d,2);zw(s,{});var f=U(c,2);Uw(f,{}),ie(h=>{K(c,"aria-label",h),K(c,"data-testid",Se.widgetButton)},[()=>i()("ariaLabel.openChat")],rn),mr("keypress",c,h=>h.key===of.Enter&&Kn()),I(e,l),ce(),r()}Hr(["click"]);var Ww=Z("<div><!></div>");function Kw(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(M_,"$buttonFrameWidth",n),o=()=>W(kb,"$shouldRenderButtonFrame",n),l=()=>W(Vo,"$isWidgetButtonBubble",n),c=()=>W(oe,"$t",n);let d=te(void 0);const u=p=>{k(d)&&(k(d).style.width=`${p}px`)},{widgetBlockingOptions:a}=x.getOptions();nt(()=>{k(d)&&u(i())});var s=De(),f=Ce(s);{var h=p=>{var v=Ww();let g;var m=R(v);Ud(m,()=>l()||c(),y=>{const b=Ge(Xn);Yn(y,{component:Gw,get id(){return Se.widgetButtonFrame},title:"Smartsupp widget button",get frameStyle(){return k(b)}})}),gn(v,y=>N(d,y),()=>k(d)),qn(v,y=>pi==null?void 0:pi(y)),ie(y=>{g=$e(v,`border-radius: 9999px; box-shadow: rgb(0 0 0 / 6%) 0px 1px 6px, rgb(0 0 0 / ${a!=null&&a.limitShadow?"20%) 0px 2px 12px":"12%) 0px 2px 32px"}; color-scheme: normal;`,g,{height:y}),K(v,"data-testid",Se.widgetButtonFrame)},[()=>qe(Af)]),be(1,v,()=>Ze,()=>({y:20,delay:150,duration:300})),be(2,v,()=>Ow,()=>({duration:250})),I(p,v)};Ee(f,p=>{o()&&p(h)})}I(e,s),ce(),r()}var Xw=Z("<div></div>");function Qe(e,t){ae(t,!0);let n=we(t,"height",3,20),r=we(t,"width",3,"100%"),i=we(t,"colorScheme",3,"gray");const l=`${we(t,"roundedStyle",3,"rounded-full")()} animate-pulse`;var c=Xw();let d;ie((u,a)=>{_t(c,1,Mn([l,i()==="gray"&&"bg-gray-200",i()==="darkGray"&&"bg-gray-300"])),d=$e(c,"",d,{height:u,width:a})},[()=>qe(n()),()=>Bl(r())?qe(r()):r()]),I(e,c),ce()}function Pt(e,t){let n=we(t,"size",3,20);Qe(e,{colorScheme:"darkGray",get width(){return n()},get height(){return n()}})}var Ue=(e=>(e[e.Initialized=0]="Initialized",e[e.Loading=1]="Loading",e[e.Success=2]="Success",e[e.Error=3]="Error",e))(Ue||{});const Vi=new Map,Zw=async e=>{const t=(await e()).default;return Vi.set(e,t),t};function Pf(e,t){ae(t,!0);const n=we(t,"delay",3,200);let r=te(pt(Ue.Initialized)),i=te(void 0),o=te(void 0),l=te(void 0);const c=Ge(()=>k(i)),d=()=>{window.clearTimeout(k(l))},u=async()=>{d(),N(o,void 0),N(i,void 0),n()>0?(N(r,Ue.Initialized,!0),N(l,window.setTimeout(()=>{N(r,Ue.Loading,!0)},n()),!0)):N(r,Ue.Loading,!0);try{N(i,await Zw(t.loader),!0),N(r,Ue.Success,!0)}catch(p){if(N(r,Ue.Error,!0),p instanceof Error)N(o,p,!0);else throw p}d()};Vi.has(t.loader)?(N(r,Ue.Success,!0),N(i,Vi.get(t.loader),!0)):lt(()=>{u()});var a=De(),s=Ce(a);{var f=p=>{var v=De(),g=Ce(v);Or(g,()=>t.error,()=>({error:k(o)})),I(p,v)},h=(p,v)=>{{var g=y=>{var b=De(),_=Ce(b);Or(_,()=>t.loading),I(y,b)},m=(y,b)=>{{var _=C=>{var A=De(),w=Ce(A);Hu(w,()=>k(c),(F,S)=>{S(F,{})}),I(C,A)};Ee(y,C=>{k(r)===Ue.Success&&C(_)},b)}};Ee(p,y=>{k(r)===Ue.Loading?y(g):y(m,!1)},v)}};Ee(s,p=>{k(r)===Ue.Error&&t.error?p(f):p(h,!1)})}I(e,a),ce()}const Yw="modulepreload",Jw=function(e,t){return new URL(e,t).href},cu={},Lf=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(a){return Promise.all(a.map(s=>Promise.resolve(s).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=l(n.map(a=>{if(a=Jw(a,r),a in cu)return;cu[a]=!0;const s=a.endsWith(".css"),f=s?'[rel="stylesheet"]':"";if(!!r)for(let v=c.length-1;v>=0;v--){const g=c[v];if(g.href===a&&(!s||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const p=document.createElement("link");if(p.rel=s?"stylesheet":Yw,s||(p.as="script"),p.crossOrigin="",p.href=a,u&&p.setAttribute("nonce",u),document.head.appendChild(p),s)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})},Qw=()=>Lf(()=>import("./WidgetMessenger-CswZf7EW.js"),__vite__mapDeps([0,1]),import.meta.url),eC=e=>{var t=nC(),n=R(t),r=R(n),i=R(r);Pt(i,{size:32});var o=U(r,2),l=R(o);Pt(l,{size:32});var c=U(l,2);Pt(c,{size:32});var d=U(c,2);Pt(d,{size:32});var u=U(n,2),a=R(u),s=R(a);Pt(s,{size:44});var f=U(a,2),h=R(f);Qe(h,{height:20,width:270});var p=U(h,2);Qe(p,{height:20,width:122});var v=U(u,2),g=R(v),m=R(g);Pt(m,{size:28});var y=U(g,2),b=R(y);Qe(b,{height:112,width:295,roundedStyle:"rounded-6"});var _=U(v,2),C=R(_);Qe(C,{height:32,width:295});var A=U(C,2);Qe(A,{height:32,width:148});var w=U(A,2);Qe(w,{height:32,width:224}),I(e,t)},tC=(e,t)=>{let n=()=>t==null?void 0:t().error;var r=rC(),i=U(R(r),2),o=R(i);ie(()=>Gr(o,n())),I(e,r)};var nC=Z('<div class="h-full p-2 bg-white" id="TODO test"><div class="flex justify-between"><div class="flex"><!></div> <div class="flex space-x-2"><!> <!> <!></div></div> <div class="flex mt-2"><div class="flex ml-1 mr-2"><!></div> <div class="flex-bottom space-y-2"><!> <!></div></div> <div class="flex items-baseline mt-8"><div class="flex ml-1 mr-2"><!></div> <div class="space-y-2"><!></div></div> <div class="flex flex-col items-end space-y-5 mt-8 mr-1"><!> <!> <!></div></div>'),rC=Z('<div class="h-full p-4 bg-white text-red-500"><div class="text-lg font-bold">Failed to load widget</div> <div class="text-xs"> </div></div>');function sC(e){Pf(e,{loader:Qw,delay:0,error:tC,loading:eC})}var iC=Z("<div><!></div>");function oC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(cl,"$isFullScreenEnabled",n),o=()=>W(D_,"$isMessengerFrameExpanded",n),l=()=>W(st,"$isMobileDevice",n),c=()=>W(Fb,"$shouldRenderMessengerFrame",n);let d=te(void 0);const u="MobileWidgetMessengerOpen",a=(v,g)=>{if(!k(d))return;const{widgetBlockingOptions:m}=x.getOptions(),{width:y,height:b}=C_(v,g);k(d).style.maxHeight=jt(b)?b:qe(b),k(d).style.width=jt(y)?y:qe(y),k(d).style.height=v||m!=null&&m.headlessMode?"100%":"calc(100% - 40px)"};nt(()=>{k(d)&&a(i(),o())});let s=te(!1);nt(()=>{if(l()){if(c()&&!k(s)){const v=Lt().createElement("style");v.textContent="* {overflow: hidden}",v.className=u,Lt().head.appendChild(v),N(s,!0)}if(!c()&&k(s)){const v=Lt().head.getElementsByClassName(u);for(let g=0;g<v.length;g++)Lt().head.removeChild(v[g]);N(s,!1)}}});var f=De(),h=Ce(f);{var p=v=>{var g=iC();$e(g,"",{},{transition:"max-height 250ms ease-in-out, width 250ms ease-in-out",overflow:"hidden"});var m=R(g);const y=Ge(Xn);Yn(m,{component:sC,get id(){return Se.widgetMessengerFrame},title:"Smartsupp widget messenger",get frameStyle(){return k(y)}}),qn(g,(b,_)=>gi==null?void 0:gi(b,_),i),gn(g,b=>N(d,b),()=>k(d)),ie(()=>K(g,"data-testid",Se.widgetMessengerFrame)),be(1,g,()=>Ze,()=>({y:20,duration:200})),be(2,g,()=>Ze,()=>({y:10,duration:150})),I(v,g)};Ee(h,v=>{c()&&v(p)})}I(e,f),ce(),r()}const aC=()=>Lf(()=>import("./WidgetPopup-CacF_RyW.js"),__vite__mapDeps([2,1]),import.meta.url),cC=e=>{var t=uC(),n=R(t);Pt(n,{size:44});var r=U(n,2),i=R(r);Qe(i,{height:20,width:270});var o=U(i,2);Qe(o,{height:20,width:270});var l=U(o,2);Qe(l,{height:20,width:122}),I(e,t)};var uC=Z('<div class="h-full p-2 bg-white"><!> <div class="mt-4 space-y-2"><!> <!> <!></div></div>');function lC(e){Pf(e,{loader:aC,delay:0,loading:cC})}var fC=Z("<div><!></div>");function dC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(T_,"$popupFrameHeight",n),o=()=>W(O_,"$hasPopupFrameHover",n),l=()=>W(Db,"$shouldRenderPopupFrame",n);let c=te(void 0);const d=p=>{k(c)&&(k(c).style.maxHeight=`${p}px`)},{widgetBlockingOptions:u}=x.getOptions();nt(()=>{k(c)&&d(i())});let a=Ge(()=>o()?.28:.16);var s=De(),f=Ce(s);{var h=p=>{var v=fC();let g;var m=R(v);const y=Ge(Xn);Yn(m,{component:lC,get id(){return Se.widgetPopupFrame},title:"Smartsupp widget popup",get frameStyle(){return k(y)}}),gn(v,b=>N(c,b),()=>k(c)),qn(v,b=>vi==null?void 0:vi(b)),ie(b=>{g=$e(v,"height: calc(100% - 40px); border-radius: 12px; transition: box-shadow 0.2s ease-in-out; transition: max-height 250ms ease-in-out",g,{width:b,overflow:"hidden","box-shadow":`rgba(0, 0, 0, ${u!=null&&u.limitShadow?"0.2) 0px 3px 12px":`${k(a)}) 0px 3px 16px`}`}),K(v,"data-testid",Se.widgetPopupFrame)},[()=>qe(300)]),be(1,v,()=>Ze,()=>({y:20,delay:300,duration:400})),be(2,v,()=>Ze,()=>({y:10,duration:400})),I(p,v)};Ee(f,p=>{l()&&p(h)})}I(e,s),ce(),r()}var hC=Z('<div class="flex p-2"><div></div> <div></div> <div></div></div>');function pC(e,t){let n=we(t,"size",3,"md"),r=we(t,"color",3,"black"),i=Ge(()=>t.iterations??"infinite");var o=hC(),l=R(o);let c;var d=U(l,2);let u;var a=U(d,2);let s;ie(()=>{_t(l,1,`typing-indicator ${n()} indicator-color-${r()} animate-typing`,"svelte-13wgl1n"),c=$e(l,"",c,{"animation-iteration-count":k(i)}),_t(d,1,`typing-indicator ${n()} indicator-color-${r()} typing-indicator-second animate-typing`,"svelte-13wgl1n"),u=$e(d,"",u,{"animation-iteration-count":k(i)}),_t(a,1,`typing-indicator ${n()} indicator-color-${r()} typing-indicator-third animate-typing`,"svelte-13wgl1n"),s=$e(a,"",s,{"animation-iteration-count":k(i)})}),I(e,o)}var gC=Z('<div class="flex-center h-full bg-white rounded-lg"><!></div>');function vC(e){var t=gC(),n=R(t);pC(n,{iterations:2}),I(e,t)}var mC=Z("<div><!></div>");function yC(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(Mb,"$shouldRenderTypingFrame",n),{widgetBlockingOptions:o}=x.getOptions();zn();var l=De(),c=Ce(l);{var d=u=>{var a=mC();let s;var f=R(a);const h=rn(Xn);Yn(f,{component:vC,get id(){return Se.widgetTypingFrame},title:"Smartsupp widget typing",get frameStyle(){return k(h)}}),qn(a,p=>mi==null?void 0:mi(p)),ie((p,v)=>{s=$e(a,`box-shadow: rgba(0, 0, 0, 0.2) ${o!=null&&o.limitShadow?"0px 3px 12px":"0px 3px 16px"}; border-radius: 24px;`,s,{height:p,width:v,overflow:"hidden"}),K(a,"data-testid",Se.widgetTypingFrame)},[()=>qe(40),()=>qe(70)],rn),be(1,a,()=>Ze,()=>({y:20,delay:300,duration:400})),be(2,a,()=>Ze,()=>({y:10,duration:250})),I(u,a)};Ee(c,u=>{i()&&u(d)})}I(e,l),ce(),r()}const Hi=O(null),bC=M([Hi],([e])=>!!e);var _C=Uu('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"></path></svg>');function wC(e,t){const n=nh(t,["$$slots","$$events","$$legacy"]);var r=_C();let i;ie(()=>i=Kd(r,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),I(e,r)}const CC=(e,t)=>{e.stopPropagation(),t.onClick&&t.onClick(e)};var AC=Z('<button type="button" tabindex="0"><div><!></div></button>');function EC(e,t){ae(t,!0);let n=we(t,"iconOrientation",3,"right"),r=we(t,"iconAnimation",3,"none"),i=we(t,"size",3,"md"),o=we(t,"variant",3,"ghost"),l=we(t,"focus",3,"primary");const c=n()==="right"?1:-1;let d=Ge(()=>i()==="xl"?1.5:1.2);const u=Ge(()=>t.icon);var a=AC();a.__click=[CC,t];var s=R(a),f=R(s);Hu(f,()=>k(u),(h,p)=>{p(h,{width:"1em",height:"1em"})}),ie(h=>{_t(a,1,h,"svelte-14sk8ij"),a.disabled=t.disabled,K(a,"data-testid",t.testId),K(a,"aria-label",t.iconDescription),K(a,"aria-disabled",t.disabled),_t(s,1,Mn(["w-full h-full flex items-center justify-center",r()==="spin"&&"animate-spin"])),$e(s,`transform: scale(${k(d)}) scaleX(${c});`)},[()=>Mn([`btn btn-${o()} btn-${i()}`,!!t.disabled&&"btn-disabled",Bh()?"cursor-auto":"cursor-pointer",l()==="primary"&&"button-focus",l()==="secondary"&&"button-focus-secondary"])]),I(e,a),ce()}Hr(["click"]);var FC=(e,t)=>t("overlay"),SC=e=>e.stopPropagation(),kC=Z('<img class="m-auto max-h-full max-w-full select-none bg-black" width="auto" height="auto">'),xC=e=>e.stopPropagation(),TC=Z('<video controls class="m-auto max-h-full max-w-full bg-black object-contain"><track kind="captions"> <source></video>',2),OC=Z('<div class="w-full h-full flex flex-col"><div class="flex-shrink flex flex-row w-full bg-black text-white"><div class="flex-grow flex items-center text-md px-4 overflow-hidden"><span class="whitespace-nowrap text-ellipsis overflow-hidden"> </span></div> <div class="flex-shrink"><!></div></div> <div><!></div></div>');function MC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(Nh,"$isDesktop",n),o=()=>W(Hi,"$previewedMedia",n),l=()=>W(oe,"$t",n);let c=Ge(i);const d=C=>{C==="overlay"&&!k(c)||Hi.set(null)};var u=OC(),a=R(u),s=R(a),f=R(s),h=R(f),p=U(s,2),v=R(p);const g=Ge(()=>l()("tooltip.close"));EC(v,{onClick:()=>d("button"),icon:wC,get iconDescription(){return k(g)},size:"xl"});var m=U(a,2);m.__click=[FC,d];var y=R(m);{var b=C=>{var A=kC();A.__click=[SC],ie(()=>{var w,F;K(A,"src",(w=o())==null?void 0:w.attachment.url),K(A,"alt",(F=o())==null?void 0:F.attachment.fileName)}),mr("keypress",A,()=>{}),I(C,A)},_=(C,A)=>{{var w=F=>{var S=TC();S.__click=[xC],S.autoplay=!0,S.loop=!0;var D=U(R(S),2);ie(()=>K(D,"src",o().attachment.url)),mr("keypress",S,()=>{}),I(F,S)};Ee(C,F=>{var S;((S=o())==null?void 0:S.type)===qi.Video&&F(w)},A)}};Ee(y,C=>{var A;((A=o())==null?void 0:A.type)===qi.Image?C(b):C(_,!1)})}ie(()=>{var C;Gr(h,(C=o())==null?void 0:C.attachment.fileName),_t(m,1,Mn(["relative overflow-hidden flex-grow flex items-center bg-black/80 z-10",i()?"p-8":"p-4"]))}),mr("keypress",m,()=>{}),be(1,u,()=>Ze,()=>({y:20,delay:300,duration:400})),be(2,u,()=>Ze,()=>({y:10,duration:250})),I(e,u),ce(),r()}Hr(["click"]);var DC=Z("<div><!></div>");function RC(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(bC,"$shouldRenderMediaPreview",n);zn();var o=De(),l=Ce(o);{var c=d=>{var u=DC();$e(u,"",{},{transition:"max-height 250ms ease-in-out, width 250ms ease-in-out"});var a=R(u);const s=rn(()=>Xn(f=>{f.style.position="fixed"}));Yn(a,{component:MC,get id(){return Se.widgetImagePreview},title:"Smartsupp widget image preview",get frameStyle(){return k(s)}}),qn(u,f=>yi==null?void 0:yi(f)),ie(()=>K(u,"data-testid",Se.widgetImagePreview)),be(1,u,()=>Ze,()=>({y:20,delay:100,duration:250})),be(2,u,()=>Ze,()=>({y:10,duration:250})),I(d,u)};Ee(l,d=>{i()&&d(c)})}I(e,o),ce(),r()}var BC=Z("<!> <!> <!> <!> <!>",1);function IC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(py,"$lastUnreadMessage",n),o=()=>W(_e,"$isMessengerFrameOpen",n);lt(()=>{(async()=>{await Qg(),await he.initClient()})()}),nt(()=>{i()&&!o()&&mf()}),lb(ne()),E(st)&&fb(ne()),xw(e,{children:(l,c)=>{var d=BC(),u=Ce(d);yC(u,{});var a=U(u,2);dC(a,{});var s=U(a,2);Kw(s,{});var f=U(s,2);oC(f,{});var h=U(f,2);RC(h,{}),I(l,d)},$$slots:{default:!0}}),ce(),r()}const Ko=io(window);x.init(Ko.options);Ko.installApi(Cw);zo.setThemeColor(Ko.options);db();yy();Vu(IC,{target:document.getElementById("app")});export{_t as $,Ee as A,GC as B,ne as C,k as D,rn as E,Un as F,Ge as G,Se as H,EC as I,be as J,Ow as K,of as L,Hr as M,we as N,$e as O,cA as P,qe as Q,U as R,aA as S,de as T,qn as U,Ze as V,uA as W,wC as X,m_ as Y,tA as Z,Sp as _,UC as a,tl as a$,Gr as a0,WA as a1,Kd as a2,nh as a3,Mn as a4,Bh as a5,af as a6,Nh as a7,ZC as a8,KA as a9,LA as aA,ll as aB,bh as aC,r1 as aD,zh as aE,jA as aF,ft as aG,$A as aH,eA as aI,wA as aJ,xA as aK,Uu as aL,Hu as aM,G as aN,he as aO,Be as aP,yA as aQ,Kv as aR,bA as aS,hb as aT,n1 as aU,wo as aV,Pr as aW,Qr as aX,Kg as aY,is as aZ,S0 as a_,VA as aa,UA as ab,lt as ac,j0 as ad,nt as ae,mr as af,Ye as ag,fi as ah,XA as ai,YA as aj,ZA as ak,QC as al,Ke as am,zt as an,Ht as ao,XC as ap,Al as aq,Ud as ar,N as as,te as at,Jc as au,Ip as av,Xe as aw,j as ax,c1 as ay,PA as az,GA as b,Ao as b$,bo as b0,pA as b1,T as b2,DA as b3,MA as b4,pC as b5,gn as b6,D_ as b7,zC as b8,iA as b9,Ve as bA,Yu as bB,Xr as bC,CA as bD,Qv as bE,RA as bF,Wn as bG,So as bH,QA as bI,wb as bJ,Md as bK,Bn as bL,_A as bM,At as bN,a1 as bO,Xv as bP,Wo as bQ,Fo as bR,Ut as bS,vA as bT,gA as bU,cl as bV,o1 as bW,i1 as bX,JA as bY,Nl as bZ,s1 as b_,st as ba,sA as bb,AA as bc,EA as bd,hA as be,Hi as bf,qi as bg,tm as bh,jC as bi,KC as bj,SA as bk,FA as bl,kA as bm,dm as bn,To as bo,nA as bp,rA as bq,ko as br,oA as bs,H as bt,pt as bu,uy as bv,lm as bw,Oo as bx,re as by,Dn as bz,HA as c,Lf as c$,Jl as c0,T_ as c1,py as c2,Kn as c3,$l as c4,Tb as c5,O_ as c6,IA as c7,Yi as c8,Ln as c9,YC as cA,mn as cB,it as cC,Dl as cD,Je as cE,lA as cF,li as cG,TA as cH,OA as cI,jm as cJ,NA as cK,Uv as cL,Vv as cM,$t as cN,X as cO,Eo as cP,Fn as cQ,dA as cR,_r as cS,qA as cT,WC as cU,Lo as cV,Qt as cW,t1 as cX,Ro as cY,ab as cZ,_e as c_,Qo as ca,on as cb,xn as cc,$C as cd,tn as ce,Nf as cf,jr as cg,V as ch,NC as ci,Zi as cj,Xi as ck,PC as cl,LC as cm,gd as cn,Ou as co,VC as cp,Cd as cq,wt as cr,qC as cs,lu as ct,Ji as cu,wd as cv,ju as cw,On as cx,sn as cy,JC as cz,M as d,kl as d0,Sl as d1,cg as d2,tg as d3,lg as d4,dg as d5,hg as d6,vg as d7,Cg as d8,Ag as d9,xg as da,Og as db,Mg as dc,Rg as dd,zg as de,Qe as df,Pt as dg,e1 as dh,Ih as di,fA as dj,ob as dk,zA as dl,Po as dm,Bi as dn,K0 as dp,mA as dq,cb as dr,BA as ds,ef as dt,Pn as e,R as f,E as g,ie as h,In as i,W as j,K as k,HC as l,I as m,ce as n,ze as o,ae as p,oe as q,eo as r,Or as s,Z as t,ct as u,x as v,O as w,zn as x,De as y,Ce as z};
//# sourceMappingURL=main-BSwCATKb.js.map
